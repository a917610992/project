<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.83.1" /><link rel="canonical" type="text/html" href="../../docs/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../favicons/android-192x192.png" sizes="192x192">

<title>Documentation | CVAT</title>
<meta name="description" content=""><meta property="og:title" content="Documentation" />
<meta property="og:description" content="Welcome to the documentation of Computer Vision Annotation Tool." />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/" /><meta property="og:site_name" content="CVAT" />

<meta itemprop="name" content="Documentation">
<meta itemprop="description" content="Welcome to the documentation of Computer Vision Annotation Tool."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Documentation"/>
<meta name="twitter:description" content="Welcome to the documentation of Computer Vision Annotation Tool."/>




<link rel="preload" href="../../scss/main.min.591a88c412fca6c692021fe322184768cfc320012e0a443e8514b68fd373aa21.css" as="style">
<link href="../../scss/main.min.591a88c412fca6c692021fe322184768cfc320012e0a443e8514b68fd373aa21.css" rel="stylesheet" integrity="">


<script
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="../../css/prism.css"/>




  </head>
  <body class="td-section">
    <header>
      


<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="../../about/">
    <span class="navbar-logo"><svg width="98" height="27" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M101 0v29l-52.544.001C44.326 35.511 35.598 40 25.5 40 11.417 40 0 31.27.0 20.5S11.417 1 25.5 1c4.542.0 8.807.908 12.5 2.5V0h63z" id="logoA"/></defs><g transform="translate(-2 -1)" fill="none" fill-rule="evenodd"><mask id="logoB" fill="#fff"><use xlink:href="#logoA"/></mask><path d="M48.142 1c4.736.0 6.879 3.234 6.879 5.904v2.068h-4.737V6.904c0-.79-.789-2.144-2.142-2.144-1.654.0-2.368 1.354-2.368 2.144v15.192c0 .79.714 2.144 2.368 2.144 1.353.0 2.142-1.354 2.142-2.144v-2.068h4.737v2.068c0 2.67-2.143 5.904-6.88 5.904C42.956 28 41 24.766 41 22.134V6.904C41 4.234 42.955 1 48.142 1zM19-6c9.389.0 17 7.611 17 17s-7.611 17-17 17S2 20.389 2 11 9.611-6 19-6zm42.256 7.338 3.345 19.48h.075l3.42-19.48h5l-6.052 26.324h-5L56.22 1.338h5.037zm20.706.0 5.413 26.324h-4.699l-.94-6.13h-4.548l-.902 6.13h-4.435l5.413-26.324h4.698zm18.038.0v3.723h-4.849v22.6h-4.699v-22.6h-4.81V1.338H1e2zM19 4a7 7 0 100 14 7 7 0 000-14zm60.557 4.295h-.113l-1.466 9.439h3.007l-1.428-9.439z" fill="#fff" fill-rule="nonzero" mask="url(#logoB)"/></g></svg></span>
  </a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        
        
        <a class="nav-link active" href="../../docs/" ><span class="active">Documentation</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        
        
        <a class="nav-link" href="../../about/" ><span>About</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        <a class="nav-link" href="https://app.cvat.ai"  ><span>Try it now</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        <a class="nav-link" href="https://github.com/cvat-ai/cvat"  ><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      
      
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-target="#dropdown_ver" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v1.7.0
          </a>
        </li>
        
      
      
    </ul>
  </div>
  <div class="dropdown-menu" id="dropdown_ver" aria-labelledby="navbarDropdownMenuLink">
    
      
        <a class="dropdown-item" href="../../../docs/">Latest version</a>
    
      
        <a class="dropdown-item" href="../../../v1.5.0/docs/">v1.5.0</a>
    
      
        <a class="dropdown-item" href="../../../v1.6.0/docs/">v1.6.0</a>
    
      
        <a class="dropdown-item" href="../../../v1.7.0/docs/">v1.7.0</a>
    
      
        <a class="dropdown-item" href="../../../v2.0.0/docs/">v2.0.0</a>
    
      
        <a class="dropdown-item" href="../../../v2.1.0/docs/">v2.1.0</a>
    
      
        <a class="dropdown-item" href="../../../v2.2.0/docs/">v2.2.0</a>
    
  </div>
  <div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../offline-search-index.ddc52655c0401f490fd559311fbc9d54.json"
  data-offline-search-base-href="../../"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Documentation</h1>
<div class="lead">Welcome to the documentation of Computer Vision Annotation Tool.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-a2e0f2893b70992c6087c2b17584ff57">Getting started</a></li>


    
  
    
    
	
<li>2: <a href="#pg-4de0c854c3d97300282075e2dd0795a4">Manual</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-6e3faa521a8eee0151bb424e7e354ec2">Basics</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1.1: <a href="#pg-6cd3bd5d60cd0c43f0ec8d6eda7d5ac9">Authorization</a></li>


    
  
    
    
	
<li>2.1.2: <a href="#pg-4cba161eee5c23abe3080d09ab388363">Creating an annotation task</a></li>


    
  
    
    
	
<li>2.1.3: <a href="#pg-8b4dc0e86031450cd60eaa0f2183926a">Tasks page</a></li>


    
  
    
    
	
<li>2.1.4: <a href="#pg-8c04ccdab3bc47dc61dead92a456dc5e">Task details</a></li>


    
  
    
    
	
<li>2.1.5: <a href="#pg-a3f5ac3c9c71a6d1895f21973a3e7073">Interface of the annotation tool</a></li>


    
  
    
    
	
<li>2.1.6: <a href="#pg-96e4853b69b3c2d45ac6c4dd9eef69f6">Basic navigation</a></li>


    
  
    
    
	
<li>2.1.7: <a href="#pg-247db7504d756f9b8a302d89c1c60fe7">Top Panel</a></li>


    
  
    
    
	
<li>2.1.8: <a href="#pg-033c4b006bed59c7b79e37da79355e2e">Controls sidebar</a></li>


    
  
    
    
	
<li>2.1.9: <a href="#pg-d34292e27e49f0509de6c6421a59ba45">Objects sidebar</a></li>


    
  
    
    
	
<li>2.1.10: <a href="#pg-10c89fea132557f61275ddd0d266cb4e">Workspace</a></li>


    
  
    
    
	
<li>2.1.11: <a href="#pg-47ed10f28d06442b6965546d6ab61314">3D task workspace</a></li>


    
  
    
    
	
<li>2.1.12: <a href="#pg-c8319ec25cc2a4c111e6b974fbac56a9">Standard 3D mode (basics)</a></li>


    
  
    
    
	
<li>2.1.13: <a href="#pg-53f38f5f3dc68518da9fd1c61a97f54b">Settings</a></li>


    
  
    
    
	
<li>2.1.14: <a href="#pg-80f7a8f997d5088990b434c7df6c7816">Types of shapes</a></li>


    
  
    
    
	
<li>2.1.15: <a href="#pg-0eec06490fd7abcbf29363c77731c1c9">Shape mode (basics)</a></li>


    
  
    
    
	
<li>2.1.16: <a href="#pg-1a21d24ffd5d3b98ea39a1b5efdc33e2">Track mode (basics)</a></li>


    
  
    
    
	
<li>2.1.17: <a href="#pg-1dbc64c6e91e3ee0c7d7a8112ccdc7b6">3D Object annotation (basics)</a></li>


    
  
    
    
	
<li>2.1.18: <a href="#pg-01df2b1d465b8c0d0021dec1627ed90f">Attribute annotation mode (basics)</a></li>


    
  
    
    
	
<li>2.1.19: <a href="#pg-49ca3c5a8947ba788a9e6295ce16a840">Vocabulary</a></li>


    
  
    
    
	
<li>2.1.20: <a href="#pg-c9da6f8a00196503e659cee9f4e1b3b6">Cloud storages page</a></li>


    
  
    
    
	
<li>2.1.21: <a href="#pg-d013ec6e69303d468f8e8b14075372d7">Attach cloud storage</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-efbc0d92c419283ee8525c147b11fb71">Advanced</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.1: <a href="#pg-789f9715966b149b8f1811e593d89fcd">Projects</a></li>


    
  
    
    
	
<li>2.2.2: <a href="#pg-721c6749c3e22c1edc40499266d46267">Search</a></li>


    
  
    
    
	
<li>2.2.3: <a href="#pg-e2b99661441784c00f94d2aa1a169963">Shape mode (advanced)</a></li>


    
  
    
    
	
<li>2.2.4: <a href="#pg-588e4c6ed67ac064499157f92893ddc2">Track mode (advanced)</a></li>


    
  
    
    
	
<li>2.2.5: <a href="#pg-d340565087e0f9cbfaf6ccd6219466d5">3D Object annotation (advanced)</a></li>


    
  
    
    
	
<li>2.2.6: <a href="#pg-09ca69c0dc37771f108831f0a42fb850">Attribute annotation mode (advanced)</a></li>


    
  
    
    
	
<li>2.2.7: <a href="#pg-d32b157b6b3a0b7c00c0dee2a7facf36">Annotation with rectangle by 4 points</a></li>


    
  
    
    
	
<li>2.2.8: <a href="#pg-cec0435c8a22adeb069ae65e703e55b4">Annotation with points</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.8.1: <a href="#pg-73dd0aab0c51b42d098e1dd25f9e34d8">Points in shape mode</a></li>


    
  
    
    
	
<li>2.2.8.2: <a href="#pg-926b5bce12f08790d7354dc3d2253131">Linear interpolation with one point</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2.2.9: <a href="#pg-6b3f1429846a7f18d172169ce5fe900b">Annotation with polylines</a></li>


    
  
    
    
	
<li>2.2.10: <a href="#pg-c5fa63295c9b67cd2ae59ac351ccb7f6">Annotation with polygons</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.10.1: <a href="#pg-4d4bf5bacfbd5eb9dcef94a38c91930f">Manual drawing</a></li>


    
  
    
    
	
<li>2.2.10.2: <a href="#pg-49a42ac9fb14c261fcb4d6df121ec6b5">Drawing using automatic borders</a></li>


    
  
    
    
	
<li>2.2.10.3: <a href="#pg-f59490f3517703af487d1db1d573c2cf">Edit polygon</a></li>


    
  
    
    
	
<li>2.2.10.4: <a href="#pg-1f4fe1a1fe6fe79b065945412ca4d774">Track mode with polygons</a></li>


    
  
    
    
	
<li>2.2.10.5: <a href="#pg-c692762faa73de2bce0ebde15b8e137b">Creating masks</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2.2.11: <a href="#pg-2956283d6b6c8c0e6edfed34d5caee42">Annotation with Tags</a></li>


    
  
    
    
	
<li>2.2.12: <a href="#pg-82dc27f17f28048728c9cc8c6032e5c7">Annotation with cuboids</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.12.1: <a href="#pg-7b24a39d3199ad1d17cd5b25b2ccd305">Creating the cuboid</a></li>


    
  
    
    
	
<li>2.2.12.2: <a href="#pg-03837b9c8c03b964e151f921b8c66118">Editing the cuboid</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2.2.13: <a href="#pg-3faa555d05f5bd038991ddb04ce3064f">Models</a></li>


    
  
    
    
	
<li>2.2.14: <a href="#pg-46b81ede25cce0506f702375bc768345">AI Tools</a></li>


    
  
    
    
	
<li>2.2.15: <a href="#pg-683724c7b8abed898db7cc3fb2305178">OpenCV tools</a></li>


    
  
    
    
	
<li>2.2.16: <a href="#pg-ea08163bba95655dc41bf95a12621935">Automatic annotation</a></li>


    
  
    
    
	
<li>2.2.17: <a href="#pg-fc91c0e18df3d93ca34276834080c325">Export/import a task</a></li>


    
  
    
    
	
<li>2.2.18: <a href="#pg-e76f1b6644eb58347ed4421aa00ef7d7">Downloading annotations</a></li>


    
  
    
    
	
<li>2.2.19: <a href="#pg-757ced1f18ccd12bc544bb7d55797ef7">Task synchronization with a repository</a></li>


    
  
    
    
	
<li>2.2.20: <a href="#pg-f588fe2ead0d52f7dc13ab44434d9446">Formats</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.20.1: <a href="#pg-bb85520cf3910fc2c5223b25cd27fb23"></a></li>


    
  
    
    
	
<li>2.2.20.2: <a href="#pg-56305e87b0babeca60c43bc357abdecd"></a></li>


    
  
    
    
	
<li>2.2.20.3: <a href="#pg-89565d26b6237565243f9fbdb1c69506"></a></li>


    
  
    
    
	
<li>2.2.20.4: <a href="#pg-684a69f071dbb7f0c74bfa7aa048bc55"></a></li>


    
  
    
    
	
<li>2.2.20.5: <a href="#pg-6d73c8045cca651d4c33c37c54bee1eb"></a></li>


    
  
    
    
	
<li>2.2.20.6: <a href="#pg-290a597e3f293c37b49f23700c1c7029"></a></li>


    
  
    
    
	
<li>2.2.20.7: <a href="#pg-94f134e11587c913b9a0a9ea83f89beb"></a></li>


    
  
    
    
	
<li>2.2.20.8: <a href="#pg-325950f41f3ace02cd43a9a49e738e12"></a></li>


    
  
    
    
	
<li>2.2.20.9: <a href="#pg-e3e1166f576647b7965c930f5091599f"></a></li>


    
  
    
    
	
<li>2.2.20.10: <a href="#pg-37ea47d7e7cb5ab2516a949cad325f19"></a></li>


    
  
    
    
	
<li>2.2.20.11: <a href="#pg-f3e3abb5b13d6f59f5100a9d8ae3645f"></a></li>


    
  
    
    
	
<li>2.2.20.12: <a href="#pg-bdc4a2c3af1233a5e9cdef14bd683a14"></a></li>


    
  
    
    
	
<li>2.2.20.13: <a href="#pg-e5cb2753d48cd08b4ee4ff9e10696658"></a></li>


    
  
    
    
	
<li>2.2.20.14: <a href="#pg-b43e1ff431da6854eb46bb51b712cc0b"></a></li>


    
  
    
    
	
<li>2.2.20.15: <a href="#pg-58cc638fb0d2a3516ec0e834a1eb3973"></a></li>


    
  

    </ul>
    
  
    
    
	
<li>2.2.21: <a href="#pg-f698bff22886f6eda6cdad45220469c4">XML annotation format</a></li>


    
  
    
    
	
<li>2.2.22: <a href="#pg-77171fcfcdf5ea7519669685c24e95c3">Shortcuts</a></li>


    
  
    
    
	
<li>2.2.23: <a href="#pg-8c8c008f3339d846e9b9e1cce1057602">Filter</a></li>


    
  
    
    
	
<li>2.2.24: <a href="#pg-36f6d1f2f816a0b53b7c706d77dce673">Review</a></li>


    
  
    
    
	
<li>2.2.25: <a href="#pg-e8b13f3a1b1ab022a3ac4c5532053190">Context images for 2d task</a></li>


    
  
    
    
	
<li>2.2.26: <a href="#pg-158b1d880eaabf3e0830c8518c23321b">Shape grouping</a></li>


    
  
    
    
	
<li>2.2.27: <a href="#pg-1d89766387352cb048ccadef403c6743">Analytics Monitoring</a></li>


    
  
    
    
	
<li>2.2.28: <a href="#pg-cadd546c949870aa199c5df717a0755c">Command line interface (CLI)</a></li>


    
  
    
    
	
<li>2.2.29: <a href="#pg-38aabad9f17e6d1d7ac9776c09a32a5c">Simple command line to prepare dataset manifest file</a></li>


    
  
    
    
	
<li>2.2.30: <a href="#pg-d7d77f3c70d971a82c22b478c3271a5a">Data preparation on the fly</a></li>


    
  
    
    
	
<li>2.2.31: <a href="#pg-1b35e18fef7d8c06ef313e32977f5739">Serverless tutorial</a></li>


    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-9d2b3fd06ac095b9dc68b7aa8fbf324e">Administration</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-1e63fbd88462376b0ea61a372d0f0256">Basics</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1.1: <a href="#pg-3b52a3a4deeb0315f304ab2f6d5bc85d">Installation Guide</a></li>


    
  
    
    
	
<li>3.1.2: <a href="#pg-e0876969fd23d4213b245cf0d69ca6d3">AWS-Deployment Guide</a></li>


    
  
    
    
	
<li>3.1.3: <a href="#pg-fe76cc8b9c063eb6606ea27948386ce7">REST API guide</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3.2: <a href="#pg-ba6eae2adf800d38632b8981c2dee567">Advanced</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.2.1: <a href="#pg-510d3a6059194f92357d8aa6f6ce7693">Installation Analytics</a></li>


    
  
    
    
	
<li>3.2.2: <a href="#pg-0525160925e6dcda34a919060abed2a7">Semi-automatic and Automatic Annotation</a></li>


    
  
    
    
	
<li>3.2.3: <a href="#pg-7545f3c848c8d646b0c6d2ceef722983">Mounting cloud storage</a></li>


    
  
    
    
	
<li>3.2.4: <a href="#pg-c7cf871a1ff98f3a84b27456c266df2c">Backup guide</a></li>


    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-99612595f9f698dd585c96dcc8298d9a">Contributing to this project</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.1: <a href="#pg-581cde702b4a79613a0ad27e40794a90">Development environment</a></li>


    
  
    
    
	
<li>4.2: <a href="#pg-9331ae571b7ea5467eaf6403bb797504">Setup additional components in development environment</a></li>


    
  
    
    
	
<li>4.3: <a href="#pg-c414e3e4151a3294cd86a33ca60eb228">JavaScript/Typescript coding style</a></li>


    
  
    
    
	
<li>4.4: <a href="#pg-4ef825a7833abf73c578fadc480d6f1b">Branching model</a></li>


    
  
    
    
	
<li>4.5: <a href="#pg-9f0fa9959f1dde888009a7489abc95ad">Using the issue tracker</a></li>


    
  
    
    
	
<li>4.6: <a href="#pg-3d2c51c440746ae3c1c664fd3c6874c5">Bug reports</a></li>


    
  
    
    
	
<li>4.7: <a href="#pg-36bf632c8a299272d929049c3399f872">Feature requests</a></li>


    
  
    
    
	
<li>4.8: <a href="#pg-bfe8b249a0cc63de417c2f12c6a75c87">Pull requests</a></li>


    
  
    
    
	
<li>4.9: <a href="#pg-aa57dee42d2570392356d846a0921fdf">How to add a new annotation format support</a></li>


    
  
    
    
	
<li>4.10: <a href="#pg-5e4aadf37d817bf7a4525e9d88ae86f7">REST API design principles</a></li>


    
  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-956da29f025cba37fca9fe6b80ab5d48">Frequently asked questions</a></li>


    
  

    </ul>


<div class="content">
      <p>CVAT is a free, online, interactive video and image annotation tool for computer vision.
It is being developed and used by Intel to annotate millions of objects with different properties.
Many UI and UX decisions are based on feedbacks from professional data annotation team.
Try it online <a href="https://cvat.org">cvat.org</a>.</p>
<p>Our documentation provides information for AI researchers, system administrators, developers, simple and advanced users.
The documentation is divided into three sections, and each section is divided into subsections <code>basic</code> and <code>advanced</code>.</p>
<section id="docs">



 
<a id="td-block-0" class="td-offset-anchor"></a>
<section class="row td-box td-box--docs td-box--gradient td-box--height-auto">
	<div class="col">
		<div class="row ">
			
				<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fas fa-sign-in-alt"></i>
  </div>
  <h4 class="h3"><a href="../../docs/getting_started/">Getting started</a></h4>
  <p class="mb-0"><p>Basic information and sections needed for a quick start.</p>
</p>
</div>
<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fas fa-question"></i>
  </div>
  <h4 class="h3"><a href="../../docs/faq/">FAQ</a></h4>
  <p class="mb-0"><p>Answers to frequently asked questions.</p>
</p>
</div>
<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fab fa-github"></i>
  </div>
  <h4 class="h3"><a href="https://github.com/openvinotoolkit/cvat">GitHub Repository</a></h4>
  <p class="mb-0"><p>Computer Vision Annotation Tool GitHub repository.</p>
</p>
</div>
<!--lint disable maximum-line-length-->
<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fas fa-book"></i>
  </div>
  <h4 class="h3"><a href="../../docs/manual/">Manual</a></h4>
  <p class="mb-0"><p>This section contains documents for CVAT simple and advanced users.</p>
</p>
</div>
<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fas fa-server"></i>
  </div>
  <h4 class="h3"><a href="../../docs/administration/">Administration</a></h4>
  <p class="mb-0"><p>This section contains documents for system administrators.</p>
</p>
</div>
<div class="col-lg-4 mb-5 mb-lg-0 text-center ">
  <div class="mb-4 h1">
    <i class="fas fa-terminal"></i>
  </div>
  <h4 class="h3"><a href="../../docs/contributing/">Contributing</a></h4>
  <p class="mb-0"><p>This section contains documents for developers.</p>
</p>
</div>

			
		</div>
	</div>
</section>

</section>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a2e0f2893b70992c6087c2b17584ff57">1 - Getting started</h1>
    
	<p>This section contains basic information and links to sections necessary for a quick start.</p>
<h2 id="installation">Installation</h2>
<p>First step is to install CVAT on your system:</p>
<ul>
<li><a href="../../docs/administration/basics/installation/#ubuntu-1804-x86_64amd64">Installation on Ubuntu</a></li>
<li><a href="../../docs/administration/basics/installation/#windows-10">Installation on Windows 10</a></li>
<li><a href="../../docs/administration/basics/installation/#mac-os-mojave">Installation on Mac OS</a></li>
</ul>
<p>To learn how to create a superuser and log in to CVAT,
go to the <a href="../../docs/manual/basics/authorization/">authorization</a> section.</p>
<h2 id="getting-started-in-cvat">Getting started in CVAT</h2>
<p>To create a task, go to <code>Tasks</code> section. Click <code>Create new task</code> to go to the task creation page.</p>
<p>Set the name of the future task.</p>
<p>Set the label using the constructor: first click <code>Add label</code>, then enter the name of the label and choose the color.</p>
<p><img src="../../images/create_a_new_task.gif" alt=""></p>
<p>You need to upload images or videos for your future annotation. To do so, simply drag and drop the files.</p>
<p>To learn more, go to <a href="../../docs/manual/basics/creating_an_annotation_task/">creating an annotation task</a></p>
<h2 id="annotation">Annotation</h2>
<h3 id="basic">Basic</h3>
<p>When the task is created, you will see a corresponding message in the top right corner.
Click the <code>Open task</code> button to go to the task page.</p>
<p>Once on the task page, open a link to the job in the jobs list.</p>
<p>Choose a correct section for your type of the task and start annotation.</p>
<table>
<thead>
<tr>
<th>Shape</th>
<th>Annotation</th>
<th>Interpolation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rectangle</td>
<td><a href="../../docs/manual/basics/shape-mode-basics/">Shape mode (basics)</a></td>
<td><a href="../../docs/manual/basics/track-mode-basics/">Track mode (basics)</a></td>
</tr>
<tr>
<td>Polygon</td>
<td><a href="../../docs/manual/advanced/annotation-with-polygons/">Annotation with polygons</a></td>
<td><a href="../../docs/manual/advanced/annotation-with-polygons/track-mode-with-polygons/">Track mode with polygons</a></td>
</tr>
<tr>
<td>Polyline</td>
<td><a href="../../docs/manual/advanced/annotation-with-polylines/">Annotation with polylines</a></td>
<td></td>
</tr>
<tr>
<td>Points</td>
<td><a href="../../docs/manual/advanced/annotation-with-points/points-in-shape-mode/">Points in shape mode</a></td>
<td><a href="../../docs/manual/advanced/annotation-with-points/liner-interpolation-with-one-point/">Liner interpolation with one point</a></td>
</tr>
<tr>
<td>Cuboids</td>
<td><a href="../../docs/manual/advanced/annotation-with-cuboids/">Annotation with cuboids</a></td>
<td><a href="../../docs/manual/advanced/annotation-with-cuboids/editing-the-cuboid/">Editing the cuboid</a></td>
</tr>
<tr>
<td>Tag</td>
<td><a href="../../docs/manual/advanced/annotation-with-tags/">Annotation with tags</a></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="advanced">Advanced</h3>
<p>In CVAT there is the possibility of using automatic and semi-automatic annotation what gives
you the opportunity to speed up the execution of the annotation:</p>
<ul>
<li><a href="../../docs/manual/advanced/opencv-tools/">OpenCV tools</a> - tools included in CVAT by default.</li>
<li><a href="../../docs/manual/advanced/ai-tools/">AI tools</a> - tools requiring installation.</li>
<li><a href="../../docs/manual/advanced/automatic-annotation/">Automatic annotation</a> - automatic annotation with using DL models.</li>
</ul>
<h2 id="dump-annotation">Dump annotation</h2>
<p><img src="../../images/image028.jpg" alt=""></p>
<ol>
<li>
<p>To download the annotations, first you have to save all changes.
Click the <code>Save</code> button or press <code>Ctrl+S</code>to save annotations quickly.</p>
</li>
<li>
<p>After you saved the changes, click the <code>Menu</code> button.</p>
</li>
<li>
<p>Then click the <code>Dump Annotation</code> button.</p>
</li>
<li>
<p>Lastly choose a format of the dump annotation file.</p>
</li>
</ol>
<p>To learn more, go to <a href="../../docs/manual/advanced/downloading-annotations/">downloading annotations</a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4de0c854c3d97300282075e2dd0795a4">2 - Manual</h1>
    <div class="lead">This section contains documents for CVAT simple and advanced users</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-6e3faa521a8eee0151bb424e7e354ec2">2.1 - Basics</h1>
    <div class="lead">This section contains basic documents for CVAT users</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-6cd3bd5d60cd0c43f0ec8d6eda7d5ac9">2.1.1 - Authorization</h1>
    
	<ul>
<li>
<p>First of all, you have to log in to CVAT tool.</p>
<p><img src="../../images/image001.jpg" alt=""></p>
</li>
<li>
<p>For register a new user press &ldquo;Create an account&rdquo;</p>
<p><img src="../../images/image002.jpg" alt=""></p>
</li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. The superuser can use
<a href="http://localhost:8080/admin">Django administration panel</a> to assign correct
groups to the user. Please use the command below to create an admin account:</p>
<p><code>docker exec -it cvat bash -ic 'python3 ~/manage.py createsuperuser'</code></p>
</li>
<li>
<p>If you want to create a non-admin account, you can do that using the link below
on the login page. Don&rsquo;t forget to modify permissions for the new user in the
administration panel. There are several groups (aka roles): admin, user,
annotator, observer.</p>
<p><img src="../../images/image003.jpg" alt=""></p>
</li>
</ul>
<h3 id="administration-panel">Administration panel</h3>
<p>Go to the <a href="http://localhost:8080/admin">Django administration panel</a>. There you can:</p>
<ul>
<li>
<p>Create / edit / delete users</p>
</li>
<li>
<p>Control permissions of users and access to the tool.</p>
<p><img src="../../images/image115.jpg" alt=""></p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4cba161eee5c23abe3080d09ab388363">2.1.2 - Creating an annotation task</h1>
    <div class="lead">Instructions on how to create and configure an annotation task.</div>
	<p>Create an annotation task pressing <code>Create new task</code> button on the tasks page or on the project page.
<img src="../../images/image004.jpg" alt=""></p>
<p>Specify parameters of the task:</p>
<h2 id="basic-configuration">Basic configuration</h2>
<h3 id="name">Name</h3>
<p>The name of the task to be created.</p>
<p><img src="../../images/image005.jpg" alt=""></p>
<h3 id="projects">Projects</h3>
<p>The project that this task will be related with.</p>
<p><img src="../../images/image193.jpg" alt=""></p>
<h3 id="labels">Labels</h3>
<p>There are two ways of working with labels (available only if the task is not related to the project):</p>
<ul>
<li>
<p>The <code>Constructor</code> is a simple way to add and adjust labels. To add a new label click the <code>Add label</code> button.
<img src="../../images/image123.jpg" alt=""></p>
<p>You can set a name of the label in the <code>Label name</code> field and choose a color for each label.</p>
<p><img src="../../images/image124.jpg" alt=""></p>
<p>If necessary you can add an attribute and set its properties by clicking <code>Add an attribute</code>:</p>
<p><img src="../../images/image125.jpg" alt=""></p>
<p>The following actions are available here:</p>
<ol>
<li>Set the attribute’s name.</li>
<li>Choose the way to display the attribute:
<ul>
<li>Select — drop down list of value</li>
<li>Radio — is used when it is necessary to choose just one option out of few suggested.</li>
<li>Checkbox — is used when it is necessary to choose any number of options out of suggested.</li>
<li>Text — is used when an attribute is entered as a text.</li>
<li>Number — is used when an attribute is entered as a number.</li>
</ul>
</li>
<li>Set values for the attribute. The values could be separated by pressing <code>Enter</code>.
The entered value is displayed as a separate element which could be deleted
by pressing <code>Backspace</code> or clicking the close button (x).
If the specified way of displaying the attribute is Text or Number,
the entered value will be displayed as text by default (e.g. you can specify the text format).</li>
<li>Checkbox <code>Mutable</code> determines if an attribute would be changed frame to frame.</li>
<li>You can delete the attribute by clicking the close button (x).</li>
</ol>
<p>Click the <code>Continue</code> button to add more labels.
If you need to cancel adding a label - press the <code>Cancel</code> button.
After all the necessary labels are added click the <code>Done</code> button.
After clicking <code>Done</code> the added labels would be displayed as separate elements of different colour.
You can edit or delete labels by clicking <code>Update attributes</code> or <code>Delete label</code>.</p>
</li>
<li>
<p>The <code>Raw</code> is a way of working with labels for an advanced user.
Raw presents label data in <em>json</em> format with an option of editing and copying labels as a text.
The <code>Done</code> button applies the changes and the <code>Reset</code> button cancels the changes.
<img src="../../images/image126.jpg" alt=""></p>
</li>
</ul>
<p>In <code>Raw</code> and <code>Constructor</code> mode, you can press the <code>Copy</code> button to copy the list of labels.</p>
<h3 id="select-files">Select files</h3>
<p>Press tab <code>My computer</code> to choose some files for annotation from your PC.
If you select tab <code>Connected file share</code> you can choose files for annotation from your network.
If you select <code> Remote source</code> , you&rsquo;ll see a field where you can enter a list of URLs (one URL per line).
If you upload a video or dataset with images and select <code>Use cache</code> option, you can attach a <code>manifest.jsonl</code> file.
You can find how to prepare it <a href="../../docs/manual/advanced/dataset_manifest/">here</a>.
If you select the <code>Cloud Storage</code> tab, you can select a cloud storage (for this type the cloud storage name),
after that choose the manifest file and select the required files.
For more information on how to attach cloud storage, see <a href="../../docs/manual/basics/attach-cloud-storage/">attach cloud storage</a></p>
<p><img src="../../images/image127.jpg" alt=""></p>
<h3 id="data-formats-for-a-3d-task">Data formats for a 3D task</h3>
<p>To create a 3D task, you need to use the following directory structures:

  














  














  














  














<ul class="nav nav-tabs" id="tabs-0" role="tablist"><li class="nav-item">
      <a class="nav-link active"
        id="tabs-0-0-tab" data-toggle="tab" href="#tabs-0-0" role="tab"
        aria-controls="tabs-0-0" aria-selected="true">
        Velodyne
      </a>
    </li><li class="nav-item">
      <a class="nav-link"
        id="tabs-0-1-tab" data-toggle="tab" href="#tabs-0-1" role="tab"
        aria-controls="tabs-0-1" aria-selected="false">
        3D pointcloud
      </a>
    </li><li class="nav-item">
      <a class="nav-link"
        id="tabs-0-2-tab" data-toggle="tab" href="#tabs-0-2" role="tab"
        aria-controls="tabs-0-2" aria-selected="false">
        3D Option 1
      </a>
    </li><li class="nav-item">
      <a class="nav-link"
        id="tabs-0-3-tab" data-toggle="tab" href="#tabs-0-3" role="tab"
        aria-controls="tabs-0-3" aria-selected="false">
        3D Option 2
      </a>
    </li></ul>


<div class="tab-content" id="tabs-0-content"><div class="tab-pane fade show active"
        id="tabs-0-0" role="tabpanel" aria-labelled-by="tabs-0-0-tab"><pre><code class="language-en" data-lang="en">    VELODYNE FORMAT
    Structure:
    velodyne_points/
    data/
    image_01.bin
    IMAGE_00 # unknown dirname, Generally image_01.png can be under IMAGE_00, IMAGE_01, IMAGE_02, IMAGE_03, etc
    data/
    image_01.png
  </code></pre></div>
  <div class="tab-pane fade"
        id="tabs-0-1" role="tabpanel" aria-labelled-by="tabs-0-1-tab"><pre><code class="language-en" data-lang="en">    3D POINTCLOUD DATA FORMAT
    Structure:
    pointcloud/
    00001.pcd
    related_images/
    00001_pcd/
    image_01.png # or any other image
  </code></pre></div>
  <div class="tab-pane fade"
        id="tabs-0-2" role="tabpanel" aria-labelled-by="tabs-0-2-tab"><pre><code class="language-en" data-lang="en">    3D, DEFAULT DATAFORMAT Option 1
    Structure:
    data/
    image.pcd
    image.png
  </code></pre></div>
  <div class="tab-pane fade"
        id="tabs-0-3" role="tabpanel" aria-labelled-by="tabs-0-3-tab"><pre><code class="language-en" data-lang="en">    3D, DEFAULT DATAFORMAT Option 2
    Structure:
    data/
    image_1/
    image_1.pcd
    context_1.png # or any other name
    context_2.jpg
  </code></pre></div>
  
</div>
</p>
<h2 id="advanced-configuration">Advanced configuration</h2>
<p><img src="../../images/image128_use_cache.jpg" alt=""></p>
<h3 id="use-zip-chunks">Use zip chunks</h3>
<p>Force to use zip chunks as compressed data. Actual for videos only.</p>
<h3 id="use-cache">Use cache</h3>
<p>Defines how to work with data. Select the checkbox to switch to the &ldquo;on-the-fly data processing&rdquo;,
which will reduce the task creation time (by preparing chunks when requests are received)
and store data in a cache of limited size with a policy of evicting less popular items.
See more <a href="../../docs/manual/advanced/data_on_fly/">here</a>.</p>
<h3 id="image-quality">Image Quality</h3>
<p>Use this option to specify quality of uploaded images.
The option helps to load high resolution datasets faster.
Use the value from <code>5</code> (almost completely compressed images) to <code>100</code> (not compressed images).</p>
<h2 id="overlap-size">Overlap Size</h2>
<p>Use this option to make overlapped segments.
The option makes tracks continuous from one segment into another.
Use it for interpolation mode. There are several options for using the parameter:</p>
<ul>
<li>For an interpolation task (video sequence).
If you annotate a bounding box on two adjacent segments they will be merged into one bounding box.
If overlap equals to zero or annotation is poor on adjacent segments inside a dumped annotation file,
you will have several tracks, one for each segment, which corresponds to the object.</li>
<li>For an annotation task (independent images).
If an object exists on overlapped segments, the overlap is greater than zero
and the annotation is good enough on adjacent segments, it will be automatically merged into one object.
If overlap equals to zero or annotation is poor on adjacent segments inside a dumped annotation file,
you will have several bounding boxes for the same object.
Thus, you annotate an object on the first segment.
You annotate the same object on second segment, and if you do it right, you
will have one track inside the annotations.
If annotations on different segments (on overlapped frames)
are very different, you will have two shapes for the same object.
This functionality works only for bounding boxes.
Polygons, polylines, points don&rsquo;t support automatic merge on overlapped segments
even the overlap parameter isn&rsquo;t zero and match between corresponding shapes on adjacent segments is perfect.</li>
</ul>
<h3 id="segment-size">Segment size</h3>
<p>Use this option to divide a huge dataset into a few smaller segments.
For example, one job cannot be annotated by several labelers (it isn&rsquo;t supported).
Thus using &ldquo;segment size&rdquo; you can create several jobs for the same annotation task.
It will help you to parallel data annotation process.</p>
<h3 id="start-frame">Start frame</h3>
<p>Frame from which video in task begins.</p>
<h3 id="stop-frame">Stop frame</h3>
<p>Frame on which video in task ends.</p>
<h3 id="frame-step">Frame Step</h3>
<p>Use this option to filter video frames.
For example, enter <code>25</code> to leave every twenty fifth frame in the video or every twenty fifth image.</p>
<h3 id="chunk-size">Chunk size</h3>
<p>Defines a number of frames to be packed in a chunk when send from client to server.
Server defines automatically if empty.</p>
<p>Recommended values:</p>
<ul>
<li>1080p or less: 36</li>
<li>2k or less: 8 - 16</li>
<li>4k or less: 4 - 8</li>
<li>More: 1 - 4</li>
</ul>
<h3 id="dataset-repository">Dataset Repository</h3>
<p>URL link of the repository optionally specifies the path to the repository for storage
(<code>default: annotation / &lt;dump_file_name&gt; .zip</code>).
The .zip and .xml file extension of annotation are supported.
Field format: <code>URL [PATH]</code> example: <code>https://github.com/project/repos.git [1/2/3/4/annotation.xml]</code></p>
<p>Supported URL formats :</p>
<ul>
<li><code>https://github.com/project/repos[.git]</code></li>
<li><code>github.com/project/repos[.git]</code></li>
<li><code>git@github.com:project/repos[.git]</code></li>
</ul>
<p>After the task is created, the synchronization status is displayed on the task page.</p>
<h3 id="use-lfs">Use LFS</h3>
<p>If the annotation file is large, you can create a repository with
<a href="https://git-lfs.github.com/">LFS</a> support.</p>
<h3 id="issue-tracker">Issue tracker</h3>
<p>Specify full issue tracker&rsquo;s URL if it&rsquo;s necessary.</p>
<p>Push <code>Submit</code> button and it will be added into the list of annotation tasks.
Then, the created task will be displayed on a <a href="../../docs/manual/basics/tasks-page/">tasks page</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8b4dc0e86031450cd60eaa0f2183926a">2.1.3 - Tasks page</h1>
    <div class="lead">Overview of the Tasks page.</div>
	<p><img src="../../images/image006_detrac.jpg" alt=""></p>
<p>The tasks page contains elements and each of them relates to a separate task. They are sorted in creation order.
Each element contains: task name, preview, progress bar, button <code>Open</code>, and menu <code>Actions</code>.
Each button is responsible for a in menu <code>Actions</code> specific function:</p>
<ul>
<li><code>Export task dataset</code> — download annotations or annotations and images in a specific format.
More information is available in the <a href="../../docs/manual/advanced/downloading-annotations/">Downloading annotations</a>
section.</li>
<li><code>Upload annotation</code> is available in the same formats as in <code>Export task dataset</code>. The
<a href="../../docs/manual/advanced/xml_format/">CVAT</a> format accepts both video and image sub-formats.</li>
<li><code>Automatic Annotation</code> — automatic annotation with OpenVINO toolkit.
Presence depends on how you build CVAT instance.</li>
<li><code>Export task</code> — Export a task into a zip archive.
Read more in the <a href="../../docs/manual/advanced/export-import/">export/import a task</a> section.</li>
<li><code>Move to project</code> — Moving the task to the project (can be used to move a task from one project to another).
Note that attributes reset during the moving process. In case of label mismatch,
you can create or delete necessary labels in the project/task.
Some task labels can be matched with the target project labels.</li>
<li><code>Delete</code> — delete task.</li>
</ul>
<hr>
<p>Push <code>Open</code> button to go to <a href="../../docs/manual/basics/task-details/">task details</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8c04ccdab3bc47dc61dead92a456dc5e">2.1.4 - Task details</h1>
    <div class="lead">Overview of the Task details page.</div>
	<p>Task details is a task page which contains a preview, a progress bar
and the details of the task (specified when the task was created) and the jobs section.</p>
<p><img src="../../images/image131_detrac.jpg" alt=""></p>
<ul>
<li>
<p>The next actions are available on this page:</p>
<ol>
<li>Change the task’s title.</li>
<li>Open <code>Actions</code> menu.</li>
<li>Change issue tracker or open issue tracker if it is specified.</li>
<li>Change labels (available only if the task is not related to the project).
You can add new labels or add attributes for the existing labels in the Raw mode or the Constructor mode.
By clicking <code>Copy</code> you will copy the labels to the clipboard.</li>
<li>Assigned to — is used to assign a task to a person. Start typing an assignee’s name and/or
choose the right person out of the dropdown list.</li>
</ol>
</li>
<li>
<p><code>Jobs</code> — is a list of all jobs for a particular task. Here you can find the next data:</p>
<ul>
<li>Jobs name with a hyperlink to it.</li>
<li>Frames — the frame interval.</li>
<li>A status of the job. The status is specified by the user in the menu inside the job.
There are three types of status: annotation, validation or completed.
The status of the job is changes the progress bar of the task.</li>
<li>Started on — start date of this job.</li>
<li>Duration — is the amount of time the job is being worked.</li>
<li>Assignee is the user who is working on the job.
You can start typing an assignee’s name and/or choose the right person out of the dropdown list.</li>
<li>Reviewer – a user assigned to carry out the review,
read more in the <a href="../../docs/manual/advanced/review/">review</a> section.</li>
<li><code>Copy</code>. By clicking <code>Copy</code> you will copy the job list to the clipboard.
The job list contains direct links to jobs.</li>
</ul>
<p>You can filter or sort jobs by status, as well as by assigner or reviewer.</p>
</li>
</ul>
<p>Follow a link inside <code>Jobs</code> section to start annotation process.
In some cases, you can have several links. It depends on size of your
task and <code>Overlap Size</code> and <code>Segment Size</code> parameters. To improve
UX, only the first chunk of several frames will be loaded and you will be able
to annotate first images. Other frames will be loaded in background.</p>
<p><img src="../../images/image007_detrac.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a3f5ac3c9c71a6d1895f21973a3e7073">2.1.5 - Interface of the annotation tool</h1>
    
	<p>The tool consists of:</p>
<ul>
<li><code>Header</code> - pinned header used to navigate CVAT sections and account settings;</li>
<li><code>Top panel</code> — contains navigation buttons, main functions and menu access;</li>
<li><code>Workspace</code> — space where images are shown;</li>
<li><code>Controls sidebar</code> — contains tools for navigating the image, zoom,
creating shapes and editing tracks (merge, split, group)</li>
<li><code>Objects sidebar</code> — contains label filter, two lists:
objects (on the frame) and labels (of objects on the frame) and appearance settings.</li>
</ul>
<p><img src="../../images/image034_detrac.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-96e4853b69b3c2d45ac6c4dd9eef69f6">2.1.6 - Basic navigation</h1>
    <div class="lead">Overview of basic controls.</div>
	<ol>
<li>
<p>Use arrows below to move to the next/previous frame.
Use the scroll bar slider to scroll through frames.
Almost every button has a shortcut.
To get a hint about a shortcut, just move your mouse pointer over an UI element.</p>
<p><img src="../../images/image008.jpg" alt=""></p>
</li>
<li>
<p>To navigate the image, use the button on the controls sidebar.
Another way an image can be moved/shifted is by holding the left mouse button inside
an area without annotated objects.
If the <code>Mouse Wheel</code> is pressed, then all annotated objects are ignored. Otherwise the
a highlighted bounding box will be moved instead of the image itself.</p>
<p><img src="../../images/image136.jpg" alt=""></p>
</li>
<li>
<p>You can use the button on the sidebar controls to zoom on a region of interest.
Use the button <code>Fit the image</code> to fit the image in the workspace.
You can also use the mouse wheel to scale the image
(the image will be zoomed relatively to your current cursor position).</p>
<p><img src="../../images/image137.jpg" alt=""></p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-247db7504d756f9b8a302d89c1c60fe7">2.1.7 - Top Panel</h1>
    <div class="lead">Overview of controls available on the top panel of the annotation tool.</div>
	<p><img src="../../images/image035.jpg" alt=""></p>
<hr>
<h2 id="menu-button">Menu button</h2>
<p>It is the main menu of the annotation tool. It can be used to download, upload and remove annotations.</p>
<p><img src="../../images/image051.jpg" alt=""></p>
<p>Button assignment:</p>
<ul>
<li>
<p><code>Dump Annotations</code> — downloads annotations from a task.</p>
</li>
<li>
<p><code>Upload Annotations</code> — uploads annotations into a task.</p>
</li>
<li>
<p><code>Remove Annotations</code> — calls the confirmation window if you click <code>Delete</code>, the annotation of the current job
will be removed, if you click <code>Select range</code> you can remove annotation on range frames, if you activate checkbox
<code>Delete only keyframe for tracks</code> then only keyframes will be deleted from the tracks, on the selected range.</p>
<p><img src="../../images/image229.jpg" alt=""></p>
</li>
<li>
<p><code>Export as a dataset</code> — download a data set from a task. Several formats are available:</p>
<ul>
<li><a href="https://github.com/openvinotoolkit/cvat/tree/develop/cvat/apps/dataset_manager/formats/datumaro">Datumaro</a></li>
<li><a href="http://host.robots.ox.ac.uk/pascal/VOC/">Pascal VOC 2012</a></li>
<li><a href="http://cocodataset.org/#format-data">MS COCO</a></li>
<li><a href="https://pjreddie.com/darknet/yolo/">YOLO</a></li>
</ul>
</li>
<li>
<p><code>Open the task</code> — opens a page with details about the task.</p>
</li>
<li>
<p><code>Request a review</code> - calls up the form to submit the job for a review, read more in the <a href="../../docs/manual/advanced/review/">review</a> section.</p>
</li>
<li>
<p><code>Finish the job</code> - changes the status of the job to <code>completed</code> and returns to the task page without review.</p>
</li>
<li>
<p><code>Submit the review</code> - (available during the review) calls up the form to submit a review, read more in the <a href="../../docs/manual/advanced/review/">review</a> section.</p>
</li>
</ul>
<h2 id="save-work">Save Work</h2>
<p>Saves annotations for the current job. The button has an indication of the saving process.</p>
<p><img src="../../images/image141.jpg" alt=""></p>
<h2 id="undo-redo-buttons">Undo-redo buttons</h2>
<p>Use buttons to undo actions or redo them.</p>
<p><img src="../../images/image061.jpg" alt=""></p>
<hr>
<h2 id="done">Done</h2>
<p><img src="../../images/image223.jpg" alt=""></p>
<p>Used to complete the creation of the object. This button appears only when the object is being created.</p>
<hr>
<h2 id="block">Block</h2>
<p><img src="../../images/image226.jpg" alt=""></p>
<p>Used to pause automatic line creation when drawing a polygon with
<a href="../../docs/manual/advanced/opencv-tools/#intelligent-scissors">OpenCV Intelligent scissors</a>.
Also used to postpone server requests when creating an object using <a href="../../docs/manual/advanced/ai-tools/">AI Tools</a>.
When blocking is activated, the button turns blue.</p>
<hr>
<h2 id="player">Player</h2>
<p>Go to the first /the latest frames.</p>
<p><img src="../../images/image036.jpg" alt=""></p>
<p>Go to the next/previous frame with a predefined step. Shortcuts:
<code>V</code> — step backward, <code>C</code> — step forward. By default the step is <code>10</code> frames
(change at <code>Account Menu</code> —&gt; <code>Settings</code> —&gt; <code>Player Step</code>).</p>
<p><img src="../../images/image037.jpg" alt=""></p>
<p>The button to go to the next / previous frame has the customization possibility.
To customize, right-click on the button and select one of three options:</p>
<ol>
<li>The default option - go to the next / previous frame (the step is 1 frame).</li>
<li>Go to the next / previous frame that has any objects (in particular filtered).
Read the <a href="../../docs/manual/advanced/filter/">filter</a> section to know the details how to use it.</li>
<li>Go to the next / previous frame without annotation at all.
Use this option in cases when you need to find missed frames quickly.</li>
</ol>
<p>Shortcuts: <code>D</code> - previous, <code>F</code> - next.</p>
<p><img src="../../images/image040.jpg" alt=""></p>
<p>Play the sequence of frames or the set of images.
Shortcut: <code>Space</code> (change at <code>Account Menu</code> —&gt; <code>Settings</code> —&gt; <code>Player Speed</code>).</p>
<p><img src="../../images/image041.jpg" alt=""></p>
<p>Go to a specific frame. Press <code>~</code> to focus on the element.</p>
<p><img src="../../images/image060.jpg" alt=""></p>
<hr>
<h2 id="fullscreen-player">Fullscreen Player</h2>
<p>The fullscreen player mode. The keyboard shortcut is <code>F11</code>.</p>
<p><img src="../../images/image143.jpg" alt=""></p>
<h2 id="info">Info</h2>
<p>Open the job info.</p>
<p><img src="../../images/image144_detrac.jpg" alt=""></p>
<p><em>Overview</em>:</p>
<ul>
<li><code>Assignee</code> - the one to whom the job is assigned.</li>
<li><code>Reviewer</code> – a user assigned to carry out the review,
read more in the <a href="../../docs/manual/advanced/review">review</a> section.</li>
<li><code>Start Frame</code> - the number of the first frame in this job.</li>
<li><code>End Frame</code> - the number of the last frame in this job.</li>
<li><code>Frames</code> - the total number of all frames in the job.</li>
</ul>
<p><em>Annotations statistics</em>:</p>
<p>This is a table number of created shapes, sorted by labels (e.g. vehicle, person)
and type of annotation (shape, track). As well as the number of manual and interpolated frames.</p>
<h2 id="ui-switcher">UI switcher</h2>
<p>Switching between user interface modes.</p>
<p><img src="../../images/image145.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-033c4b006bed59c7b79e37da79355e2e">2.1.8 - Controls sidebar</h1>
    <div class="lead">Overview of available functions on the controls sidebar of the annotation tool.</div>
	<h2 id="navigation">Navigation</h2>
<p><strong>Navigation block</strong> - contains tools for moving and rotating images.</p>
<table>
<thead>
<tr>
<th>Icon</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/image148.jpg" alt=""></td>
<td><code>Cursor</code> (<code>Esc</code>)- a basic annotation pedacting tool.</td>
</tr>
<tr>
<td><img src="../../images/image149.jpg" alt=""></td>
<td><code>Move the image</code>- a tool for moving around the image without<br/> the possibility of editing.</td>
</tr>
<tr>
<td><img src="../../images/image102.jpg" alt=""></td>
<td><code>Rotate</code>- two buttons to rotate the current frame<br/> a clockwise (<code>Ctrl+R</code>) and anticlockwise (<code>Ctrl+Shift+R</code>).<br/> You can enable <code>Rotate all images</code> in the settings to rotate all the images in the job</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="zoom">Zoom</h2>
<p><strong>Zoom block</strong> - contains tools for image zoom.</p>
<table>
<thead>
<tr>
<th>Icon</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/image151.jpg" alt=""></td>
<td><code>Fit image</code>- fits image into the workspace size.<br/> Shortcut - double click on an image</td>
</tr>
<tr>
<td><img src="../../images/image166.jpg" alt=""></td>
<td><code>Select a region of interest</code>- zooms in on a selected region.<br/> You can use this tool to quickly zoom in on a specific part of the frame.</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="shapes">Shapes</h2>
<p><strong>Shapes block</strong> - contains all the tools for creating shapes.</p>
<table>
<thead>
<tr>
<th>Icon</th>
<th>Description</th>
<th>Links to section</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/image189.jpg" alt=""></td>
<td><code>AI Tools</code></td>
<td><a href="../../docs/manual/advanced/ai-tools/">AI Tools</a></td>
</tr>
<tr>
<td><img src="../../images/image201.jpg" alt=""></td>
<td><code>OpenCV</code></td>
<td><a href="../../docs/manual/advanced/opencv-tools/">OpenCV</a></td>
</tr>
<tr>
<td><img src="../../images/image167.jpg" alt=""></td>
<td><code>Rectangle</code></td>
<td><a href="../../docs/manual/basics/shape-mode-basics/">Shape mode</a>; <a href="../../docs/manual/basics/track-mode-basics/">Track mode</a>;<br/> <a href="../../docs/manual/advanced/annotation-with-rectangle-by-4-points/">Drawing by 4 points</a></td>
</tr>
<tr>
<td><img src="../../images/image168.jpg" alt=""></td>
<td><code>Polygon</code></td>
<td><a href="../../docs/manual/advanced/annotation-with-polygons/">Annotation with polygons</a>; <a href="../../docs/manual/advanced/annotation-with-polygons/track-mode-with-polygons/">Track mode with polygons</a></td>
</tr>
<tr>
<td><img src="../../images/image169.jpg" alt=""></td>
<td><code>Polyline</code></td>
<td><a href="../../docs/manual/advanced/annotation-with-polylines/">Annotation with polylines</a></td>
</tr>
<tr>
<td><img src="../../images/image170.jpg" alt=""></td>
<td><code>Points</code></td>
<td><a href="../../docs/manual/advanced/annotation-with-points/">Annotation with points</a></td>
</tr>
<tr>
<td><img src="../../images/image176.jpg" alt=""></td>
<td><code>Cuboid</code></td>
<td><a href="../../docs/manual/advanced/annotation-with-cuboids/">Annotation with cuboids</a></td>
</tr>
<tr>
<td><img src="../../images/image171.jpg" alt=""></td>
<td><code>Tag</code></td>
<td><a href="../../docs/manual/advanced/annotation-with-tags/">Annotation with tags</a></td>
</tr>
<tr>
<td><img src="../../images/image195.jpg" alt=""></td>
<td><code>Open an issue</code></td>
<td><a href="../../docs/manual/advanced/review/">Review</a> (available only in review mode)</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="edit">Edit</h2>
<p><strong>Edit block</strong> - contains tools for editing tracks and shapes.</p>
<table>
<thead>
<tr>
<th>Icon</th>
<th>Description</th>
<th>Links to section</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/image172.jpg" alt=""></td>
<td><code>Merge Shapes</code>(<code>M</code>) — starts/stops the merging shapes mode.</td>
<td><a href="../../docs/manual/basics/track-mode-basics/">Track mode (basics)</a></td>
</tr>
<tr>
<td><img src="../../images/image173.jpg" alt=""></td>
<td><code>Group Shapes</code> (<code>G</code>) — starts/stops the grouping shapes mode.</td>
<td><a href="../../docs/manual/advanced/shape-grouping/">Shape grouping</a></td>
</tr>
<tr>
<td><img src="../../images/image174.jpg" alt=""></td>
<td><code>Split</code> — splits a track.</td>
<td><a href="../../docs/manual/advanced/track-mode-advanced/">Track mode (advanced)</a></td>
</tr>
</tbody>
</table>
<hr>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d34292e27e49f0509de6c6421a59ba45">2.1.9 - Objects sidebar</h1>
    <div class="lead">Overview of available functions on the objects sidebar of the annotation tool.</div>
	<h2 id="hide-objects-sidebar">Hide objects sidebar</h2>
<p><code>Hide</code> - the button hides the object&rsquo;s sidebar.</p>
<p><img src="../../images/image146.jpg" alt=""></p>
<h2 id="objects">Objects</h2>
<p><strong>Filter</strong> input box</p>
<p><img src="../../images/image059.jpg" alt=""></p>
<p>The way how to use filters is described in the advanced guide <a href="../../docs/manual/advanced/filter/">here</a>.</p>
<p><strong>List of objects</strong></p>
<p><img src="../../images/image147.jpg" alt=""></p>
<ul>
<li>Switch lock property for all - switches lock property of all objects in the frame.</li>
<li>Switch hidden property for all - switches hide property of all objects in the frame.</li>
<li>Expand/collapse all - collapses/expands the details field of all objects in the frame.</li>
<li>Sorting - sort the list of objects: updated time, ID - accent, ID - descent</li>
</ul>
<p>In the objects sidebar you can see the list of available objects on the current
frame. The following figure is an example of how the list might look like:</p>
<table>
<thead>
<tr>
<th>Shape mode</th>
<th>Track mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/image044.jpg" alt=""></td>
<td><img src="../../images/image045.jpg" alt=""></td>
</tr>
</tbody>
</table>
<hr>
<p><strong>Objects</strong> on the side bar</p>
<p>The type of a shape can be changed by selecting <strong>Label</strong> property.
For instance, it can look like shown on the figure below:</p>
<p><img src="../../images/image050.jpg" alt=""></p>
<p><strong>Object action menu</strong></p>
<p>The action menu calls up the button:</p>
<p><img src="../../images/image047.jpg" alt=""></p>
<p>The action menu contains:</p>
<ul>
<li>
<p><code>Create object URL</code> - puts a link to an object on the clipboard.
After you open the link, this object will be filtered.</p>
</li>
<li>
<p><code>Make a copy</code>- copies an object. The keyboard shortcut is <code>Ctrl + C</code> <code>Ctrl + V</code>.</p>
</li>
<li>
<p><code>Propagate</code> - Сopies the form to several frames,
invokes a dialog box in which you can specify the number of copies
or the frame onto which you want to copy the object. The keyboard shortcut <code>Ctrl + B</code>.</p>
<p><img src="../../images/image053.jpg" alt=""></p>
</li>
<li>
<p><code>To background</code> - moves the object to the background. The keyboard shortcut <code>-</code>,<code>_</code>.</p>
</li>
<li>
<p><code>To foreground</code> - moves the object to the foreground. The keyboard shortcut <code>+</code>,<code>=</code>.</p>
</li>
<li>
<p><code>Change instance color</code>- choosing a color using the color picker (available only in instance mode).</p>
<p><img src="../../images/image153.jpg" alt=""></p>
</li>
<li>
<p><code>Remove</code> - removes the object. The keyboard shortcut <code>Del</code>,<code>Shift+Del</code>.</p>
</li>
</ul>
<p>A shape can be locked to prevent its modification or moving by an accident. Shortcut to lock an object: <code>L</code>.</p>
<p><img src="../../images/image046.jpg" alt=""></p>
<p>A shape can be <strong>Occluded</strong>. Shortcut: <code>Q</code>. Such shapes have dashed boundaries.</p>
<p><img src="../../images/image048.jpg" alt=""></p>
<p><img src="../../images/image049_detrac.jpg" alt=""></p>
<p>You can change the way an object is displayed on a frame (show or hide).</p>
<p><img src="../../images/image055.jpg" alt=""></p>
<p><code>Switch pinned property</code> - when enabled, a shape cannot be moved by dragging or dropping.</p>
<p><img src="../../images/image052.jpg" alt=""></p>
<p><code>Tracker switcher</code> - enable/disable <a href="../../docs/manual/advanced/ai-tools#trackers">tracking</a> for the object.</p>
<p><img src="../../images/tracker_switcher.jpg" alt=""></p>
<p>By clicking on the <code>Details</code> button you can collapse or expand the field with all the attributes of the object.</p>
<p><img src="../../images/image154.jpg" alt=""></p>
<hr>
<h2 id="labels">Labels</h2>
<p>In this tab you can lock or hide objects of a certain label.
To change the color for a specific label,
you need to go to the task page and select the color by clicking the edit button,
this way you will change the label color for all jobs in the task.</p>
<p><img src="../../images/image062.jpg" alt=""></p>
<p><strong>Fast label change</strong></p>
<p>You can change the label of an object using hot keys.
In order to do it, you need to assign a number (from 0 to 9) to labels.
By default numbers 1,2&hellip;0 are assigned to the first ten labels.
To assign a number, click on the button placed at the right of a label name on the sidebar.</p>
<p><img src="../../images/image210.jpg" alt=""></p>
<p>After that you will be able to assign a corresponding label to an object
by hovering your mouse cursor over it and pressing <code>Ctrl + Num(0..9)</code>.</p>
<p>In case you do not point the cursor to the object, pressing <code>Ctrl + Num(0..9)</code> will set a chosen label as default,
so that the next object you create (use <code>N</code> key) will automatically have this label assigned.</p>
<p><img src="../../images/image211.jpg" alt=""></p>
<hr>
<h2 id="appearance">Appearance</h2>
<p><strong>Color By</strong> options</p>
<p>Change the color scheme of annotation:</p>
<ul>
<li>
<p><code>Instance</code> — every shape has random color</p>
<p><img src="../../images/image095_detrac.jpg" alt=""></p>
</li>
<li>
<p><code>Group</code> — every group of shape has its own random color, ungrouped shapes are white</p>
<p><img src="../../images/image094_detrac.jpg" alt=""></p>
</li>
<li>
<p><code>Label</code> — every label (e.g. car, person) has its own random color</p>
<p><img src="../../images/image093_detrac.jpg" alt=""></p>
<p>You can change any random color pointing to a needed box on a frame or on an
object sidebar.</p>
</li>
</ul>
<p><strong>Fill Opacity</strong> slider</p>
<p>Change the opacity of every shape in the annotation.</p>
<p><img src="../../images/image086_detrac.jpg" alt=""></p>
<p><strong>Selected Fill Opacity</strong> slider</p>
<p>Change the opacity of the selected object&rsquo;s fill. It is possible to change opacity while drawing an object in the case
of rectangles, polygons and cuboids.</p>
<p><img src="../../images/image089_detrac.jpg" alt=""></p>
<p><strong>Outlines borders</strong> checkbox</p>
<p>You can change a special shape border color by clicking on the <code>Eyedropper</code> icon.</p>
<p><img src="../../images/image088_detrac.jpg" alt=""></p>
<p><strong>Show bitmap</strong> checkbox</p>
<p>If enabled all shapes are displayed in white and the background is black.</p>
<p><img src="../../images/image087_detrac.jpg" alt=""></p>
<p><strong>Show projections</strong> checkbox</p>
<p>Enables / disables the display of auxiliary perspective lines. Only relevant for cuboids</p>
<p><img src="../../images/image090_detrac.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-10c89fea132557f61275ddd0d266cb4e">2.1.10 - Workspace</h1>
    <div class="lead">Overview of available functions on the workspace of the annotation tool.</div>
	<p>This is the main field in which drawing and editing objects takes place.
In addition the workspace also has the following functions:</p>
<ul>
<li>
<p>Right-clicking on an object calls up the <code>Object card</code> - this is an element containing
the necessary controls for changing the label and attributes of the object, as well as the action menu.</p>
<p><img src="../../images/image138_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p>Right-clicking a point deletes it.</p>
<p><img src="../../images/image139_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p><code>Z-axis slider</code> - Allows you to switch annotation layers hiding the upper layers
(slider is enabled if several z layers are on a frame).
This element has a button for adding a new layer. When pressed, a new layer is added and switched to it.
You can move objects in layers using the <code>+</code> and <code>-</code> keys.</p>
<p><img src="../../images/image140.jpg" alt=""></p>
</li>
<li>
<p><code>Image settings panel</code> -  used to set up the grid and set up image brightness contrast saturation.</p>
<ul>
<li>
<p>Show <code>Grid</code>, change grid size, choose color and transparency:</p>
<p><img src="../../images/image068_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p>Adjust <code>Brightness</code>/<code>Contrast</code>/<code>Saturation</code> of too exposed or too
dark images using <code>F3</code> — color settings (changes displaying settings and not the
image itself).</p>
</li>
</ul>
<p>Shortcuts:</p>
<ul>
<li>
<p><code>Shift+B+=</code>/<code>Shift+B+-</code> for brightness.</p>
</li>
<li>
<p><code>Shift+C+=</code>/<code>Shift+C+-</code> for contrast.</p>
</li>
<li>
<p><code>Shift+S+=</code>/<code>Shift+S+-</code> for saturation.</p>
<p><img src="../../images/image164_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p><code>Reset color settings</code> to default values.</p>
</li>
</ul>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-47ed10f28d06442b6965546d6ab61314">2.1.11 - 3D task workspace</h1>
    
	<p><img src="../../images/image214_carla_town3.jpg" alt=""></p>
<p>If the <code>related_images</code> folder contains any images, a <code>context image</code> will be available  in the perspective window.
The contextual image could be compared to 3D data and would help to identify the labels of marked objects.</p>
<p><code>Perspective</code> – a main window for work with objects in a 3D task.</p>
<p>Projections - projections are tied to an object so that a cuboid is in the center and looks like a rectangle.
Projections show only the selected object.</p>
<ul>
<li><code>Top</code> – a projection of the view from above.</li>
<li><code>Side</code> – a projection of the left side of the object.</li>
<li><code>Front</code> - a frontal projection of the object.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c8319ec25cc2a4c111e6b974fbac56a9">2.1.12 - Standard 3D mode (basics)</h1>
    
	<p><code>Standard 3d mode</code> - Designed to work with 3D data.
The mode is automatically available if you add PCD or Kitty BIN format data when you create a task.
<a href="../../docs/manual/basics/creating_an_annotation_task/">read more</a></p>
<p>You can adjust the size of the projections, to do so, simply drag the boundary between the projections.</p>
<p><img src="../../images/image215_carla_town3.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-53f38f5f3dc68518da9fd1c61a97f54b">2.1.13 - Settings</h1>
    
	<p>To open the settings open the user menu in the header and select the settings item or press <code>F2</code>.</p>
<p><img src="../../images/image067.jpg" alt=""></p>
<p><code>Settings</code> have two tabs:</p>
<p>In tab <code>Player</code> you can:</p>
<ul>
<li>Control step of <code>C</code> and <code>V</code> shortcuts.</li>
<li>Control speed of <code>Space</code>/<code>Play</code> button.</li>
<li>Select canvas background color. You can choose a background color or enter manually (in RGB or HEX format).</li>
<li><code>Reset zoom</code> Show every image in full size or zoomed out like previous
(it is enabled by default for interpolation mode and disabled for annotation mode).</li>
<li><code>Rotate all images</code> checkbox — switch the rotation of all frames or an individual frame.</li>
</ul>
<hr>
<p>In tab <code>Workspace</code> you can:</p>
<p><img src="../../images/image155.jpg" alt=""></p>
<ul>
<li>
<p><code>Enable auto save</code> checkbox — turned off by default.</p>
</li>
<li>
<p><code>Auto save interval (min)</code> input box — 15 minutes by default.</p>
</li>
<li>
<p><code>Show all interpolation tracks</code> checkbox — shows hidden objects on the
side panel for every interpolated object (turned off by default).</p>
</li>
<li>
<p><code>Always show object details</code> - show text for an object on the canvas not only when the object is activated:</p>
<p><img src="../../images/image152_detrac.jpg" alt=""></p>
</li>
<li>
<p><code>Automatic bordering</code> - enable automatic bordering for polygons and polylines during drawing/editing.
For more information To find out more, go to the section <a href="../../docs/manual/advanced/annotation-with-polygons/">annotation with polygons</a>.</p>
</li>
<li>
<p><code>Intelligent polygon cropping</code> - activates intelligent cropping when editing the polygon (read more in the section <a href="../../docs/manual/advanced/annotation-with-polygons/edit-polygon/">edit polygon</a></p>
</li>
<li>
<p><code>Attribute annotation mode (AAM) zoom margin</code> input box — defines margins (in px)
for shape in the attribute annotation mode.</p>
</li>
<li>
<p>Click <code>Save</code> to save settings (settings will be saved on the server and will not change after the page is refreshed).
Click <code>Cancel</code> or press <code>F2</code> to return to the annotation.</p>
</li>
<li>
<p><code>Default number of points in polygon approximation</code>
With this setting, you can choose the default number of points in polygon.
Works for serverless interactors and OpenCV scissors.</p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-80f7a8f997d5088990b434c7df6c7816">2.1.14 - Types of shapes</h1>
    <div class="lead">List of shapes available for annotation.</div>
	<p>There are five shapes which you can annotate your images with:</p>
<ul>
<li><code>Rectangle</code> or <code>Bounding box</code></li>
<li><code>Polygon</code></li>
<li><code>Polyline</code></li>
<li><code>Points</code></li>
<li><code>Cuboid</code></li>
<li><code>Cuboid in 3d task</code></li>
<li><code>Tag</code></li>
</ul>
<p>And there is how they all look like:</p>
<p><img src="../../images/image038_detrac.jpg" alt="" title="Rectangle"> <img src="../../images/image033_detrac.jpg" alt="" title="Polygon"></p>
<p><img src="../../images/image009_mapillary_vistas.jpg" alt="" title="Polyline"> <img src="../../images/image010_affectnet.jpg" alt="" title="Points"></p>
<p><img src="../../images/image015_detrac.jpg" alt="" title="Cuboid"> <img src="../../images/image218_carla_town3.jpg" alt="" title="Cuboid in 3d task"></p>
<p><img src="../../images/image135.jpg" alt="" title="Tag"></p>
<p><code>Tag</code> - has no shape in the workspace, but is displayed in objects sidebar.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0eec06490fd7abcbf29363c77731c1c9">2.1.15 - Shape mode (basics)</h1>
    <div class="lead">Usage examples and basic operations available during annotation in shape mode.</div>
	<p>Usage examples:</p>
<ul>
<li>Create new annotations for a set of images.</li>
<li>Add/modify/delete objects for existing annotations.</li>
</ul>
<ol>
<li>
<p>You need to select <code>Rectangle</code> on the controls sidebar:</p>
<p><img src="../../images/image082.jpg" alt=""></p>
<p>Before you start, select the correct <code> Label</code> (should be specified by you when creating the task)
and <code> Drawing Method</code> (by 2 points or by 4 points):</p>
<p><img src="../../images/image080.jpg" alt=""></p>
</li>
<li>
<p>Creating a new annotation in <code>Shape mode</code>:</p>
<ul>
<li>
<p>Create a separate <code>Rectangle</code> by clicking on <code>Shape</code>.</p>
<p><img src="../../images/image081.jpg" alt=""></p>
</li>
<li>
<p>Choose the opposite points. Your first rectangle is ready!</p>
<p><img src="../../images/image011_detrac.jpg" alt=""></p>
</li>
<li>
<p>To learn about creating a rectangle using the by 4 point drawing method, (<a href="../../docs/manual/advanced/annotation-with-rectangle-by-4-points/">read here</a>).</p>
</li>
<li>
<p>It is possible to adjust boundaries and location of the rectangle using a mouse.
Rectangle&rsquo;s size is shown in the top right corner , you can check it by clicking on any point of the shape.
You can also undo your actions using <code>Ctrl+Z</code> and redo them with <code>Shift+Ctrl+Z</code> or <code>Ctrl+Y</code>.</p>
</li>
</ul>
</li>
<li>
<p>You can see the <code>Object card</code> in the objects sidebar or open it by right-clicking on the object.
You can change the attributes in the details section.
You can perform basic operations or delete an object by clicking on the action menu button.</p>
<p><img src="../../images/image012.jpg" alt=""></p>
</li>
<li>
<p>The following figure is an example of a fully annotated frame with separate shapes.</p>
<p><img src="../../images/image013_detrac.jpg" alt=""></p>
<p>Read more in the section <a href="../../docs/manual/advanced/shape-mode-advanced/">shape mode (advanced)</a>.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1a21d24ffd5d3b98ea39a1b5efdc33e2">2.1.16 - Track mode (basics)</h1>
    <div class="lead">Usage examples and basic operations available during annotation in track mode.</div>
	<p>Usage examples:</p>
<ul>
<li>Create new annotations for a sequence of frames.</li>
<li>Add/modify/delete objects for existing annotations.</li>
<li>Edit tracks, merge several rectangles into one track.</li>
</ul>
<ol>
<li>
<p>Like in the <code>Shape mode</code>, you need to select a <code>Rectangle</code> on the sidebar,
in the appearing form, select the desired <code>Label</code> and the <code>Drawing method</code>.</p>
<p><img src="../../images/image083.jpg" alt=""></p>
</li>
<li>
<p>Creating a track for an object (look at the selected car as an example):</p>
<ul>
<li>
<p>Create a <code>Rectangle</code> in <code>Track mode</code> by clicking on <code>Track</code>.</p>
<p><img src="../../images/image014.jpg" alt=""></p>
</li>
<li>
<p>In <code>Track mode</code> the rectangle will be automatically interpolated on the next frames.</p>
</li>
<li>
<p>The cyclist starts moving on frame #2270. Let&rsquo;s mark the frame as a key frame.
You can press <code>K</code> for that or click the <code>star</code> button (see the screenshot below).</p>
<p><img src="../../images/image016.jpg" alt=""></p>
</li>
<li>
<p>If the object starts to change its position, you need to modify the rectangle where it happens.
It isn&rsquo;t necessary to change the rectangle on each frame, simply update several keyframes
and the frames between them will be interpolated automatically.</p>
</li>
<li>
<p>Let&rsquo;s jump 30 frames forward and adjust the boundaries of the object. See an example below:</p>
<p><img src="../../images/image017_detrac.jpg" alt=""></p>
</li>
<li>
<p>After that the rectangle of the object will be changed automatically on frames 2270 to 2300:</p>
<p><img src="../../images/gif019_detrac.gif" alt=""></p>
</li>
</ul>
</li>
<li>
<p>When the annotated object disappears or becomes too small, you need to
finish the track. You have to choose <code>Outside Property</code>, shortcut <code>O</code>.</p>
<p><img src="../../images/image019.jpg" alt=""></p>
</li>
<li>
<p>If the object isn&rsquo;t visible on a couple of frames and then appears again,
you can use the <code>Merge</code> feature to merge several individual tracks
into one.</p>
<p><img src="../../images/image020.jpg" alt=""></p>
<ul>
<li>
<p>Create tracks for moments when the cyclist is visible:</p>
<p><img src="../../images/gif001_detrac.gif" alt=""></p>
</li>
<li>
<p>Click <code>Merge</code> button or press key <code>M</code> and click on any rectangle of the first track
and on any rectangle of the second track and so on:</p>
<p><img src="../../images/image162_detrac.jpg" alt=""></p>
</li>
<li>
<p>Click <code>Merge</code> button or press <code>M</code> to apply changes.</p>
<p><img src="../../images/image020.jpg" alt=""></p>
</li>
<li>
<p>The final annotated sequence of frames in <code>Interpolation</code> mode can
look like the clip below:</p>
<p><img src="../../images/gif003_detrac.gif" alt=""></p>
<p>Read more in the section <a href="../../docs/manual/advanced/track-mode-advanced/">track mode (advanced)</a>.</p>
</li>
</ul>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1dbc64c6e91e3ee0c7d7a8112ccdc7b6">2.1.17 - 3D Object annotation (basics)</h1>
    <div class="lead">Overview of basic operations available when annotating 3D objects.</div>
	<h3 id="navigation">Navigation</h3>
<p>To move in 3D space you can use several methods:</p>
<ul>
<li>
<p>Select the <code>move the image</code> tool so you can move the camera using the mouse:</p>
<p><img src="../../images/image149.jpg" alt=""></p>
<ul>
<li>Hold down the left mouse button in the perspective window to turn the camera around the conditional point.</li>
<li>Hold down the right mouse button in the perspective window to move the camera inside the 3D space.</li>
<li>Move the mouse while holding down the wheel to zoom in/out in the perspective window.</li>
<li>Scroll the wheel to zoom in/out (works both in perspective and in projections).</li>
</ul>
</li>
<li>
<p>Move using the keys in the perspective window</p>
<p><img src="../../images/image216_carla_town3.jpg" alt=""></p>
</li>
</ul>
<p>You can move around by pressing the corresponding buttons:</p>
<ul>
<li>To rotate the camera use: <code>Shift+arrrowup</code>/<code>Shift+arrrowdown</code>/<code>Shift+arrrowleft</code>/<code>Shift+arrrowright</code>.</li>
<li>To move left/right use: <code>Allt+J</code>/<code>Alt+L</code>.</li>
<li>To move up/down use: <code>Alt-U</code>/<code>Alt+O</code>.</li>
<li>To zoom in/out use: <code>Alt+K</code>/<code>Alt+I</code>.</li>
</ul>
<h3 id="creating-a-cuboid">Creating a cuboid</h3>
<p>To create a cube in a 3D task you need to click the appropriate icon on the control sidebar,
select the label of the future object and click <code>shape</code>.</p>
<p><img src="../../images/image217.jpg" alt=""></p>
<p>After that the cursor will be followed by a cube. In the creation process you can rotate and move the camera
only using the keys. Left double-click will create an object.
You can place an object only near the dots of the point cloud.</p>
<p><img src="../../images/gif026_carla_town3.gif" alt=""></p>
<p>To adjust the size precisely, you need to edit the cuboid on the projections, for this change <code>Сursor</code> on control
sidebar or press <code>Esc</code>. In each projection you can:</p>
<p>Move the object in the projection plane - to do this, hover over the object,
press the left mouse button and move the object.</p>
<p><img src="../../images/gif027_carla_town3.gif" alt=""></p>
<p>Move one of the four points - you can change the size of the cuboid by dragging the points in the projection.</p>
<p><img src="../../images/gif028_carla_town3.gif" alt=""></p>
<p>Rotate the cuboid in the projection plane – to rotate the cuboid you should click on the appropriate point
and then drag it up/down or to the left/right.</p>
<p><img src="../../images/gif029_carla_town3.gif" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-01df2b1d465b8c0d0021dec1627ed90f">2.1.18 - Attribute annotation mode (basics)</h1>
    <div class="lead">Usage examples and basic operations available in attribute annotation mode.</div>
	<ul>
<li>
<p>In this mode you can edit attributes with fast navigation between objects and frames using a keyboard.
Open the drop-down list in the top panel and select Attribute annotation Mode.</p>
<p><img src="../../images/image023_affectnet.jpg" alt=""></p>
</li>
<li>
<p>In this mode objects panel change to a special panel :</p>
<p><img src="../../images/image026.jpg" alt=""></p>
</li>
<li>
<p>The active attribute will be red. In this case it is <code>gender</code> . Look at the bottom side panel to see all possible
shortcuts for changing the attribute. Press key <code>2</code> on your keyboard to assign a value (female) for the attribute
or select from the drop-down list.</p>
<p><img src="../../images/image024_affectnet.jpg" alt=""></p>
</li>
<li>
<p>Press <code>Up Arrow</code>/<code>Down Arrow</code> on your keyboard or click the buttons in the UI to go to the next/previous
attribute. In this case, after pressing <code>Down Arrow</code> you will be able to edit the <code>Age</code> attribute.</p>
<p><img src="../../images/image025_affectnet.jpg" alt=""></p>
</li>
<li>
<p>Use <code>Right Arrow</code>/<code>Left Arrow</code> keys to move to the previous/next image with annotation.</p>
</li>
</ul>
<p>To see all the hot keys available in the attribute annotation mode, press <code>F2</code>.
Read more in the section <a href="../../docs/manual/advanced/attribute-annotation-mode-advanced/">attribute annotation mode (advanced)</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-49ca3c5a8947ba788a9e6295ce16a840">2.1.19 - Vocabulary</h1>
    <div class="lead">List of terms pertaining to annotation in CVAT.</div>
	<p><strong>Label</strong> is a type of an annotated object (e.g. person, car, vehicle, etc.)</p>
<p><img src="../../images/image032_detrac.jpg" alt=""></p>
<hr>
<p><strong>Attribute</strong> is a property of an annotated object (e.g. color, model,
quality, etc.). There are two types of attributes:</p>
<ul>
<li>
<p><strong>Unique</strong>: immutable and can&rsquo;t be changed from frame to frame (e.g. age, gender, color, etc.)</p>
<p><img src="../../images/image073.jpg" alt=""></p>
</li>
<li>
<p><strong>Temporary</strong>: mutable and can be changed on any frame (e.g. quality, pose, truncated, etc.)</p>
<p><img src="../../images/image072.jpg" alt=""></p>
</li>
</ul>
<hr>
<p><strong>Track</strong> is a set of shapes on different frames which corresponds to one object.
Tracks are created in <code>Track mode</code></p>
<p><img src="../../images/gif003_detrac.gif" alt=""></p>
<hr>
<p><strong>Annotation</strong> is a set of shapes and tracks. There are several types of annotations:</p>
<ul>
<li><em>Manual</em> which is created by a person</li>
<li><em>Semi-automatic</em> which is created mainly automatically, but the user provides some data (e.g. interpolation)</li>
<li><em>Automatic</em> which is created automatically without a person in the loop</li>
</ul>
<hr>
<p><strong>Approximation</strong> allows you to reduce the number of points in the polygon.
Can be used to reduce the annotation file and to facilitate editing polygons.</p>
<p><img src="../../images/approximation_accuracy.gif" alt=""></p>
<hr>
<p><strong>Trackable</strong> object will be tracked automatically if the previous frame was
a latest keyframe for the object. More details in the section <a href="../../docs/manual/advanced/ai-tools/#trackers">trackers</a>.</p>
<p><img src="../../images/tracker_indication.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c9da6f8a00196503e659cee9f4e1b3b6">2.1.20 - Cloud storages page</h1>
    <div class="lead">Overview of the cloud storages page.</div>
	<p><img src="../../images/image227.jpg" alt=""></p>
<p>The cloud storages page contains elements, each of them relating to a separate cloud storage. 
Each element contains: preview, cloud storage name, provider, creation and update info, status,
<code>?</code> button for displaying the description and the actions menu.</p>
<p>Each button in the action menu is responsible for a specific function:</p>
<ul>
<li><code>Update</code> — update this cloud storage</li>
<li><code>Delete</code> — delete cloud storage.</li>
</ul>
<p><img src="../../images/cloud_storage_icon.jpg" alt=""></p>
<p>This preview will appear when it is impossible to get a real preview (e.g. storage is empty or
invalid credentials were used).</p>
<p>Click the <code>Attach a new storage</code> button to <a href="../../docs/manual/basics/attach-cloud-storage/">attach a new storage</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d013ec6e69303d468f8e8b14075372d7">2.1.21 - Attach cloud storage</h1>
    <div class="lead">Instructions on how to attach cloud storage using UI</div>
	<p>In CVAT you can use AWS-S3 and Azure Blob Container cloud storages to store image datasets for your tasks.</p>
<h2 id="using-aws-s3">Using AWS-S3</h2>
<h3 id="create-aws-account">Create AWS account</h3>
<p>First, you need to create an AWS account, to do this, <a href="https://portal.aws.amazon.com/billing/signup#/start">register of 5 steps</a>
following the instructions
(even if you plan to use a free basic account you may need to link a credit card to verify your identity).</p>
<p>To learn more about the operation and benefits of AWS cloud,
take a free <a href="https://www.aws.training/Details/eLearning?id=60697">AWS Cloud Practitioner Essentials</a> course,
which will be available after registration.</p>
<h3 id="create-a-bucket">Create a bucket</h3>
<p>After the account is created, go to <a href="https://s3.console.aws.amazon.com/s3/home">console AWS-S3</a>
and click <code>Create bucket</code>.</p>
<p><img src="../../images/aws-s3_tutorial_1.jpg" alt=""></p>
<p>You&rsquo;ll be taken to the bucket creation page. Here you have to specify the name of the bucket, region,
optionally you can copy the settings of another bucket by clicking on the <code>choose bucket</code> button.
Checkbox block all public access can be enabled as we will use <code>access key ID</code> and <code>secret access key</code> to gain access.
In the following sections, you can leave the default settings and click <code>create bucket</code>.
After you create the bucket it will appear in the list of buckets.</p>
<h3 id="create-user-and-configure-permissions">Create user and configure permissions</h3>
<p>To access bucket you will need to create a user, to do this, go <a href="https://console.aws.amazon.com/iamv2/home#/users">IAM</a>
and click <code>add users</code>. You need to choose AWS access type, have an access key ID and secret access key.</p>
<p><img src="../../images/aws-s3_tutorial_2.jpg" alt=""></p>
<p>After pressing <code>next</code> button to configure permissions, you need to create a user group.
To do this click <code>create a group</code>, input the <code>group name</code> and select permission policies add <code>AmazonS3ReadOnlyAccess</code>
using the search (if you want the user you create to have write rights to bucket select <code>AmazonS3FullAccess</code>).</p>
<p><img src="../../images/aws-s3_tutorial_3.jpg" alt=""></p>
<p>You can also add tags for the user (optional), and look again at the entered data. In the last step of creating a user,
you will be provided with <code>access key ID</code> and <code>secret access key</code>,
they will need to be used in CVAT when adding cloud storage.</p>
<p><img src="../../images/aws-s3_tutorial_4.jpg" alt=""></p>
<h3 id="upload-dataset">Upload dataset</h3>
<h4 id="prepare-dataset">Prepare dataset</h4>
<p>For example, let&rsquo;s take <a href="https://www.robots.ox.ac.uk/~vgg/data/pets/">The Oxford-IIIT Pet Dataset</a>:</p>
<ul>
<li>
<p>Download the <a href="https://www.robots.ox.ac.uk/~vgg/data/pets/data/images.tar.gz">archive with images</a>.</p>
</li>
<li>
<p>Unpack the archive into the prepared folder
and create a manifest file as described in <a href="../../docs/manual/advanced/dataset_manifest/">prepare manifest file section</a>:</p>
<pre><code>python &lt;cvat repository&gt;/utils/dataset_manifest/create.py --output-dir &lt;yourfolder&gt; &lt;yourfolder&gt;
</code></pre></li>
</ul>
<h4 id="upload">Upload</h4>
<ul>
<li>
<p>When the manifest file is ready, open the previously prepared bucket and click <code>Upload</code>:</p>
<p><img src="../../images/aws-s3_tutorial_5.jpg" alt=""></p>
</li>
<li>
<p>Drag the manifest file and image folder on the page and click <code>Upload</code>:</p>
<p><img src="../../images/aws-s3_tutorial_1.gif" alt=""></p>
</li>
</ul>
<p>Now you can <a href="#attach-new-cloud-storage">attach new cloud storage into CVAT</a>.</p>
<h2 id="using-azure-blob-container">Using Azure Blob Container</h2>
<h3 id="create-microsoft-account">Create Microsoft account</h3>
<p>First, create a Microsoft account by <a href="https://signup.live.com/signup?ru=https://login.live.com/">registering</a>,
or you can use your GitHub account to log in. After signing up for Azure, you&rsquo;ll need to choose a subscription plan,
you can choose a free 12-month subscription, but you&rsquo;ll need to enter your credit card details to verify your identity.
To learn more about Azure, read <a href="https://docs.microsoft.com/en-us/azure/">documentation</a>.</p>
<h3 id="create-a-storage-account">Create a storage account</h3>
<p>After registration, go to <a href="https://portal.azure.com/#home">Azure portal</a>.
Hover over the resource groups and click <code>create</code> in the window that appears.</p>
<p><img src="../../images/azure_blob_container_tutorial1.jpg" alt=""></p>
<p>Enter a name for the group and click <code>review + create</code>, check the entered data and click <code>create</code>.
After the resource group is created,
go to the <a href="https://portal.azure.com/#blade/HubsExtension/BrowseResourceGroups">resource groups page</a>
and navigate to the resource group that you created.
Click <code>create</code> for create a storage account.</p>
<p><img src="../../images/azure_blob_container_tutorial2.jpg" alt=""></p>
<ul>
<li>
<p><strong>Basics</strong></p>
<p>Enter <code>storage account name</code> (will be used in CVAT to access your container), select a <code>region</code>,
select <code>performance</code> in our case will be <code>standard</code> enough, select <code>redundancy</code> enough <code>LRS</code>
<a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy">more about redundancy</a>.
Click <code>next</code> to go to the advanced section.</p>
<p><img src="../../images/azure_blob_container_tutorial4.jpg" alt=""></p>
</li>
<li>
<p><strong>Advanced</strong></p>
<p>In the advanced section, you can change public access by disabling <code>enable blob public access</code>
to deny anonymous access to the container.
If you want to change public access you can find this switch in the <code>configuration</code> section of your storage account.</p>
<p>After that, go to the review section, check the entered data and click <code>create</code>.</p>
<p><img src="../../images/azure_blob_container_tutorial5.jpg" alt=""></p>
</li>
</ul>
<p>You will be reached to the deployment page after the finished,
navigate to the resource by clicking on <code>go to resource</code>.</p>
<p><img src="../../images/azure_blob_container_tutorial6.jpg" alt=""></p>
<h3 id="create-a-container">Create a container</h3>
<p>Go to the containers section and create a new container. Enter the <code>name</code> of the container
(will be used in CVAT to access your container) and select <code>container</code> in <code>public access level</code>.</p>
<p><img src="../../images/azure_blob_container_tutorial7.jpg" alt=""></p>
<h3 id="sas-token">SAS token</h3>
<p>Using the <code>SAS token</code>, you can securely transfer access to the container to other people by preconfiguring rights,
as well as the date/time of the starting and expiration of the token.
To generate a SAS token, go to <code>Shared access signature</code> section of your storage account.
Here you should enable <code>Blob</code> in the <code>Allowed services</code>, <code>Container</code> and <code>Object</code> in the <code>Allowed resource types</code>,
<code>Read</code> and <code>List</code> in the <code>Allowed permissions</code>, <code>HTTPS and HTTP</code> in the <code>Allowed protocols</code>,
also here you can set the date/time of the starting and expiration for the token. Click <code>Generation SAS token</code>.
and copy <code>SAS token</code> (will be used in CVAT to access your container).</p>
<p><img src="../../images/azure_blob_container_tutorial3.jpg" alt=""></p>
<p>For personal use, you can enter the <code>Access Key</code> from the your storage account in the <code>SAS Token</code> field,
<code>access key</code> can be found in the <code>security + networking</code> section.
Click <code>show keys</code> to show the key.</p>
<p><img src="../../images/azure_blob_container_tutorial8.jpg" alt=""></p>
<h3 id="upload-dataset-1">Upload dataset</h3>
<p>Prepare the dataset as in the point <a href="#prepare-dataset">prepare dataset</a>.</p>
<ul>
<li>
<p>When the dataset is ready, go to your container and click <code>upload</code>.</p>
</li>
<li>
<p>Click <code>select a files</code> and select all images from the images folder
in the <code>upload to folder</code> item write the name of the folder in which you want to upload images in this case &ldquo;images&rdquo;.</p>
<p><img src="../../images/azure_blob_container_tutorial9.jpg" alt=""></p>
</li>
<li>
<p>Click <code>upload</code>, when the images are loaded you will need to upload a manifest file. When loading a manifest, you
need to make sure that the relative paths specified in the manifest file match the paths
to the files in the container. Click <code>select a file</code> and select manifest file, in order to upload file to the root
of the container leave blank <code>upload to folder</code> field.</p>
</li>
</ul>
<p>Now you can attach new cloud storage into CVAT.</p>
<h2 id="attach-new-cloud-storage">Attach new cloud storage</h2>
<p>After you upload the dataset and manifest file to AWS-S3 or Azure Blob Container
you will be able to attach a cloud storage. To do this, press the <code>Attach new cloud storage</code>
button on the <code>Cloud storages</code> page and fill out the following form:</p>
<p><img src="../../images/image228.jpg" alt=""></p>
<ul>
<li>
<p><code>Display name</code> - the display name of the cloud storage.</p>
</li>
<li>
<p><code>Description</code> (optional) - description of the cloud storage, appears when you click on the <code>?</code> button
of an item on cloud storages page.</p>
</li>
<li>
<p><code>Provider</code> - choose provider of the cloud storage:</p>
<ul>
<li>
<p><a href="#using-aws-s3">AWS-S3</a>:</p>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket"><code>Bucket</code></a> - cloud storage bucket name.</p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-best-practices.html"><code>Authorization type</code></a>:</p>
<ul>
<li>
<p><code>Key id and secret access key pair</code> - available on <a href="https://console.aws.amazon.com/iamv2/home?#/users">IAM</a>
to obtain an access key and a secret key, create a user using IAM and grant the appropriate rights <a href="#create-user-and-configure-permissions">learn more</a>.</p>
<ul>
<li><code>ACCESS KEY ID</code></li>
<li><code>SECRET ACCESS KEY ID</code></li>
</ul>
</li>
<li>
<p><code>Anonymous access</code> - For anonymous access, you need to enable public access to bucket.</p>
</li>
</ul>
</li>
<li>
<p><code>Region</code> - here you can choose a region from the list or add a new one. To get more information click
on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions"><code>?</code></a>.</p>
</li>
</ul>
</br>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/">Azure Blob Container</a>:</p>
<ul>
<li>
<p><code>Container name</code> - name of the cloud storage container.</p>
<ul>
<li>
<p><code>Authorization type</code>:</p>
<ul>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/translator/document-translation/create-sas-tokens?tabs=blobs"><code>Account name and SAS token</code></a>:</p>
<ul>
<li><code>Account name</code> - storage account name.</li>
<li><code>SAS token</code> - is located in the <code>Shared access signature</code> section of your <code>Storage account</code> <a href="#sas-token">learn more</a>.</li>
</ul>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/anonymous-read-access-configure?tabs=portal"><code>Anonymous access</code></a> -
for anonymous access <code>enable blob public access</code> in the <code>configuration</code> section of your storage account.
in this case, you only need the storage account name to gain anonymous access.</p>
<ul>
<li><code>Account name</code> - storage account name.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</br>
</li>
</ul>
</li>
<li>
<p><code>Manifest</code> - the path to the manifest file on your cloud storage.
You can add multiple file manifests using the <code>Add manifest</code> button.
For more information click on <a href="../../docs/manual/advanced/dataset_manifest/"><code>?</code></a>.</p>
</li>
</ul>
<p>To publish the cloud storage, click <code>submit</code>, after which it will be available on
the <a href="../../docs/manual/basics/cloud-storages/">Cloud storages page</a>.</p>
<h2 id="using-aws-data-exchange">Using AWS Data Exchange</h2>
<h3 id="subscribe-to-data-set">Subscribe to data set</h3>
<p>You can use AWS Data Exchange to add image datasets.
For example, consider adding a set of datasets <code>500 Image &amp; Metadata Free Sample</code>.
Go to <a href="https://console.aws.amazon.com/dataexchange">browse catalog</a> and use the search to find
<code>500 Image &amp; Metadata Free Sample</code>, open the dataset page and click <code>continue to subscribe</code>,
you will be taken to the page complete subscription request, read the information provided
and click send subscription request to provider.</p>
<p><img src="../../images/aws-s3_tutorial_6.jpg" alt=""></p>
<h3 id="export-to-bucket">Export to bucket</h3>
<p>After that, this dataset will appear in the
<a href="https://console.aws.amazon.com/dataexchange/home/subscriptions#/subscriptions">list subscriptions</a>.
Now you need to export the dataset to <code>Amazon S3</code>.
First, let&rsquo;s create a new one bucket similar to <a href="#create-a-bucket">described above</a>.
To export one of the datasets to a new bucket open it <code>entitled data</code> select one of the datasets,
select the corresponding revision and click export to Amazon S3
(please note that if bucket and dataset are located in different regions, export fees may apply).
In the window that appears, select the created bucket and click export.</p>
<p><img src="../../images/aws-s3_tutorial_7.jpg" alt=""></p>
<h3 id="prepare-manifest-file">Prepare manifest file</h3>
<p>Now you need to prepare a manifest file. I used <a href="https://aws.amazon.com/cli/">AWS cli</a> and
<a href="https://github.com/openvinotoolkit/cvat/tree/develop/utils/dataset_manifest">script for prepare manifest file</a>.
Perform the installation using the manual <a href="https://github.com/awslabs/aws-shell">aws-shell</a>,
I used <code>aws-cli 1.20.49</code> <code>Python 3.7.9</code> <code>Windows 10</code>.
You can configure credentials by running <code>aws configure</code>.
You will need to enter <code>Access Key ID</code> and <code>Secret Access Key</code> as well as region.</p>
<pre><code>aws configure
Access Key ID: &lt;your Access Key ID&gt;
Secret Access Key: &lt;your Secret Access Key&gt;
</code></pre><p>Copy the content of the bucket to a folder on your computer:</p>
<pre><code>aws s3 cp &lt;s3://bucket-name&gt; &lt;yourfolder&gt; --recursive
</code></pre><p>After copying the files, you can create a manifest file as described in <a href="../../docs/manual/advanced/dataset_manifest/">preapair manifest file section</a>:</p>
<pre><code>python &lt;cvat repository&gt;/utils/dataset_manifest/create.py --output-dir &lt;yourfolder&gt; &lt;yourfolder&gt;
</code></pre><p>When the manifest file is ready, you can upload it to aws s3 bucket. If you gave full write permissions
when you created the user, run:</p>
<pre><code>aws s3 cp &lt;yourfolder&gt;/manifest.jsonl &lt;s3://bucket-name&gt;
</code></pre><p>If you have given read-only permissions, use the download through the browser, click upload,
drag the manifest file to the page and click upload.</p>
<p><img src="../../images/aws-s3_tutorial_5.jpg" alt=""></p>
<p>Now you can <a href="#attach-new-cloud-storage">attach new cloud storage</a> using the dataset <code>500 Image &amp; Metadata Free Sample</code>.</p>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-efbc0d92c419283ee8525c147b11fb71">2.2 - Advanced</h1>
    <div class="lead">This section contains advanced documents for CVAT users</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-789f9715966b149b8f1811e593d89fcd">2.2.1 - Projects</h1>
    <div class="lead">Creating and exporting projects in CVAT.</div>
	<h3 id="create-project">Create project</h3>
<p>At CVAT, you can create a project containing tasks of the same type.
All tasks related to the project will inherit a list of labels.</p>
<p>To create a project, go to the projects section by clicking on the <code>Projects</code> item in the top menu. 
On the projects page, you can see a list of projects, use a search, or create a new project by clicking <code>Create New Project</code>.</p>
<p><img src="../../images/image190.jpg" alt=""></p>
<p>You can change: the name of the project, the list of labels
(which will be used for tasks created as parts of this project) and a link to the issue.</p>
<p><img src="../../images/image191.jpg" alt=""></p>
<p>Once created, the project will appear on the projects page. To open a project, just click on it.</p>
<p><img src="../../images/image192_mapillary_vistas.jpg" alt=""></p>
<p>Here you can do the following:</p>
<ol>
<li>Change the project&rsquo;s title.</li>
<li>Open the <code>Actions</code> menu.</li>
<li>Change issue tracker or open issue tracker if it is specified.</li>
<li>Change labels.
You can add new labels or add attributes for the existing labels in the Raw mode or the Constructor mode. 
You can also change the color for different labels. By clicking <code>Copy</code> you can copy the labels to the clipboard.</li>
<li>Assigned to — is used to assign a project to a person.
 Start typing an assignee&rsquo;s name and/or choose the right person out of the dropdown list.</li>
<li><code>Tasks</code> — is a list of all tasks for a particular project.</li>
</ol>
<p>It is possible to choose a subset for tasks in the project. You can use the available options
(<code>Train</code>, <code>Test</code>, <code>Validation</code>) or set your own.</p>
<p>You can remove the project and all related tasks through the Action menu.</p>
<h3 id="export-project">Export project</h3>
<p>It is possible to download an entire project instead of exporting individual tasks. In this case,
annotations for all tasks in a project will be available in a single archive.
To export a project, do the following on the <code>Project</code> page:</p>
<ul>
<li>Open the <code>Actions</code> menu.</li>
<li>Press the <code>Export project dataset</code> button.</li>
</ul>
<p>Additional information about exporting tasks can be found in the
<a href="../../docs/manual/advanced/downloading-annotations/">Downloading annotations</a> section.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-721c6749c3e22c1edc40499266d46267">2.2.2 - Search</h1>
    <div class="lead">Overview of available search options.</div>
	<p>There are several options how to use the search.</p>
<ul>
<li>Search within all fields (owner, assignee, task name, task status, task mode).
To execute enter a search string in search field.</li>
<li>Search for specific fields. How to perform:
<ul>
<li><code>owner: admin</code> - all tasks created by the user who has the substring &ldquo;admin&rdquo; in his name</li>
<li><code>assignee: employee</code> - all tasks which are assigned to a user who has the substring &ldquo;employee&rdquo; in his name</li>
<li><code>name: training</code> - all tasks with the substring &ldquo;training&rdquo; in their names</li>
<li><code>mode: annotation</code> or <code>mode: interpolation</code> - all tasks with images or videos.</li>
<li><code>status: annotation</code> or <code>status: validation</code> or <code>status: completed</code> - search by status</li>
<li><code>id: 5</code> - task with id = 5.</li>
</ul>
</li>
<li>Multiple filters. Filters can be combined (except for the identifier) ​​using the keyword <code> AND</code>:
<ul>
<li><code>mode: interpolation AND owner: admin</code></li>
<li><code>mode: annotation and status: annotation</code></li>
</ul>
</li>
</ul>
<p>The search is case insensitive.</p>
<p><img src="../../images/image100_detrac.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e2b99661441784c00f94d2aa1a169963">2.2.3 - Shape mode (advanced)</h1>
    <div class="lead">Advanced operations available during annotation in shape mode.</div>
	<p>Basic operations in the mode were described in section <a href="../../docs/manual/basics/shape-mode-basics/">shape mode (basics)</a>.</p>
<p><strong>Occluded</strong>
Occlusion is an attribute used if an object is occluded by another object or
isn&rsquo;t fully visible on the frame. Use <code>Q</code> shortcut to set the property
quickly.</p>
<p><img src="../../images/image065.jpg" alt=""></p>
<p>Example: the three cars on the figure below should be labeled as <strong>occluded</strong>.</p>
<p><img src="../../images/image054_mapillary_vistas.jpg" alt=""></p>
<p>If a frame contains too many objects and it is difficult to annotate them
due to many shapes placed mostly in the same place, it makes sense
to lock them. Shapes for locked objects are transparent, and it is easy to
annotate new objects. Besides, you can&rsquo;t change previously annotated objects
by accident. Shortcut: <code>L</code>.</p>
<p><img src="../../images/image066.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-588e4c6ed67ac064499157f92893ddc2">2.2.4 - Track mode (advanced)</h1>
    <div class="lead">Advanced operations available during annotation in track mode.</div>
	<p>Basic operations in the mode were described in section <a href="../../docs/manual/basics/track-mode-basics/">track mode (basics)</a>.</p>
<p>Shapes that were created in the track mode, have extra navigation buttons.</p>
<ul>
<li>
<p>These buttons help to jump to the previous/next keyframe.</p>
<p><img src="../../images/image056.jpg" alt=""></p>
</li>
<li>
<p>The button helps to jump to the initial frame and to the last keyframe.</p>
<p><img src="../../images/image057.jpg" alt=""></p>
</li>
</ul>
<p>You can use the <code>Split</code> function to split one track into two tracks:</p>
<p><img src="../../images/gif010_detrac.gif" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d340565087e0f9cbfaf6ccd6219466d5">2.2.5 - 3D Object annotation (advanced)</h1>
    <div class="lead">Overview of advanced operations available when annotating 3D objects.</div>
	<p>As well as 2D-task objects, 3D-task objects support the ability to change appearance, attributes,
properties and have an action menu. Read more in <a href="../../docs/manual/basics/objects-sidebar/">objects sidebar</a> section.</p>
<h2 id="moving-an-object">Moving an object</h2>
<p>If you hover the cursor over a cuboid and press <code>Shift+N</code>, the cuboid will be cut,
so you can paste it in other place (double-click to paste the cuboid).</p>
<h2 id="copying">Copying</h2>
<p>As well as in 2D task you can copy and paste objects by <code>Ctrl+C</code> and <code>Ctrl+V</code>,
but unlike 2D tasks you have to place a copied object in a 3D space (double click to paste).</p>
<p><img src="../../images/gif030_carla_town3.gif" alt=""></p>
<h2 id="image-of-the-projection-window">Image of the projection window</h2>
<p>You can copy or save the projection-window image by left-clicking on it and selecting a &ldquo;save image as&rdquo; or &ldquo;copy image&rdquo;.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-09ca69c0dc37771f108831f0a42fb850">2.2.6 - Attribute annotation mode (advanced)</h1>
    <div class="lead">Advanced operations available in attribute annotation mode.</div>
	<p>Basic operations in the mode were described in section <a href="../../docs/manual/basics/attribute-annotation-mode-basics/">attribute annotation mode (basics)</a>.</p>
<p>It is possible to handle lots of objects on the same frame in the mode.</p>
<p><img src="../../images/image058_detrac.jpg" alt=""></p>
<p>It is more convenient to annotate objects of the same type. In this case you can apply
the appropriate filter. For example, the following filter will
hide all objects except person: <code>label==&quot;Person&quot;</code>.</p>
<p>To navigate between objects (person in this case),
use the following buttons <code>switch between objects in the frame</code> on the special panel:</p>
<p><img src="../../images/image026.jpg" alt=""></p>
<p>or shortcuts:</p>
<ul>
<li><code>Tab</code> — go to the next object</li>
<li><code>Shift+Tab</code> — go to the previous object.</li>
</ul>
<p>In order to change the zoom level, go to settings (press <code>F3</code>)
in the workspace tab and set the value Attribute annotation mode (AAM) zoom margin in px.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d32b157b6b3a0b7c00c0dee2a7facf36">2.2.7 - Annotation with rectangle by 4 points</h1>
    
	<p>It is an efficient method of bounding box annotation, proposed
<a href="https://arxiv.org/pdf/1708.02750.pdf">here</a>.
Before starting, you need to make sure that the drawing method by 4 points is selected.</p>
<p><img src="../../images/image134.jpg" alt=""></p>
<p>Press <code>Shape</code> or <code>Track</code> for entering drawing mode. Click on four extreme points:
the top, bottom, left- and right-most physical points on the object.
Drawing will be automatically completed right after clicking the fourth point.
Press <code>Esc</code> to cancel editing.</p>
<p><img src="../../images/gif016_mapillary_vistas.gif" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cec0435c8a22adeb069ae65e703e55b4">2.2.8 - Annotation with points</h1>
    <div class="lead">Guide to annotating tasks using single points or shapes containing multiple points.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-73dd0aab0c51b42d098e1dd25f9e34d8">2.2.8.1 - Points in shape mode</h1>
    
	<p>It is used for face, landmarks annotation etc.</p>
<p>Before you start you need to select the <code>Points</code>. If necessary you can set a fixed number of points
in the <code>Number of points</code> field, then drawing will be stopped automatically.</p>
<p><img src="../../images/image042.jpg" alt=""></p>
<p>Click <code>Shape</code> to entering the drawing mode. Now you can start annotation of the necessary area.
Points are automatically grouped — all points will be considered linked between each start and finish.
Press <code>N</code> again or click the <code>Done</code> button on the top panel to finish marking the area.
You can delete a point by clicking with pressed <code>Ctrl</code> or right-clicking on a point and selecting <code>Delete point</code>.
Clicking with pressed <code>Shift</code> will open the points shape editor.
There you can add new points into an existing shape. You can zoom in/out (when scrolling the mouse wheel)
and move (when clicking the mouse wheel and moving the mouse) while drawing. You can drag an object after
it has been drawn and change the position of individual points after finishing an object.</p>
<p><img src="../../images/image063_affectnet.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-926b5bce12f08790d7354dc3d2253131">2.2.8.2 - Linear interpolation with one point</h1>
    
	<p>You can use linear interpolation for points to annotate a moving object:</p>
<ol>
<li>
<p>Before you start, select the <code>Points</code>.</p>
</li>
<li>
<p>Linear interpolation works only with one point, so you need to set <code>Number of points</code> to 1.</p>
</li>
<li>
<p>After that select the <code>Track</code>.</p>
<p><img src="../../images/image122.jpg" alt=""></p>
</li>
<li>
<p>Click <code>Track</code> to enter the drawing mode left-click to create a point
and after that shape will be automatically completed.</p>
<p><img src="../../images/image163_detrac.jpg" alt=""></p>
</li>
<li>
<p>Move forward a few frames and move the point to the desired position,
this way you will create a keyframe and intermediate frames will be drawn automatically.
You can work with this object as with an interpolated track: you can hide it using the <code>Outside</code>,
move around keyframes, etc.</p>
<p><img src="../../images/image165_detrac.jpg" alt=""></p>
</li>
<li>
<p>This way you&rsquo;ll get linear interpolation using the <code> Points</code>.</p>
<p><img src="../../images/gif013_detrac.gif" alt=""></p>
</li>
</ol>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6b3f1429846a7f18d172169ce5fe900b">2.2.9 - Annotation with polylines</h1>
    <div class="lead">Guide to annotating tasks using polylines.</div>
	<p>It is used for road markup annotation etc.</p>
<p>Before starting, you need to select the <code>Polyline</code>. You can set a fixed number of points
in the <code>Number of points</code> field, then drawing will be stopped automatically.</p>
<p><img src="../../images/image085.jpg" alt=""></p>
<p>Click <code>Shape</code> to enter drawing mode. There are two ways to draw a polyline —
you either create points by clicking or by dragging a mouse on the screen while holding <code>Shift</code>.
When <code>Shift</code> isn&rsquo;t pressed, you can zoom in/out (when scrolling the mouse wheel)
and move (when clicking the mouse wheel and moving the mouse), you can delete
previous points by right-clicking on it.
Press <code>N</code> again or click the <code>Done</code> button on the top panel to complete the shape.
You can delete a point by clicking on it with pressed <code>Ctrl</code> or right-clicking on a point
and selecting <code>Delete point</code>. Click with pressed <code>Shift</code> will open a polyline editor.
There you can create new points(by clicking or dragging) or delete part of a polygon closing
the red line on another point. Press <code>Esc</code> to cancel editing.</p>
<p><img src="../../images/image039_mapillary_vistas.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c5fa63295c9b67cd2ae59ac351ccb7f6">2.2.10 - Annotation with polygons</h1>
    <div class="lead">Guide to creating and editing polygons.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-4d4bf5bacfbd5eb9dcef94a38c91930f">2.2.10.1 - Manual drawing</h1>
    
	<p>It is used for semantic / instance segmentation.</p>
<p>Before starting, you need to select <code>Polygon</code> on the controls sidebar and choose the correct Label.</p>
<p><img src="../../images/image084.jpg" alt=""></p>
<ul>
<li>Click <code>Shape</code> to enter drawing mode.
There are two ways to draw a polygon: either create points by clicking or
by dragging the mouse on the screen while holding <code>Shift</code>.</li>
</ul>
<table>
<thead>
<tr>
<th>Clicking points</th>
<th>Holding Shift+Dragging</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../images/gif005_detrac.gif" alt=""></td>
<td><img src="../../images/gif006_detrac.gif" alt=""></td>
</tr>
</tbody>
</table>
<ul>
<li>When <code>Shift</code> isn&rsquo;t pressed, you can zoom in/out (when scrolling the mouse
wheel) and move (when clicking the mouse wheel and moving the mouse), you can also
delete the previous point by right-clicking on it.</li>
<li>You can use the <code>Selected opacity</code> slider in the <code>Objects sidebar</code> to change the opacity of the polygon.
You can read more in the <a href="../../docs/manual/basics/objects-sidebar/#appearance">Objects sidebar</a> section.</li>
<li>Press <code>N</code> again or click the <code>Done</code> button on the top panel for completing the shape.</li>
<li>After creating the polygon, you can move the points or delete them by right-clicking and selecting <code>Delete point</code>
or clicking with pressed <code>Alt</code> key in the context menu.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-49a42ac9fb14c261fcb4d6df121ec6b5">2.2.10.2 - Drawing using automatic borders</h1>
    
	<p><img src="../../images/gif025_mapillary_vistas.gif" alt=""></p>
<p>You can use auto borders when drawing a polygon. Using automatic borders allows you to automatically trace
the outline of polygons existing in the annotation.</p>
<ul>
<li>
<p>To do this, go to settings -&gt; workspace tab and enable <code>Automatic Bordering</code>
or press <code>Ctrl</code> while drawing a polygon.</p>
<p><img src="../../images/image161.jpg" alt=""></p>
</li>
<li>
<p>Start drawing / editing a polygon.</p>
</li>
<li>
<p>Points of other shapes will be highlighted, which means that the polygon can be attached to them.</p>
</li>
<li>
<p>Define the part of the polygon path that you want to repeat.</p>
<p><img src="../../images/image157_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p>Click on the first point of the contour part.</p>
<p><img src="../../images/image158_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p>Then click on any point located on part of the path. The selected point will be highlighted in purple.</p>
<p><img src="../../images/image159_mapillary_vistas.jpg" alt=""></p>
</li>
<li>
<p>Click on the last point and the outline to this point will be built automatically.</p>
<p><img src="../../images/image160_mapillary_vistas.jpg" alt=""></p>
</li>
</ul>
<p>Besides, you can set a fixed number of points in the <code>Number of points</code> field, then
drawing will be stopped automatically. To enable dragging you should right-click
inside the polygon and choose <code>Switch pinned property</code>.</p>
<p>Below you can see results with opacity and black stroke:</p>
<p><img src="../../images/image064_mapillary_vistas.jpg" alt=""></p>
<p>If you need to annotate small objects, increase <code>Image Quality</code> to
<code>95</code> in <code>Create task</code> dialog for your convenience.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f59490f3517703af487d1db1d573c2cf">2.2.10.3 - Edit polygon</h1>
    
	<p>To edit a polygon you have to click on it while holding <code>Shift</code>, it will open the polygon editor.</p>
<ul>
<li>
<p>In the editor you can create new points or delete part of a polygon by closing the line on another point.</p>
</li>
<li>
<p>When <code>Intelligent polygon cropping</code> option is activated in the settings,
СVAT considers two criteria to decide which part of a polygon should be cut off during automatic editing.</p>
<ul>
<li>The first criteria is a number of cut points.</li>
<li>The second criteria is a length of a cut curve.</li>
</ul>
<p>If both criteria recommend to cut the same part, algorithm works automatically,
and if not, a user has to make the decision.
If you want to choose manually which part of a polygon should be cut off,
disable <code>Intelligent polygon cropping</code> in the settings.
In this case after closing the polygon, you can select the part of the polygon you want to leave.</p>
<p><img src="../../images/image209.jpg" alt=""></p>
</li>
<li>
<p>You can press <code>Esc</code> to cancel editing.</p>
<p><img src="../../images/gif007_mapillary_vistas.gif" alt=""></p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1f4fe1a1fe6fe79b065945412ca4d774">2.2.10.4 - Track mode with polygons</h1>
    
	<p>Polygons in the track mode allow you to mark moving objects more accurately other than using a rectangle
(<a href="../../docs/manual/basics/track-mode-basics/">Tracking mode (basic)</a>; <a href="../../docs/manual/advanced/track-mode-advanced/">Tracking mode (advanced)</a>).</p>
<ol>
<li>
<p>To create a polygon in the track mode, click the <code>Track</code> button.</p>
<p><img src="../../images/image184.jpg" alt=""></p>
</li>
<li>
<p>Create a polygon the same way as in the case of <a href="../../docs/manual/advanced/annotation-with-polygons/">Annotation with polygons</a>.
Press <code>N</code> or click the <code>Done</code> button on the top panel to complete the polygon.</p>
</li>
<li>
<p>Pay attention to the fact that the created polygon has a starting point and a direction,
these elements are important for annotation of the following frames.</p>
</li>
<li>
<p>After going a few frames forward press <code>Shift+N</code>, the old polygon will disappear and you can create a new polygon.
The new starting point should match the starting point of the previously created polygon
(in this example, the top of the left mirror). The direction must also match (in this example, clockwise).
After creating the polygon, press <code>N</code> and the intermediate frames will be interpolated automatically.</p>
<p><img src="../../images/image185_detrac.jpg" alt=""></p>
</li>
<li>
<p>If you need to change the starting point, right-click on the desired point and select <code>Set starting point</code>.
To change the direction, right-click on the desired point and select switch orientation.</p>
<p><img src="../../images/image186_detrac.jpg" alt=""></p>
</li>
</ol>
<p>There is no need to redraw the polygon every time using <code>Shift+N</code>,
instead you can simply move the points or edit a part of the polygon by pressing <code>Shift+Click</code>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c692762faa73de2bce0ebde15b8e137b">2.2.10.5 - Creating masks</h1>
    
	<h3 id="cutting-holes-in-polygons">Cutting holes in polygons</h3>
<p>Currently, CVAT does not support cutting transparent holes in polygons. However,
it is poissble to generate holes in exported instance and class masks.
To do this, one needs to define a background class in the task and draw holes
with it as additional shapes above the shapes needed to have holes:</p>
<p>The editor window:</p>
<p><img src="../../images/mask_export_example1_editor.png" alt="The editor"></p>
<p>Remember to use z-axis ordering for shapes by [-] and [+, =] keys.</p>
<p>Exported masks:</p>
<p><img src="../../images/mask_export_example1_cls_mask.png" alt="A class mask">  <img src="../../images/mask_export_example1_inst_mask.png" alt="An instance mask"></p>
<p>Notice that it is currently impossible to have a single instance number for
internal shapes (they will be merged into the largest one and then covered by
&ldquo;holes&rdquo;).</p>
<h3 id="creating-masks">Creating masks</h3>
<p>There are several formats in CVAT that can be used to export masks:</p>
<ul>
<li><code>Segmentation Mask</code> (PASCAL VOC masks)</li>
<li><code>CamVid</code></li>
<li><code>MOTS</code></li>
<li><code>ICDAR</code></li>
<li><code>COCO</code> (RLE-encoded instance masks, <a href="../../docs/manual/advanced/formats/format-coco">guide</a>)</li>
<li><code>TFRecord</code> (<a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/user_manual.md">over Datumaro</a>, <a href="../../docs/manual/advanced/formats/format-tfrecord">guide</a>):</li>
<li><code>Datumaro</code></li>
</ul>
<p>An example of exported masks (in the <code>Segmentation Mask</code> format):</p>
<p><img src="../../images/exported_cls_masks_example.png" alt="A class mask"> <img src="../../images/exported_inst_masks_example.png" alt="An instance mask"></p>
<p>Important notices:</p>
<ul>
<li>Both boxes and polygons are converted into masks</li>
<li>Grouped objects are considered as a single instance and exported as a single
mask (label and attributes are taken from the largest object in the group)</li>
</ul>
<h4 id="class-colors">Class colors</h4>
<p>All the labels have associated colors, which are used in the generated masks.
These colors can be changed in the task label properties:</p>
<p><img src="../../images/label_color_picker.jpg" alt=""></p>
<p>Label colors are also displayed in the annotation window on the right panel,
where you can show or hide specific labels
(only the presented labels are displayed):</p>
<p><img src="../../images/label_panel_anno_window.jpg" alt=""></p>
<p>A background class can be:</p>
<ul>
<li>A default class, which is implicitly-added, of black color (RGB 0, 0, 0)</li>
<li><code>background</code> class with any color (has a priority, name is case-insensitive)</li>
<li>Any class of black color (RGB 0, 0, 0)</li>
</ul>
<p>To change background color in generated masks (default is black),
change <code>background</code> class color to the desired one.</p>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2956283d6b6c8c0e6edfed34d5caee42">2.2.11 - Annotation with Tags</h1>
    
	<p>It is used to annotate frames, tags are not displayed in the workspace.
Before you start, open the drop-down list in the top panel and select <code>Tag annotation</code>.</p>
<p><img src="../../images/image183.jpg" alt=""></p>
<p>The objects sidebar will be replaced with a special panel for working with tags.
Here you can select a label for a tag and add it by clicking on the <code>Add tag</code> button.
You can also customize hotkeys for each label.</p>
<p><img src="../../images/image181.jpg" alt=""></p>
<p>If you need to use only one label for one frame, then enable the <code>Automatically go to the next frame</code>
checkbox, then after you add the tag the frame will automatically switch to the next.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-82dc27f17f28048728c9cc8c6032e5c7">2.2.12 - Annotation with cuboids</h1>
    <div class="lead">Guide to creating and editing cuboids.</div>
	<p>It is used to annotate 3 dimensional objects such as cars, boxes, etc&hellip;
Currently the feature supports one point perspective and has the constraint
where the vertical edges are exactly parallel to the sides.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-7b24a39d3199ad1d17cd5b25b2ccd305">2.2.12.1 - Creating the cuboid</h1>
    
	<p>Before you start, you have to make sure that Cuboid is selected
and choose a drawing method ”from rectangle” or “by 4 points”.</p>
<p><img src="../../images/image091.jpg" alt=""></p>
<h4 id="drawing-cuboid-by-4-points">Drawing cuboid by 4 points</h4>
<p>Choose a drawing method “by 4 points” and click Shape to enter the drawing mode. There are many ways to draw a cuboid.
You can draw the cuboid by placing 4 points, after that the drawing will be completed automatically.
The first 3 points determine the plane of the cuboid while the last point determines the depth of that plane.
For the first 3 points, it is recommended to only draw the 2 closest side faces, as well as the top and bottom face.</p>
<p>A few examples:</p>
<p><img src="../../images/image177_mapillary_vistas.jpg" alt=""></p>
<h3 id="drawing-cuboid-from-rectangle">Drawing cuboid from rectangle</h3>
<p>Choose a drawing method “from rectangle” and click Shape to enter the drawing mode.
When you draw using the rectangle method, you must select the frontal plane of the object using the bounding box.
The depth and perspective of the resulting cuboid can be edited.</p>
<p>Example:</p>
<p><img src="../../images/image182_mapillary_vistas.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-03837b9c8c03b964e151f921b8c66118">2.2.12.2 - Editing the cuboid</h1>
    
	<p><img src="../../images/image178_mapillary_vistas.jpg" alt=""></p>
<p>The cuboid can be edited in multiple ways: by dragging points, by dragging certain faces or by dragging planes.
First notice that there is a face that is painted with gray lines only, let us call it the front face.</p>
<p>You can move the cuboid by simply dragging the shape behind the front face.
The cuboid can be extended by dragging on the point in the middle of the edges.
The cuboid can also be extended up and down by dragging the point at the vertices.</p>
<p><img src="../../images/gif017_mapillary_vistas.gif" alt=""></p>
<p>To draw with perspective effects it should be assumed that the front face is the closest to the camera.
To begin simply drag the points on the vertices that are not on the gray/front face while holding <code>Shift</code>.
The cuboid can then be edited as usual.</p>
<p><img src="../../images/gif018_mapillary_vistas.gif" alt=""></p>
<p>If you wish to reset perspective effects, you may right click on the cuboid,
and select <code>Reset perspective</code> to return to a regular cuboid.</p>
<p><img src="../../images/image180_mapillary_vistas.jpg" alt=""></p>
<p>The location of the gray face can be swapped with the adjacent visible side face.
You can do it by right clicking on the cuboid and selecting <code>Switch perspective orientation</code>.
Note that this will also reset the perspective effects.</p>
<p><img src="../../images/image179_mapillary_vistas.jpg" alt=""></p>
<p>Certain faces of the cuboid can also be edited,
these faces are: the left, right and dorsal faces, relative to the gray face.
Simply drag the faces to move them independently from the rest of the cuboid.</p>
<p><img src="../../images/gif020_mapillary_vistas.gif" alt=""></p>
<p>You can also use cuboids in track mode, similar to rectangles in track mode (<a href="../../docs/manual/basics/track-mode-basics/">basics</a> and <a href="../../docs/manual/advanced/track-mode-advanced/">advanced</a>) or <a href="../../docs/manual/advanced/annotation-with-polygons/track-mode-with-polygons/">Track mode with polygons</a></p>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3faa555d05f5bd038991ddb04ce3064f">2.2.13 - Models</h1>
    
	<p>To deploy the models, you will need to install the necessary components using
<a href="../../docs/administration/advanced/installation_automatic_annotation/">Semi-automatic and Automatic Annotation guide</a>.
To learn how to deploy the model, read <a href="../../docs/manual/advanced/serverless-tutorial/">Serverless tutorial</a>.</p>
<p>The Models page contains a list of deep learning (DL) models deployed for semi-automatic and automatic annotation.
To open the Models page, click the Models button on the navigation bar.
The list of models is presented in the form of a table. The parameters indicated for each model are the following:</p>
<ul>
<li><code>Framework</code> the model is based on</li>
<li>model <code>Name</code></li>
<li>model <code>Type</code>:
<ul>
<li><code>detector</code> - used for automatic annotation (available in <a href="../../docs/manual/advanced/ai-tools/#detectors">detectors</a>
and <a href="../../docs/manual/advanced/automatic-annotation/">automatic annotation</a>)</li>
<li><code>interactor</code> - used for semi-automatic shape annotation (available in <a href="../../docs/manual/advanced/ai-tools/#interactors">interactors</a>)</li>
<li><code>tracker</code> - used for semi-automatic track annotation (available in <a href="../../docs/manual/advanced/ai-tools/#trackers">trackers</a>)</li>
<li><code>reid</code> - used to combine individual objects into a track (available in <a href="../../docs/manual/advanced/automatic-annotation/">automatic annotation</a>)</li>
</ul>
</li>
<li><code>Description</code> - brief description of the model</li>
<li><code>Labels</code> - list of the supported labels (only for the models of the <code>detectors</code> type)</li>
</ul>
<p><img src="../../images/image099.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-46b81ede25cce0506f702375bc768345">2.2.14 - AI Tools</h1>
    <div class="lead">Overview of semi-automatic and automatic annotation tools available in CVAT.</div>
	<p>The tool is designed for semi-automatic and automatic annotation using DL models.
The tool is available only if there is a corresponding model.
For more details about DL models read the <a href="../../docs/manual/advanced/models/">Models</a> section.</p>
<h2 id="interactors">Interactors</h2>
<p>Interactors are used to create a polygon semi-automatically.
Supported DL models are not bound to the label and can be used for any objects.
To create a polygon usually you need to use regular or positive points.
For some kinds of segmentation negative points are available.
Positive points are the points related to the object.
Negative points should be placed outside the boundary of the object.
In most cases specifying positive points alone is enough to build a polygon.
A list of available out-of-the-box interactors is placed below.</p>
<ul>
<li>
<p>Before you start, select the <code>magic wand</code> on the controls sidebar and go to the <code>Interactors</code> tab.
Then select a label for the polygon and a required DL model. To view help about each of the
models, you can click the <code>Question mark</code> icon.</p>
<p><img src="../../images/image114_detrac.jpg" alt=""></p>
</li>
<li>
<p>Click <code>Interact</code> to enter the interaction mode. Depending on the selected model,
the method of markup will also differ.
Now you can place positive and/or negative points. The <a href="#inside-outside-guidance">IOG</a> model also uses a rectangle.
Left click creates a positive point and right click creates a negative point.
After placing the required number of points (the number is different depending on the model),
the request will be sent to the server and when the process is complete a polygon will be created.
If you are not satisfied with the result, you can set additional points or remove points.
To delete a point, hover over the point you want to delete, if the point can be deleted,
it will enlarge and the cursor will turn into a cross, then left-click on the point.
If you want to postpone the request and create a few more points, hold down <code>Ctrl</code> and continue (the <code>Block</code>
button on the top panel will turn blue), the request will be sent after the key is released.</p>
<p><img src="../../images/image188_detrac.jpg" alt=""></p>
</li>
<li>
<p>In the process of drawing, you can select the number of points in the polygon using the switch.</p>
<p><img src="../../images/image224.jpg" alt=""></p>
</li>
<li>
<p>You can use the <code>Selected opacity</code> slider in the <code>Objects sidebar</code> to change the opacity of the polygon.
You can read more in the <a href="../../docs/manual/basics/objects-sidebar/#appearance">Objects sidebar</a> section.</p>
</li>
<li>
<p>To finish interaction, click on the <code>Done</code> button on the top panel or press <code>N</code> on your keyboard.</p>
</li>
<li>
<p>When the object is finished, you can edit it like a polygon.
You can read about editing polygons in the <a href="../../docs/manual/advanced/annotation-with-polygons/">Annotation with polygons</a> section.</p>
</li>
</ul>
<h3 id="deep-extreme-cut-dextr">Deep extreme cut (DEXTR)</h3>
<p>This is an optimized version of the original model, introduced at the end of 2017.
It uses the information about extreme points of an object to get its mask. The mask then converted to a polygon.
For now this is the fastest interactor on CPU.</p>
<p><img src="../../images/dextr_example.gif" alt=""></p>
<h3 id="feature-backpropagating-refinement-scheme-f-brs">Feature backpropagating refinement scheme (f-BRS)</h3>
<p>The model allows to get a mask for an object using positive points
(should be left-clicked on the foreground), and negative points
(should be right-clicked on the background, if necessary).
It is recommended to run the model on GPU, if possible.</p>
<p><img src="../../images/fbrs_example.gif" alt=""></p>
<h3 id="high-resolution-net-hrnet">High Resolution Net (HRNet)</h3>
<p>The model allows to get a mask for an object using positive points
(should be left-clicked on the foreground), and negative points
(should be right-clicked on the background, if necessary).
It is recommended to run the model on GPU, if possible.</p>
<p><img src="../../images/hrnet_example.gif" alt=""></p>
<h3 id="inside-outside-guidance">Inside-Outside-Guidance</h3>
<p>The model uses a bounding box and inside/outside points to create a mask.
First of all, you need to create a bounding box, wrapping the object.
Then you need to use positive and negative points to say the model where is a foreground,
and where is a background. Negative points are optional.</p>
<p><img src="../../images/iog_example.gif" alt=""></p>
<h2 id="detectors">Detectors</h2>
<p>Detectors are used to automatically annotate one frame. Supported DL models are suitable only for certain labels.</p>
<ul>
<li>
<p>Before you start, click the <code>magic wand</code> on the controls sidebar and select the <code>Detectors</code> tab.
You need to match the labels of the DL model (left column) with the labels in your task (right column).
Then click <code>Annotate</code>.</p>
<p><img src="../../images/image187.jpg" alt=""></p>
</li>
<li>
<p>This action will automatically annotates one frame.
In the <a href="../../docs/manual/advanced/automatic-annotation/">Automatic annotation</a> section you can read
how to make automatic annotation of all frames.</p>
</li>
</ul>
<h3 id="mask-rcnn">Mask RCNN</h3>
<p>The model generates polygons for each instance of an object in the image.</p>
<h3 id="faster-rcnn">Faster RCNN</h3>
<p>The model generates bounding boxes for each instance of an object in the image. In this model,
RPN and Fast R-CNN are combined into a single network.</p>
<h2 id="trackers">Trackers</h2>
<p>Trackers are used to automatically annotate an object using bounding box.
Supported DL models are not bound to the label and can be used for any objects.</p>
<ul>
<li>
<p>Before you start, select the <code>magic wand</code> on the controls sidebar and go to the <code>Trackers</code> tab.
Then select a <code>Label</code> and <code>Tracker</code> for the object and click <code>Track</code>. Then annotate the desired objects with the
bounding box in the first frame.</p>
<p><img src="../../images/trackers_tab.jpg" alt="Start tracking an object"></p>
</li>
<li>
<p>All annotated objects will be automatically tracked when you move to the next frame.
For tracking, use <code>Next</code> button on the top panel or the <code>F</code> button to move on to the next frame.</p>
<p><img src="../../images/tracker_siammask_DETRAC.gif" alt="Annotation using a tracker"></p>
</li>
<li>
<p>You can enable/disable tracking using <code>tracker switcher</code> on sidebar.</p>
<p><img src="../../images/tracker_switcher.jpg" alt="Tracker switcher"></p>
</li>
<li>
<p>Trackable objects have indication on canvas with a model indication.</p>
<p><img src="../../images/tracker_indication.jpg" alt="Tracker indication"></p>
</li>
<li>
<p>You can monitoring the process by the messages appearing at the top.
If you change one or more objects, before moving to the next frame, you will see a message that
the objects states initialization is taking place. The objects that you do not change are already on the server
and therefore do not require initialization. After the objects are initialized, tracking will occur.</p>
<p><img src="../../images/tracker_pop-up_window.jpg" alt="Tracker pop-up window"></p>
</li>
</ul>
<h3 id="siammask">SiamMask</h3>
<p>Fast online Object Tracking and Segmentation. Tracker is able to track different objects in one server request.
Trackable object will be tracked automatically if the previous frame was
a latest keyframe for the object. Have tracker indication on canvas. <code>SiamMask</code> tracker supported CUDA.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-683724c7b8abed898db7cc3fb2305178">2.2.15 - OpenCV tools</h1>
    <div class="lead">Guide to using Computer Vision algorithms during annotation.</div>
	<p>The tool based on <a href="https://opencv.org/">Open CV</a> Computer Vision library
which is an open-source product that includes many CV algorithms.
Some of these algorithms can be used to simplify the annotation process.</p>
<p>First step to work with OpenCV is to load it into CVAT. Click on the toolbar icon, then click <code>Load OpenCV</code>.</p>
<p><img src="../../images/image198.jpg" alt=""></p>
<p>Once it is loaded, the tool&rsquo;s functionality will be available.</p>
<h3 id="intelligent-scissors">Intelligent scissors</h3>
<p>Intelligent scissors is an CV method of creating a polygon
by placing points with automatic drawing of a line between them.
The distance between the adjacent points is limited by the threshold of action,
displayed as a red square which is tied to the cursor.</p>
<ul>
<li>
<p>First, select the label and then click on the <code>intelligent scissors</code> button.</p>
<p><img src="../../images/image199.jpg" alt=""></p>
</li>
<li>
<p>Create the first point on the boundary of the allocated object.
You will see a line repeating the outline of the object.</p>
</li>
<li>
<p>Place the second point, so that the previous point is within the restrictive threshold.
After that a line repeating the object boundary will be automatically created between the points.</p>
<p><img src="../../images/image200_detrac.jpg" alt=""></p>
<p>To increase or lower the action threshold, hold <code>Ctrl</code> and scroll the mouse wheel.
Increasing action threshold will affect the performance.
During the drawing process you can remove the last point by clicking on it with the left mouse button.</p>
</li>
<li>
<p>You can also create a boundary manually (like when
<a href="../../docs/manual/advanced/annotation-with-polygons/manual-drawing/">creating a polygon</a>) by temporarily disabling
the automatic line creation. To do that, switch blocking on by pressing <code>Ctrl</code>.</p>
</li>
<li>
<p>In the process of drawing, you can select the number of points in the polygon using the switch.</p>
<p><img src="../../images/image224.jpg" alt=""></p>
</li>
<li>
<p>You can use the <code>Selected opacity</code> slider in the <code>Objects sidebar</code> to change the opacity of the polygon.
You can read more in the <a href="../../docs/manual/basics/objects-sidebar/#appearance">Objects sidebar</a> section.</p>
</li>
<li>
<p>Once all the points are placed, you can complete the creation of the object
by clicking on the <code>Done</code> button on the top panel or press <code>N</code> on your keyboard.
As a result, a polygon will be created (read more about the polygons in the <a href="../../docs/manual/advanced/annotation-with-polygons/">annotation with polygons</a>).</p>
</li>
</ul>
<h3 id="histogram-equalization">Histogram Equalization</h3>
<p>Histogram equalization is an CV method that improves contrast in an image in order to stretch out the intensity range.
This method usually increases the global contrast of images when its usable data
is represented by close contrast values.
It is useful in images with backgrounds and foregrounds that are both bright or both dark.</p>
<ul>
<li>
<p>First, select the image tab and then click on <code>histogram equalization</code> button.</p>
<p><img src="../../images/image221.jpg" alt=""></p>
</li>
<li>
<p>Then contrast of current frame will be improved.
If you change frame, it will be equalized too.
You can disable equalization by clicking <code>histogram equalization</code> button again.</p>
<p><img src="../../images/image222.jpg" alt=""></p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ea08163bba95655dc41bf95a12621935">2.2.16 - Automatic annotation</h1>
    <div class="lead">Guide to using the automatic annotation of tasks.</div>
	<p>Automatic Annotation is used for creating preliminary annotations.
To use Automatic Annotation you need a DL model. You can use primary models or models uploaded by a user.
You can find the list of available models in the <code>Models</code> section.</p>
<ol>
<li>
<p>To launch automatic annotation, you should open the dashboard and find a task which you want to annotate.
Then click the <code>Actions</code> button and choose option <code>Automatic Annotation</code> from the dropdown menu.</p>
<p><img src="../../images/image119_detrac.jpg" alt=""></p>
</li>
<li>
<p>In the dialog window select a model you need. DL models are created for specific labels, e.g.
the Crossroad model was taught using footage from cameras located above the highway and it is best to
use this model for the tasks with similar camera angles.
If it&rsquo;s necessary select the <code>Clean old annotations</code> checkbox.
Adjust the labels so that the task labels will correspond to the labels of the DL model.
For example, let’s consider a task where you have to annotate labels “car” and “person”.
You should connect the “person” label from the model to the “person” label in the task.
As for the “car” label, you should choose the most fitting label available in the model - the “vehicle” label.
The task requires to annotate cars only and choosing the “vehicle” label implies annotation of all vehicles,
in this case using auto annotation will help you complete the task faster.
Click <code>Submit</code> to begin the automatic annotation process.</p>
<p><img src="../../images/image120.jpg" alt=""></p>
</li>
<li>
<p>At runtime - you can see the percentage of completion.
You can cancel the automatic annotation by clicking on the <code>Cancel</code>button.</p>
<p><img src="../../images/image121_detrac.jpg" alt=""></p>
</li>
<li>
<p>The end result of an automatic annotation is an annotation with separate rectangles (or other shapes)</p>
<p><img src="../../images/gif014_detrac.gif" alt=""></p>
</li>
<li>
<p>You can combine separate bounding boxes into tracks using the <code>Person reidentification </code> model.
To do this, click on the automatic annotation item in the action menu again and select the model
of the <code>ReID</code> type (in this case the <code>Person reidentification</code> model).
You can set the following parameters:</p>
<ul>
<li>Model <code>Threshold</code> is a maximum cosine distance between objects’ embeddings.</li>
<li><code>Maximum distance</code> defines a maximum radius that an object can diverge between adjacent frames.</li>
</ul>
<p><img src="../../images/image133.jpg" alt=""></p>
</li>
<li>
<p>You can remove false positives and edit tracks using <code>Split</code> and <code>Merge</code> functions.</p>
<p><img src="../../images/gif015_detrac.gif" alt=""></p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fc91c0e18df3d93ca34276834080c325">2.2.17 - Export/import a task</h1>
    
	<p>In CVAT you can export and import tasks.
This can be used to backup the task on your PC or to transfer the task to another server.</p>
<h2 id="export-task">Export task</h2>
<p>To export a task, open the action menu and select <code>Export Task</code>.</p>
<p><img src="../../images/image219_mapillary_vistas.jpg" alt=""></p>
<p>As a result, you&rsquo;ll get a zip archive containing data, task specification and annotations with the following structure:</p>
<pre><code>.
├── data
│   ├── {user uploaded data}
│   ├── manifest.jsonl
├── task.json
└── annotations.json
</code></pre><p>Export task API:</p>
<ul>
<li>endpoint: <code>/api/v1/tasks/{id}?action=export​</code></li>
<li>method: <code>GET</code></li>
<li>responses: 202, 201 with zip archive payload</li>
</ul>
<h2 id="import-task">Import task</h2>
<p>To import a task from an archive, go to the tasks page, click the <code>Import Task</code> button and select the archive you need.</p>
<p><img src="../../images/image220.jpg" alt=""></p>
<p>As a result, you&rsquo;ll get a task containing data, parameters, and annotations of the previously exported task.</p>
<p>Import task API:</p>
<ul>
<li>endpoint: <code>/api/v1/tasks?action=import​</code></li>
<li>method: <code>POST</code></li>
<li>Content-Type: <code>multipart/form-data​</code></li>
<li>responses: 202, 201 with json payload</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e76f1b6644eb58347ed4421aa00ef7d7">2.2.18 - Downloading annotations</h1>
    
	<ol>
<li>
<p>To download the latest annotations, you have to save all changes first.
Сlick the <code>Save</code> button. There is a <code>Ctrl+S</code> shortcut to save annotations quickly.</p>
</li>
<li>
<p>After that, сlick the <code>Menu</code> button.</p>
</li>
<li>
<p>Press the <code>Export task dataset</code> button.</p>
<p><img src="../../images/image028.jpg" alt=""></p>
</li>
<li>
<p>Choose the format for exporting the dataset. Exporting is available in several formats:</p>
<ul>
<li><a href="../../docs/manual/advanced/xml_format/#interpolation">CVAT for video</a>
choose if the task is created in interpolation mode.</li>
<li><a href="../../docs/manual/advanced/xml_format/#annotation">CVAT for images</a>
choose if a task is created in annotation mode.</li>
</ul>
<p><img src="../../images/image029.jpg" alt="" title="Example XML format"></p>
<ul>
<li><a href="http://host.robots.ox.ac.uk/pascal/VOC/">PASCAL VOC</a></li>
<li><a href="http://host.robots.ox.ac.uk/pascal/VOC/">(VOC) Segmentation mask</a> —
archive contains class and instance masks for each frame in the png
format and a text file with the value of each color.</li>
<li><a href="https://pjreddie.com/darknet/yolo/">YOLO</a></li>
<li><a href="http://cocodataset.org/#format-data">COCO</a></li>
<li><a href="https://www.tensorflow.org/tutorials/load_data/tfrecord">TFRecord</a></li>
<li><a href="https://motchallenge.net/">MOT</a></li>
<li><a href="http://labelme.csail.mit.edu/Release3.0/">LabelMe 3.0</a></li>
<li><a href="https://github.com/openvinotoolkit/cvat/tree/develop/cvat/apps/dataset_manager/formats/datumaro">Datumaro</a></li>
<li><a href="http://www.image-net.org/">ImageNet</a></li>
<li><a href="http://mi.eng.cam.ac.uk/research/projects/VideoRec/CamVid/">CamVid</a></li>
<li><a href="http://shuoyang1213.me/WIDERFACE/">WIDER Face</a></li>
<li><a href="https://github.com/ox-vgg/vgg_face2">VGGFace2</a></li>
<li><a href="https://www.aitribune.com/dataset/2018051063">Market-1501</a></li>
<li><a href="https://rrc.cvc.uab.es/?ch=2">ICDAR13/15</a></li>
</ul>
<p>For 3D tasks, the following formats are available:</p>
<ul>
<li><a href="http://www.cvlibs.net/datasets/kitti/raw_data.php">Kitti Raw Format 1.0</a></li>
<li>Sly Point Cloud Format 1.0  - Supervisely Point Cloud dataset</li>
</ul>
</li>
<li>
<p>To download images with the dataset tick the <code>Save images</code> box</p>
</li>
<li>
<p>(Optional) To name the resulting archive, use the <code>Custom name</code> field.</p>
</li>
</ol>
<p><img src="../../images/image225.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-757ced1f18ccd12bc544bb7d55797ef7">2.2.19 - Task synchronization with a repository</h1>
    
	<ol>
<li>
<p>At the end of the annotation process, a task is synchronized by clicking
<code>Synchronize</code> on the task page. Notice: this feature
works only if a git repository was specified when the task was created.</p>
<p><img src="../../images/image106.jpg" alt=""></p>
</li>
<li>
<p>After synchronization the button <code>Sync</code> is highlighted in green. The
annotation is now in the repository in a temporary branch.</p>
<p><img src="../../images/image109.jpg" alt=""></p>
</li>
<li>
<p>The next step is to go to the repository and manually create a pull request to the main branch.</p>
</li>
<li>
<p>After confirming the PR, when the annotation is saved in the main branch, the color of the task changes to blue.</p>
<p><img src="../../images/image110.jpg" alt=""></p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f588fe2ead0d52f7dc13ab44434d9446">2.2.20 - Formats</h1>
    <div class="lead">List of annotation formats supported by CVAT.</div>
	<h4 id="cvat-supported-the-following-formats">CVAT supported the following formats:</h4>
<ul>
<li><a href="format-cvat">CVAT</a></li>
<li><a href="format-datumaro">Datumaro</a></li>
<li><a href="format-labelme">LabelMe</a></li>
<li><a href="format-mot">MOT</a></li>
<li><a href="format-mots">MOTS</a></li>
<li><a href="format-coco">COCO</a></li>
<li><a href="format-voc">PASCAL VOC and mask</a></li>
<li><a href="format-yolo">YOLO</a></li>
<li><a href="format-tfrecord">TF detection API</a></li>
<li><a href="format-imagenet">ImageNet</a></li>
<li><a href="format-camvid">CamVid</a></li>
<li><a href="format-widerface">WIDER Face</a></li>
<li><a href="format-vggface2">VGGFace2</a></li>
<li><a href="format-market1501">Market-1501</a></li>
<li><a href="format-icdar">ICDAR13/15</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-bb85520cf3910fc2c5223b25cd27fb23">2.2.20.1 - </h1>
    
	<h1 id="cvat">CVAT</h1>
<p>This is the native CVAT annotation format. It supports all CVAT annotations
features, so it can be used to make data backups.</p>
<ul>
<li>
<p>supported annotations CVAT for Images: Rectangles, Polygons, Polylines,
Points, Cuboids, Tags, Tracks</p>
</li>
<li>
<p>supported annotations CVAT for Videos: Rectangles, Polygons, Polylines,
Points, Cuboids, Tracks</p>
</li>
<li>
<p>attributes are supported</p>
</li>
<li>
<p><a href="../../docs/manual/advanced/xml_format/">Format specification</a></p>
</li>
</ul>
<h2 id="cvat-for-images-export">CVAT for images export</h2>
<p>Downloaded file: a ZIP file of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── images/
<span style="color:#000;font-weight:bold">|</span>   ├── img1.png
<span style="color:#000;font-weight:bold">|</span>   └── img2.jpg
└── annotations.xml
</code></pre></div><ul>
<li>tracks are split by frames</li>
</ul>
<h2 id="cvat-for-videos-export">CVAT for videos export</h2>
<p>Downloaded file: a ZIP file of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── images/
<span style="color:#000;font-weight:bold">|</span>   ├── frame_000000.png
<span style="color:#000;font-weight:bold">|</span>   └── frame_000001.png
└── annotations.xml
</code></pre></div><ul>
<li>shapes are exported as single-frame tracks</li>
</ul>
<h2 id="cvat-loader">CVAT loader</h2>
<p>Uploaded file: an XML file or a ZIP file of the structures above</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-56305e87b0babeca60c43bc357abdecd">2.2.20.2 - </h1>
    
	<h1 id="datumaro-format">Datumaro format</h1>
<p><a href="https://github.com/openvinotoolkit/datumaro/">Datumaro</a> is a tool, which can
help with complex dataset and annotation transformations, format conversions,
dataset statistics, merging, custom formats etc. It is used as a provider
of dataset support in CVAT, so basically, everything possible in CVAT
is possible in Datumaro too, but Datumaro can offer dataset operations.</p>
<ul>
<li>supported annotations: any 2D shapes, labels</li>
<li>supported attributes: any</li>
</ul>
<h1 id="import-annotations-in-datumaro-format">Import annotations in Datumaro format</h1>
<p>Uploaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;archive_name&gt;.zip/
└── annotations/
    ├── subset1.json <span style="color:#8f5902;font-style:italic"># fully description of classes and all dataset items</span>
    └── subset2.json <span style="color:#8f5902;font-style:italic"># fully description of classes and all dataset items</span>
</code></pre></div><p>JSON annotations files in the <code>annotations</code> directory should have similar structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;info&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
  <span style="color:#204a87;font-weight:bold">&#34;categories&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;label&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;labels&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
        <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;label_0&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;parent&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
        <span style="color:#000;font-weight:bold">},</span>
        <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;label_1&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;parent&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">],</span>
      <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[]</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#204a87;font-weight:bold">&#34;items&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;img1&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;annotations&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
        <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;polygon&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
          <span style="color:#204a87;font-weight:bold">&#34;group&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;label_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;points&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">2.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">3.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">4.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">5.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">6.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">7.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">8.0</span><span style="color:#000;font-weight:bold">],</span>
          <span style="color:#204a87;font-weight:bold">&#34;z_order&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
        <span style="color:#000;font-weight:bold">},</span>
        <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;bbox&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
          <span style="color:#204a87;font-weight:bold">&#34;group&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;label_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;z_order&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;bbox&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">2.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">3.0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">4.0</span><span style="color:#000;font-weight:bold">]</span>
        <span style="color:#000;font-weight:bold">},</span>
        <span style="color:#000;font-weight:bold">{</span>
          <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;mask&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;attributes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
          <span style="color:#204a87;font-weight:bold">&#34;group&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;label_id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;rle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">&#34;counts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;d0d0:F\\0&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;size&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">]</span>
          <span style="color:#000;font-weight:bold">},</span>
          <span style="color:#204a87;font-weight:bold">&#34;z_order&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h1 id="export-annotations-in-datumaro-format">Export annotations in Datumaro format</h1>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── annotations/
│   └── default.json <span style="color:#8f5902;font-style:italic"># fully description of classes and all dataset items</span>
└── images/ <span style="color:#8f5902;font-style:italic"># if the option `save images` was selected</span>
    └── default
        ├── image1.jpg
        ├── image2.jpg
        ├── ...
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-89565d26b6237565243f9fbdb1c69506">2.2.20.3 - </h1>
    
	<h1 id="labelmehttplabelmecsailmitedurelease30"><a href="http://labelme.csail.mit.edu/Release3.0">LabelMe</a></h1>
<h2 id="labelme-export">LabelMe export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── img1.jpg
└── img1.xml
</code></pre></div><ul>
<li>supported annotations: Rectangles, Polygons (with attributes)</li>
</ul>
<h2 id="labelme-import">LabelMe import</h2>
<p>Uploaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── Masks/
<span style="color:#000;font-weight:bold">|</span>   ├── img1_mask1.png
<span style="color:#000;font-weight:bold">|</span>   └── img1_mask2.png
├── img1.xml
├── img2.xml
└── img3.xml
</code></pre></div><ul>
<li>supported annotations: Rectangles, Polygons, Masks (as polygons)</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-684a69f071dbb7f0c74bfa7aa048bc55">2.2.20.4 - </h1>
    
	<h1 id="mot-sequencehttpsarxivorgpdf190604567pdf"><a href="https://arxiv.org/pdf/1906.04567.pdf">MOT sequence</a></h1>
<h2 id="mot-export">MOT export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── img1/
<span style="color:#000;font-weight:bold">|</span>   ├── image1.jpg
<span style="color:#000;font-weight:bold">|</span>   └── image2.jpg
└── gt/
    ├── labels.txt
    └── gt.txt

<span style="color:#8f5902;font-style:italic"># labels.txt</span>
cat
dog
person
...

<span style="color:#8f5902;font-style:italic"># gt.txt</span>
<span style="color:#8f5902;font-style:italic"># frame_id, track_id, x, y, w, h, &#34;not ignored&#34;, class_id, visibility, &lt;skipped&gt;</span>
1,1,1363,569,103,241,1,1,0.86014
...

</code></pre></div><ul>
<li>supported annotations: Rectangle shapes and tracks</li>
<li>supported attributes: <code>visibility</code> (number), <code>ignored</code> (checkbox)</li>
</ul>
<h2 id="mot-import">MOT import</h2>
<p>Uploaded file: a zip archive of the structure above or:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── labels.txt <span style="color:#8f5902;font-style:italic"># optional, mandatory for non-official labels</span>
└── gt.txt
</code></pre></div><ul>
<li>supported annotations: Rectangle tracks</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6d73c8045cca651d4c33c37c54bee1eb">2.2.20.5 - </h1>
    
	<h1 id="mots-pnghttpswwwvisionrwth-aachendepagemots"><a href="https://www.vision.rwth-aachen.de/page/mots">MOTS PNG</a></h1>
<h2 id="mots-png-export">MOTS PNG export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
└── &lt;any_subset_name&gt;/
    <span style="color:#000;font-weight:bold">|</span>   images/
    <span style="color:#000;font-weight:bold">|</span>   ├── image1.jpg
    <span style="color:#000;font-weight:bold">|</span>   └── image2.jpg
    └── instances/
        ├── labels.txt
        ├── image1.png
        └── image2.png

<span style="color:#8f5902;font-style:italic"># labels.txt</span>
cat
dog
person
...
</code></pre></div><ul>
<li>supported annotations: Rectangle and Polygon tracks</li>
</ul>
<h2 id="mots-png-import">MOTS PNG import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Polygon tracks</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-290a597e3f293c37b49f23700c1c7029">2.2.20.6 - </h1>
    
	<h1 id="ms-coco-object-detectionhttpcocodatasetorgformat-data"><a href="http://cocodataset.org/#format-data">MS COCO Object Detection</a></h1>
<ul>
<li><a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/formats/coco_user_manual.md#format-specification">Format specification</a></li>
</ul>
<h2 id="coco-export">COCO export</h2>
<p>Downloaded file: a zip archive with the structure described <a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/formats/coco_user_manual.md#load-coco-dataset">here</a></p>
<ul>
<li>supported annotations: Polygons, Rectangles</li>
<li>supported attributes:
<ul>
<li><code>is_crowd</code> (checkbox or integer with values 0 and 1) -
specifies that the instance (an object group) should have an
RLE-encoded mask in the <code>segmentation</code> field. All the grouped shapes
are merged into a single mask, the largest one defines all
the object properties</li>
<li><code>score</code> (number) - the annotation <code>score</code> field</li>
<li>arbitrary attributes - will be stored in the <code>attributes</code> annotation section</li>
</ul>
</li>
</ul>
<p>Support for COCO tasks via Datumaro is described <a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/formats/coco_user_manual.md#export-to-coco">here</a>
For example, <a href="https://github.com/openvinotoolkit/cvat/issues/2910#issuecomment-726077582">support for COCO keypoints over Datumaro</a>:</p>
<ol>
<li>Install <a href="https://github.com/openvinotoolkit/datumaro">Datumaro</a>
<code>pip install datumaro</code></li>
<li>Export the task in the <code>Datumaro</code> format, unzip</li>
<li>Export the Datumaro project in <code>coco</code> / <code>coco_person_keypoints</code> formats
<code>datum export -f coco -p path/to/project [-- --save-images]</code></li>
</ol>
<p>This way, one can export CVAT points as single keypoints or
keypoint lists (without the <code>visibility</code> COCO flag).</p>
<h2 id="coco-import">COCO import</h2>
<p>Uploaded file: a single unpacked <code>*.json</code> or a zip archive with the structure described
<a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/formats/coco_user_manual.md#load-coco-dataset">here</a>
(without images).</p>
<ul>
<li>supported annotations: Polygons, Rectangles (if the <code>segmentation</code> field is empty)</li>
</ul>
<h2 id="how-to-create-a-task-from-ms-coco-dataset">How to create a task from MS COCO dataset</h2>
<ol>
<li>
<p>Download the <a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/formats/coco_user_manual.md#load-COCO-dataset">MS COCO dataset</a>.</p>
<p>For example <code>val images</code> and <code>instances</code> annotations</p>
</li>
<li>
<p>Create a CVAT task with the following labels:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">person bicycle car motorcycle airplane bus train truck boat <span style="color:#4e9a06">&#34;traffic light&#34;</span> <span style="color:#4e9a06">&#34;fire hydrant&#34;</span> <span style="color:#4e9a06">&#34;stop sign&#34;</span> <span style="color:#4e9a06">&#34;parking meter&#34;</span> bench bird cat dog horse sheep cow elephant bear zebra giraffe backpack umbrella handbag tie suitcase frisbee skis snowboard <span style="color:#4e9a06">&#34;sports ball&#34;</span> kite <span style="color:#4e9a06">&#34;baseball bat&#34;</span> <span style="color:#4e9a06">&#34;baseball glove&#34;</span> skateboard surfboard <span style="color:#4e9a06">&#34;tennis racket&#34;</span> bottle <span style="color:#4e9a06">&#34;wine glass&#34;</span> cup fork knife spoon bowl banana apple sandwich orange broccoli carrot <span style="color:#4e9a06">&#34;hot dog&#34;</span> pizza donut cake chair couch <span style="color:#4e9a06">&#34;potted plant&#34;</span> bed <span style="color:#4e9a06">&#34;dining table&#34;</span> toilet tv laptop mouse remote keyboard <span style="color:#4e9a06">&#34;cell phone&#34;</span> microwave oven toaster sink refrigerator book clock vase scissors <span style="color:#4e9a06">&#34;teddy bear&#34;</span> <span style="color:#4e9a06">&#34;hair drier&#34;</span> toothbrush
</code></pre></div></li>
<li>
<p>Select <code>val2017.zip</code> as data
(See <a href="../../docs/manual/basics/creating_an_annotation_task/">Creating an annotation task</a>
guide for details)</p>
</li>
<li>
<p>Unpack <code>annotations_trainval2017.zip</code></p>
</li>
<li>
<p>click <code>Upload annotation</code> button,
choose <code>COCO 1.1</code> and select <code>instances_val2017.json</code>
annotation file. It can take some time.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-94f134e11587c913b9a0a9ea83f89beb">2.2.20.7 - </h1>
    
	<h1 id="pascal-vochttphostrobotsoxacukpascalvoc"><a href="http://host.robots.ox.ac.uk/pascal/VOC/">Pascal VOC</a></h1>
<ul>
<li>
<p><a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2012/devkit_doc.pdf">Format specification</a></p>
</li>
<li>
<p>supported annotations:</p>
<ul>
<li>Rectangles (detection and layout tasks)</li>
<li>Tags (action- and classification tasks)</li>
<li>Polygons (segmentation task)</li>
</ul>
</li>
<li>
<p>supported attributes:</p>
<ul>
<li><code>occluded</code> (both UI option and a separate attribute)</li>
<li><code>truncated</code> and <code>difficult</code> (should be defined for labels as <code>checkbox</code> -es)</li>
<li>action attributes (import only, should be defined as <code>checkbox</code> -es)</li>
<li>arbitrary attributes (in the <code>attributes</code> section of XML files)</li>
</ul>
</li>
</ul>
<h2 id="pascal-voc-export">Pascal VOC export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── JPEGImages/
│   ├── &lt;image_name1&gt;.jpg
│   ├── &lt;image_name2&gt;.jpg
│   └── &lt;image_nameN&gt;.jpg
├── Annotations/
│   ├── &lt;image_name1&gt;.xml
│   ├── &lt;image_name2&gt;.xml
│   └── &lt;image_nameN&gt;.xml
├── ImageSets/
│   └── Main/
│       └── default.txt
└── labelmap.txt

<span style="color:#8f5902;font-style:italic"># labelmap.txt</span>
<span style="color:#8f5902;font-style:italic"># label : color_rgb : &#39;body&#39; parts : actions</span>
background:::
aeroplane:::
bicycle:::
bird:::
</code></pre></div><h2 id="pascal-voc-import">Pascal VOC import</h2>
<p>Uploaded file: a zip archive of the structure declared above or the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── &lt;image_name1&gt;.xml
├── &lt;image_name2&gt;.xml
└── &lt;image_nameN&gt;.xml
</code></pre></div><p>It must be possible for CVAT to match the frame name and file name
from annotation <code>.xml</code> file (the <code>filename</code> tag, e. g.
<code>&lt;filename&gt;2008_004457.jpg&lt;/filename&gt;</code> ).</p>
<p>There are 2 options:</p>
<ol>
<li>
<p>full match between frame name and file name from annotation <code>.xml</code>
(in cases when task was created from images or image archive).</p>
</li>
<li>
<p>match by frame number. File name should be <code>&lt;number&gt;.jpg</code>
or <code>frame_000000.jpg</code>. It should be used when task was created from video.</p>
</li>
</ol>
<h2 id="segmentation-mask-export">Segmentation mask export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── labelmap.txt <span style="color:#8f5902;font-style:italic"># optional, required for non-VOC labels</span>
├── ImageSets/
│   └── Segmentation/
│       └── default.txt <span style="color:#8f5902;font-style:italic"># list of image names without extension</span>
├── SegmentationClass/ <span style="color:#8f5902;font-style:italic"># merged class masks</span>
│   ├── image1.png
│   └── image2.png
└── SegmentationObject/ <span style="color:#8f5902;font-style:italic"># merged instance masks</span>
    ├── image1.png
    └── image2.png

<span style="color:#8f5902;font-style:italic"># labelmap.txt</span>
<span style="color:#8f5902;font-style:italic"># label : color (RGB) : &#39;body&#39; parts : actions</span>
background:0,128,0::
aeroplane:10,10,128::
bicycle:10,128,0::
bird:0,108,128::
boat:108,0,100::
bottle:18,0,8::
bus:12,28,0::
</code></pre></div><p>Mask is a <code>png</code> image with 1 or 3 channels where each pixel
has own color which corresponds to a label.
Colors are generated following to Pascal VOC <a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2012/htmldoc/devkit_doc.html#sec:voclabelcolormap">algorithm</a>.
<code>(0, 0, 0)</code> is used for background by default.</p>
<ul>
<li>supported shapes: Rectangles, Polygons</li>
</ul>
<h2 id="segmentation-mask-import">Segmentation mask import</h2>
<p>Uploaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  taskname.zip/
  ├── labelmap.txt <span style="color:#8f5902;font-style:italic"># optional, required for non-VOC labels</span>
  ├── ImageSets/
  │   └── Segmentation/
  │       └── &lt;any_subset_name&gt;.txt
  ├── SegmentationClass/
  │   ├── image1.png
  │   └── image2.png
  └── SegmentationObject/
      ├── image1.png
      └── image2.png
</code></pre></div><p>It is also possible to import grayscale (1-channel) PNG masks.
For grayscale masks provide a list of labels with the number of lines equal
to the maximum color index on images. The lines must be in the right order
so that line index is equal to the color index. Lines can have arbitrary,
but different, colors. If there are gaps in the used color
indices in the annotations, they must be filled with arbitrary dummy labels.
Example:</p>
<pre><code>q:0,128,0:: # color index 0
aeroplane:10,10,128:: # color index 1
_dummy2:2,2,2:: # filler for color index 2
_dummy3:3,3,3:: # filler for color index 3
boat:108,0,100:: # color index 3
...
_dummy198:198,198,198:: # filler for color index 198
_dummy199:199,199,199:: # filler for color index 199
...
the last label:12,28,0:: # color index 200
</code></pre><ul>
<li>supported shapes: Polygons</li>
</ul>
<h2 id="how-to-create-a-task-from-pascal-voc-dataset">How to create a task from Pascal VOC dataset</h2>
<ol>
<li>
<p>Download the Pascal Voc dataset (Can be downloaded from the
<a href="http://host.robots.ox.ac.uk/pascal/VOC/">PASCAL VOC website</a>)</p>
</li>
<li>
<p>Create a CVAT task with the following labels:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">aeroplane bicycle bird boat bottle bus car cat chair cow diningtable
dog horse motorbike person pottedplant sheep sofa train tvmonitor
</code></pre></div><p>You can add <code>~checkbox=difficult:false ~checkbox=truncated:false</code>
attributes for each label if you want to use them.</p>
<p>Select interesting image files
(See <a href="../../docs/manual/basics/creating_an_annotation_task/">Creating an annotation task</a> guide for details)</p>
</li>
<li>
<p>zip the corresponding annotation files</p>
</li>
<li>
<p>click <code>Upload annotation</code> button, choose <code>Pascal VOC ZIP 1.1</code></p>
<p>and select the zip file with annotations from previous step.
It may take some time.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-325950f41f3ace02cd43a9a49e738e12">2.2.20.8 - </h1>
    
	<h1 id="yolohttpspjreddiecomdarknetyolo"><a href="https://pjreddie.com/darknet/yolo/">YOLO</a></h1>
<ul>
<li><a href="https://github.com/AlexeyAB/darknet#how-to-train-to-detect-your-custom-objects">Format specification</a></li>
<li>supported annotations: Rectangles</li>
</ul>
<h2 id="yolo-export">YOLO export</h2>
<p>Downloaded file: a zip archive with following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">archive.zip/
├── obj.data
├── obj.names
├── obj_&lt;subset&gt;_data
│   ├── image1.txt
│   └── image2.txt
└── train.txt <span style="color:#8f5902;font-style:italic"># list of subset image paths</span>

<span style="color:#8f5902;font-style:italic"># the only valid subsets are: train, valid</span>
<span style="color:#8f5902;font-style:italic"># train.txt and valid.txt:</span>
obj_&lt;subset&gt;_data/image1.jpg
obj_&lt;subset&gt;_data/image2.jpg

<span style="color:#8f5902;font-style:italic"># obj.data:</span>
<span style="color:#000">classes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#8f5902;font-style:italic"># optional</span>
<span style="color:#000">names</span> <span style="color:#ce5c00;font-weight:bold">=</span> obj.names
<span style="color:#000">train</span> <span style="color:#ce5c00;font-weight:bold">=</span> train.txt
<span style="color:#000">valid</span> <span style="color:#ce5c00;font-weight:bold">=</span> valid.txt <span style="color:#8f5902;font-style:italic"># optional</span>
<span style="color:#000">backup</span> <span style="color:#ce5c00;font-weight:bold">=</span> backup/ <span style="color:#8f5902;font-style:italic"># optional</span>

<span style="color:#8f5902;font-style:italic"># obj.names:</span>
cat
dog
airplane

<span style="color:#8f5902;font-style:italic"># image_name.txt:</span>
<span style="color:#8f5902;font-style:italic"># label_id - id from obj.names</span>
<span style="color:#8f5902;font-style:italic"># cx, cy - relative coordinates of the bbox center</span>
<span style="color:#8f5902;font-style:italic"># rw, rh - relative size of the bbox</span>
<span style="color:#8f5902;font-style:italic"># label_id cx cy rw rh</span>
<span style="color:#0000cf;font-weight:bold">1</span> 0.3 0.8 0.1 0.3
<span style="color:#0000cf;font-weight:bold">2</span> 0.7 0.2 0.3 0.1
</code></pre></div><p>Each annotation <code>*.txt</code> file has a name that corresponds to the name of
the image file (e. g. <code>frame_000001.txt</code> is the annotation
for the <code>frame_000001.jpg</code> image).
The <code>*.txt</code> file structure: each line describes label and bounding box
in the following format <code>label_id cx cy w h</code>.
<code>obj.names</code> contains the ordered list of label names.</p>
<h2 id="yolo-import">YOLO import</h2>
<p>Uploaded file: a zip archive of the same structure as above
It must be possible to match the CVAT frame (image name)
and annotation file name. There are 2 options:</p>
<ol>
<li>
<p>full match between image name and name of annotation <code>*.txt</code> file
(in cases when a task was created from images or archive of images).</p>
</li>
<li>
<p>match by frame number (if CVAT cannot match by name). File name
should be in the following format <code>&lt;number&gt;.jpg</code> .
It should be used when task was created from a video.</p>
</li>
</ol>
<h2 id="how-to-create-a-task-from-yolo-formatted-dataset-from-voc-for-example">How to create a task from YOLO formatted dataset (from VOC for example)</h2>
<ol>
<li>
<p>Follow the official <a href="https://pjreddie.com/darknet/yolo/">guide</a>(see Training YOLO on VOC section)
and prepare the YOLO formatted annotation files.</p>
</li>
<li>
<p>Zip train images</p>
</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">zip images.zip -j -@ &lt; train.txt
</code></pre></div><ol>
<li>
<p>Create a CVAT task with the following labels:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">aeroplane bicycle bird boat bottle bus car cat chair cow diningtable dog
horse motorbike person pottedplant sheep sofa train tvmonitor
</code></pre></div><p>Select images. zip as data. Most likely you should use <code>share</code>
functionality because size of images. zip is more than 500Mb.
See <a href="../../docs/manual/basics/creating_an_annotation_task/">Creating an annotation task</a>
guide for details.</p>
</li>
<li>
<p>Create <code>obj.names</code> with the following content:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">aeroplane
bicycle
bird
boat
bottle
bus
car
cat
chair
cow
diningtable
dog
horse
motorbike
person
pottedplant
sheep
sofa
train
tvmonitor
</code></pre></div></li>
<li>
<p>Zip all label files together (we need to add only label files that correspond to the train subset)</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat train.txt <span style="color:#000;font-weight:bold">|</span> <span style="color:#204a87;font-weight:bold">while</span> <span style="color:#204a87">read</span> p<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">${</span><span style="color:#000">p</span><span style="color:#000;font-weight:bold">%/*/*</span><span style="color:#4e9a06">}</span>/labels/<span style="color:#4e9a06">${${</span><span style="color:#000">p</span><span style="color:#000;font-weight:bold">##*/</span><span style="color:#4e9a06">}</span><span style="color:#000;font-weight:bold">%%.*</span><span style="color:#4e9a06">}</span>.txt<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span> <span style="color:#000;font-weight:bold">|</span> zip labels.zip -j -@ obj.names
</code></pre></div></li>
<li>
<p>Click <code>Upload annotation</code> button, choose <code>YOLO 1.1</code> and select the zip</p>
<p>file with labels from the previous step.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e3e1166f576647b7965c930f5091599f">2.2.20.9 - </h1>
    
	<h1 id="tfrecordhttpswwwtensorfloworgtutorialsload_datatfrecord"><a href="https://www.tensorflow.org/tutorials/load_data/tfrecord">TFRecord</a></h1>
<p>TFRecord is a very flexible format, but we try to correspond the
format that used in
<a href="https://github.com/tensorflow/models/tree/master/research/object_detection">TF object detection</a>
with minimal modifications.</p>
<p>Used feature description:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">image_feature_description</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#4e9a06">&#39;image/filename&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FixedLenFeature</span><span style="color:#000;font-weight:bold">([],</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">string</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/source_id&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FixedLenFeature</span><span style="color:#000;font-weight:bold">([],</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">string</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/height&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FixedLenFeature</span><span style="color:#000;font-weight:bold">([],</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">int64</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/width&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FixedLenFeature</span><span style="color:#000;font-weight:bold">([],</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">int64</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#8f5902;font-style:italic"># Object boxes and classes.</span>
    <span style="color:#4e9a06">&#39;image/object/bbox/xmin&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">float32</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/object/bbox/xmax&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">float32</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/object/bbox/ymin&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">float32</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/object/bbox/ymax&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">float32</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/object/class/label&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">int64</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#4e9a06">&#39;image/object/class/text&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">VarLenFeature</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">tf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">string</span><span style="color:#000;font-weight:bold">),</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h2 id="tfrecord-export">TFRecord export</h2>
<p>Downloaded file: a zip archive with following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── default.tfrecord
└── label_map.pbtxt

<span style="color:#8f5902;font-style:italic"># label_map.pbtxt</span>
item <span style="color:#ce5c00;font-weight:bold">{</span>
	id: <span style="color:#0000cf;font-weight:bold">1</span>
	name: <span style="color:#4e9a06">&#39;label_0&#39;</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
item <span style="color:#ce5c00;font-weight:bold">{</span>
	id: <span style="color:#0000cf;font-weight:bold">2</span>
	name: <span style="color:#4e9a06">&#39;label_1&#39;</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
...
</code></pre></div><ul>
<li>supported annotations: Rectangles, Polygons (as masks, manually over <a href="https://github.com/openvinotoolkit/datumaro/blob/develop/docs/user_manual.md">Datumaro</a>)</li>
</ul>
<p>How to export masks:</p>
<ol>
<li>Export annotations in <code>Datumaro</code> format</li>
<li>Apply <code>polygons_to_masks</code> and <code>boxes_to_masks</code> transforms</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">datum transform -t polygons_to_masks -p path/to/proj -o ptm
datum transform -t boxes_to_masks -p ptm -o btm
</code></pre></div><ol>
<li>Export in the <code>TF Detection API</code> format</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">datum <span style="color:#204a87">export</span> -f tf_detection_api -p btm <span style="color:#ce5c00;font-weight:bold">[</span>-- --save-images<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div><h2 id="tfrecord-import">TFRecord import</h2>
<p>Uploaded file: a zip archive of following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
└── &lt;any name&gt;.tfrecord
</code></pre></div><ul>
<li>supported annotations: Rectangles</li>
</ul>
<h2 id="how-to-create-a-task-from-tfrecord-dataset-from-voc2007-for-example">How to create a task from TFRecord dataset (from VOC2007 for example)</h2>
<ol>
<li>Create <code>label_map.pbtxt</code> file with the following content:</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;aeroplane&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;bicycle&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">3</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;bird&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">4</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;boat&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">5</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;bottle&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">6</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;bus&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">7</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;car&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">8</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;cat&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">9</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;chair&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">10</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;cow&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">11</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;diningtable&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">12</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;dog&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">13</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;horse&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">14</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;motorbike&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">15</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;person&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">16</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;pottedplant&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">17</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;sheep&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">18</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;sofa&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">19</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;train&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000">item</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">20</span>
    <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;tvmonitor&#39;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ol>
<li>Use <a href="https://github.com/tensorflow/models/blob/master/research/object_detection/dataset_tools/create_pascal_tf_record.py">create_pascal_tf_record.py</a></li>
</ol>
<p>to convert VOC2007 dataset to TFRecord format.
As example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python create_pascal_tf_record.py --data_dir &lt;path to VOCdevkit&gt; --set train --year VOC2007 --output_path pascal.tfrecord --label_map_path label_map.pbtxt
</code></pre></div><ol>
<li>
<p>Zip train images</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat &lt;path to VOCdevkit&gt;/VOC2007/ImageSets/Main/train.txt <span style="color:#000;font-weight:bold">|</span> <span style="color:#204a87;font-weight:bold">while</span> <span style="color:#204a87">read</span> p<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> <span style="color:#204a87">echo</span> &lt;path to VOCdevkit&gt;/VOC2007/JPEGImages/<span style="color:#4e9a06">${</span><span style="color:#000">p</span><span style="color:#4e9a06">}</span>.jpg  <span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span> <span style="color:#000;font-weight:bold">|</span> zip images.zip -j -@
</code></pre></div></li>
<li>
<p>Create a CVAT task with the following labels:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">aeroplane bicycle bird boat bottle bus car cat chair cow diningtable dog horse motorbike person pottedplant sheep sofa train tvmonitor
</code></pre></div><p>Select images. zip as data.
See <a href="../../docs/manual/basics/creating_an_annotation_task/">Creating an annotation task</a>
guide for details.</p>
</li>
<li>
<p>Zip <code>pascal.tfrecord</code> and <code>label_map.pbtxt</code> files together</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">zip anno.zip -j &lt;path to pascal.tfrecord&gt; &lt;path to label_map.pbtxt&gt;
</code></pre></div></li>
<li>
<p>Click <code>Upload annotation</code> button, choose <code>TFRecord 1.0</code> and select the zip file</p>
<p>with labels from the previous step. It may take some time.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-37ea47d7e7cb5ab2516a949cad325f19">2.2.20.10 - </h1>
    
	<h1 id="imagenethttpwwwimage-netorg"><a href="http://www.image-net.org">ImageNet</a></h1>
<h2 id="imagenet-export">ImageNet export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># if we save images:</span>
taskname.zip/
├── label1/
<span style="color:#000;font-weight:bold">|</span>   ├── label1_image1.jpg
<span style="color:#000;font-weight:bold">|</span>   └── label1_image2.jpg
└── label2/
    ├── label2_image1.jpg
    ├── label2_image3.jpg
    └── label2_image4.jpg

<span style="color:#8f5902;font-style:italic"># if we keep only annotation:</span>
taskname.zip/
├── &lt;any_subset_name&gt;.txt
└── synsets.txt

</code></pre></div><ul>
<li>supported annotations: Labels</li>
</ul>
<h2 id="imagenet-import">ImageNet import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Labels</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f3e3abb5b13d6f59f5100a9d8ae3645f">2.2.20.11 - </h1>
    
	<h1 id="wider-facehttpshuoyang1213mewiderface"><a href="http://shuoyang1213.me/WIDERFACE/">WIDER Face</a></h1>
<h2 id="wider-face-export">WIDER Face export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── labels.txt <span style="color:#8f5902;font-style:italic"># optional</span>
├── wider_face_split/
│   └── wider_face_&lt;any_subset_name&gt;_bbx_gt.txt
└── WIDER_&lt;any_subset_name&gt;/
    └── images/
        ├── 0--label0/
        │   └── 0_label0_image1.jpg
        └── 1--label1/
            └── 1_label1_image2.jpg
</code></pre></div><ul>
<li>supported annotations: Rectangles (with attributes), Labels</li>
<li>supported attributes:
<ul>
<li><code>blur</code>, <code>expression</code>, <code>illumination</code>, <code>pose</code>, <code>invalid</code></li>
<li><code>occluded</code> (both the annotation property &amp; an attribute)</li>
</ul>
</li>
</ul>
<h2 id="wider-face-import">WIDER Face import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Rectangles (with attributes), Labels</li>
<li>supported attributes:
<ul>
<li><code>blur</code>, <code>expression</code>, <code>illumination</code>, <code>occluded</code>, <code>pose</code>, <code>invalid</code></li>
</ul>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bdc4a2c3af1233a5e9cdef14bd683a14">2.2.20.12 - </h1>
    
	<h1 id="camvidhttpmiengcamacukresearchprojectsvideoreccamvid"><a href="http://mi.eng.cam.ac.uk/research/projects/VideoRec/CamVid/">CamVid</a></h1>
<h2 id="camvid-export">CamVid export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── labelmap.txt <span style="color:#8f5902;font-style:italic"># optional, required for non-CamVid labels</span>
├── &lt;any_subset_name&gt;/
<span style="color:#000;font-weight:bold">|</span>   ├── image1.png
<span style="color:#000;font-weight:bold">|</span>   └── image2.png
├── &lt;any_subset_name&gt;annot/
<span style="color:#000;font-weight:bold">|</span>   ├── image1.png
<span style="color:#000;font-weight:bold">|</span>   └── image2.png
└── &lt;any_subset_name&gt;.txt

<span style="color:#8f5902;font-style:italic"># labelmap.txt</span>
<span style="color:#8f5902;font-style:italic"># color (RGB) label</span>
<span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#0000cf;font-weight:bold">0</span> Void
<span style="color:#0000cf;font-weight:bold">64</span> <span style="color:#0000cf;font-weight:bold">128</span> <span style="color:#0000cf;font-weight:bold">64</span> Animal
<span style="color:#0000cf;font-weight:bold">192</span> <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#0000cf;font-weight:bold">128</span> Archway
<span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#0000cf;font-weight:bold">128</span> <span style="color:#0000cf;font-weight:bold">192</span> Bicyclist
<span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#0000cf;font-weight:bold">128</span> <span style="color:#0000cf;font-weight:bold">64</span> Bridge
</code></pre></div><p>Mask is a <code>png</code> image with 1 or 3 channels where each pixel
has own color which corresponds to a label.
<code>(0, 0, 0)</code> is used for background by default.</p>
<ul>
<li>supported annotations: Rectangles, Polygons</li>
</ul>
<h2 id="camvid-import">CamVid import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Polygons</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e5cb2753d48cd08b4ee4ff9e10696658">2.2.20.13 - </h1>
    
	<h1 id="vggface2httpsgithubcomox-vggvgg_face2"><a href="https://github.com/ox-vgg/vgg_face2">VGGFace2</a></h1>
<h2 id="vggface2-export">VGGFace2 export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── labels.txt <span style="color:#8f5902;font-style:italic"># optional</span>
├── &lt;any_subset_name&gt;/
<span style="color:#000;font-weight:bold">|</span>   ├── label0/
<span style="color:#000;font-weight:bold">|</span>   <span style="color:#000;font-weight:bold">|</span>   └── image1.jpg
<span style="color:#000;font-weight:bold">|</span>   └── label1/
<span style="color:#000;font-weight:bold">|</span>       └── image2.jpg
└── bb_landmark/
    ├── loose_bb_&lt;any_subset_name&gt;.csv
    └── loose_landmark_&lt;any_subset_name&gt;.csv
<span style="color:#8f5902;font-style:italic"># labels.txt</span>
<span style="color:#8f5902;font-style:italic"># n000001 car</span>
label0 &lt;class0&gt;
label1 &lt;class1&gt;
</code></pre></div><ul>
<li>supported annotations: Rectangles, Points (landmarks - groups of 5 points)</li>
</ul>
<h2 id="vggface2-import">VGGFace2 import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Rectangles, Points (landmarks - groups of 5 points)</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b43e1ff431da6854eb46bb51b712cc0b">2.2.20.14 - </h1>
    
	<h1 id="market-1501httpswwwaitribunecomdataset2018051063"><a href="https://www.aitribune.com/dataset/2018051063">Market-1501</a></h1>
<h2 id="market-1501-export">Market-1501 export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">taskname.zip/
├── bounding_box_&lt;any_subset_name&gt;/
│   └── image_name_1.jpg
└── query
    ├── image_name_2.jpg
    └── image_name_3.jpg
<span style="color:#8f5902;font-style:italic"># if we keep only annotation:</span>
taskname.zip/
└── images_&lt;any_subset_name&gt;.txt
<span style="color:#8f5902;font-style:italic"># images_&lt;any_subset_name&gt;.txt</span>
query/image_name_1.jpg
bounding_box_&lt;any_subset_name&gt;/image_name_2.jpg
bounding_box_&lt;any_subset_name&gt;/image_name_3.jpg
<span style="color:#8f5902;font-style:italic"># image_name = 0001_c1s1_000015_00.jpg</span>
<span style="color:#0000cf;font-weight:bold">0001</span> - person id
c1 - camera id <span style="color:#ce5c00;font-weight:bold">(</span>there are totally <span style="color:#0000cf;font-weight:bold">6</span> cameras<span style="color:#ce5c00;font-weight:bold">)</span>
s1 - sequence
<span style="color:#0000cf;font-weight:bold">000015</span> - frame number in sequence
<span style="color:#0000cf;font-weight:bold">00</span> - means that this bounding box is the first one among the several
</code></pre></div><ul>
<li>supported annotations: Label <code>market-1501</code> with attributes (<code>query</code>, <code>person_id</code>, <code>camera_id</code>)</li>
</ul>
<h2 id="market-1501-import">Market-1501 import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<ul>
<li>supported annotations: Label <code>market-1501</code> with attributes (<code>query</code>, <code>person_id</code>, <code>camera_id</code>)</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-58cc638fb0d2a3516ec0e834a1eb3973">2.2.20.15 - </h1>
    
	<h1 id="icdar1315httpsrrccvcuabesch2"><a href="https://rrc.cvc.uab.es/?ch=2">ICDAR13/15</a></h1>
<h2 id="icdar1315-export">ICDAR13/15 export</h2>
<p>Downloaded file: a zip archive of the following structure:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># word recognition task</span>
taskname.zip/
└── word_recognition/
    └── &lt;any_subset_name&gt;/
        ├── images
        <span style="color:#000;font-weight:bold">|</span>   ├── word1.png
        <span style="color:#000;font-weight:bold">|</span>   └── word2.png
        └── gt.txt
<span style="color:#8f5902;font-style:italic"># text localization task</span>
taskname.zip/
└── text_localization/
    └── &lt;any_subset_name&gt;/
        ├── images
        <span style="color:#000;font-weight:bold">|</span>   ├── img_1.png
        <span style="color:#000;font-weight:bold">|</span>   └── img_2.png
        ├── gt_img_1.txt
        └── gt_img_1.txt
<span style="color:#8f5902;font-style:italic">#text segmentation task</span>
taskname.zip/
└── text_localization/
    └── &lt;any_subset_name&gt;/
        ├── images
        <span style="color:#000;font-weight:bold">|</span>   ├── 1.png
        <span style="color:#000;font-weight:bold">|</span>   └── 2.png
        ├── 1_GT.bmp
        ├── 1_GT.txt
        ├── 2_GT.bmp
        └── 2_GT.txt
</code></pre></div><p><strong>Word recognition task</strong>:</p>
<ul>
<li>supported annotations: Label <code>icdar</code> with attribute <code>caption</code></li>
</ul>
<p><strong>Text localization task</strong>:</p>
<ul>
<li>supported annotations: Rectangles and Polygons with label <code>icdar</code>
and attribute <code>text</code></li>
</ul>
<p><strong>Text segmentation task</strong>:</p>
<ul>
<li>supported annotations: Rectangles and Polygons with label <code>icdar</code>
and attributes <code>index</code>, <code>text</code>, <code>color</code>, <code>center</code></li>
</ul>
<h2 id="icdar1315-import">ICDAR13/15 import</h2>
<p>Uploaded file: a zip archive of the structure above</p>
<p><strong>Word recognition task</strong>:</p>
<ul>
<li>supported annotations: Label <code>icdar</code> with attribute <code>caption</code></li>
</ul>
<p><strong>Text localization task</strong>:</p>
<ul>
<li>supported annotations: Rectangles and Polygons with label <code>icdar</code>
and attribute <code>text</code></li>
</ul>
<p><strong>Text segmentation task</strong>:</p>
<ul>
<li>supported annotations: Rectangles and Polygons with label <code>icdar</code>
and attributes <code>index</code>, <code>text</code>, <code>color</code>, <code>center</code></li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f698bff22886f6eda6cdad45220469c4">2.2.21 - XML annotation format</h1>
    
	<!--lint disable heading-style-->
<p>When you want to download annotations from Computer Vision Annotation Tool (CVAT)
you can choose one of several data formats. The document describes XML annotation format.
Each format has X.Y version (e.g. 1.0). In general the major version (X) is incremented when the data format has
incompatible changes and the minor version (Y) is incremented when the data format is slightly modified
(e.g. it has one or several extra fields inside meta information).
The document will describe all changes for all versions of XML annotation format.</p>
<h2 id="version-11">Version 1.1</h2>
<p>There are two different formats for images and video tasks at the moment.
The both formats have a common part which is described below. From the previous version <code>flipped</code> tag was added.
Also <code>original_size</code> tag was added for interpolation mode to specify frame size.
In annotation mode each image tag has <code>width</code> and <code>height</code> attributes for the same purpose.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.1<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>Number: id of the task<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>String: some task name<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>Number: count of frames/images in the task<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>String: interpolation or annotation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>Number: number of overlapped frames between segments<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;</span>String: URL on an page which describe the task<span style="color:#204a87;font-weight:bold">&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;flipped&gt;</span>Boolean: were images of the task flipped? (True/False)<span style="color:#204a87;font-weight:bold">&lt;/flipped&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>String: date when the task was created<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>String: date when the task was updated<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>String: name of the label (e.g. car, person)<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
            <span style="color:#204a87;font-weight:bold">&lt;attribute&gt;</span>
              <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>String: attribute name<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
              <span style="color:#204a87;font-weight:bold">&lt;mutable&gt;</span>Boolean: mutable (allow different values between frames)<span style="color:#204a87;font-weight:bold">&lt;/mutable&gt;</span>
              <span style="color:#204a87;font-weight:bold">&lt;input_type&gt;</span>String: select, checkbox, radio, number, text<span style="color:#204a87;font-weight:bold">&lt;/input_type&gt;</span>
              <span style="color:#204a87;font-weight:bold">&lt;default_value&gt;</span>String: default value<span style="color:#204a87;font-weight:bold">&lt;/default_value&gt;</span>
              <span style="color:#204a87;font-weight:bold">&lt;values&gt;</span>String: possible values, separated by newlines
ex. value 2
ex. value 3<span style="color:#204a87;font-weight:bold">&lt;/values&gt;</span>
            <span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>Number: id of the segment<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>Number: first frame<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>Number: last frame<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>String: URL (e.g. http://cvat.example.com/?id=213)<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>String: the author of the task<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;</span>String: email of the author<span style="color:#204a87;font-weight:bold">&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;original_size&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;width&gt;</span>Number: frame width<span style="color:#204a87;font-weight:bold">&lt;/width&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;height&gt;</span>Number: frame height<span style="color:#204a87;font-weight:bold">&lt;/height&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/original_size&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>String: date when the annotation was dumped<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><h3 id="annotation">Annotation</h3>
<p>Below you can find description of the data format for images tasks.
On each image it is possible to have many different objects. Each object can have multiple attributes.
If an annotation task is created with <code>z_order</code> flag then each object will have <code>z_order</code> attribute which is used
to draw objects properly when they are intersected (if <code>z_order</code> is bigger the object is closer to camera).
In previous versions of the format only <code>box</code> shape was available.
In later releases <code>polygon</code>, <code>polyline</code>, and <code>points</code> were added. Please see below for more details:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  ...
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;Number: id of the image (the index in lexical order of images)&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: path to the image&#34;</span>
    <span style="color:#c4a000">width=</span><span style="color:#4e9a06">&#34;Number: image width&#34;</span> <span style="color:#c4a000">height=</span><span style="color:#4e9a06">&#34;Number: image height&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;Number: z-order of the object&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span>
    <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;Number: z-order of the object&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polyline</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span>
    <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;Number: z-order of the object&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/polyline&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polyline</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span>
    <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;Number: z-order of the object&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/polyline&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;points</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span>
    <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;Number: z-order of the object&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/points&gt;</span>
    ...
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><p>Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.1<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>4<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>segmentation<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>27<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>annotation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;flipped&gt;</span>False<span style="color:#204a87;font-weight:bold">&lt;/flipped&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>2018-09-25 11:34:24.617558+03:00<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>2018-09-25 11:38:27.301183+03:00<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>car<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>traffic_line<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>wheel<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>plate<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>4<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>26<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>http://localhost:8080/?id=4<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>2018-09-25 11:38:28.799808+03:00<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;filename000.jpg&#34;</span> <span style="color:#c4a000">width=</span><span style="color:#4e9a06">&#34;1600&#34;</span> <span style="color:#c4a000">height=</span><span style="color:#4e9a06">&#34;1200&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;plate&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;797.33&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;870.92&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;965.52&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;928.94&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;4&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;561.30,916.23;561.30,842.77;554.72,761.63;553.62,716.67;565.68,677.20;577.74,566.45;547.04,559.87;536.08,542.33;528.40,520.40;541.56,512.72;559.10,509.43;582.13,506.14;588.71,464.48;583.23,448.03;587.61,434.87;594.19,431.58;609.54,399.78;633.66,369.08;676.43,294.52;695.07,279.17;703.84,279.17;735.64,268.20;817.88,264.91;923.14,266.01;997.70,274.78;1047.04,283.55;1063.49,289.04;1090.90,330.70;1111.74,371.27;1135.86,397.59;1147.92,428.29;1155.60,435.97;1157.79,451.32;1156.69,462.28;1159.98,491.89;1163.27,522.59;1173.14,513.82;1199.46,516.01;1224.68,521.49;1225.77,544.52;1207.13,568.64;1181.91,576.32;1178.62,582.90;1177.53,619.08;1186.30,680.48;1199.46,711.19;1206.03,733.12;1203.84,760.53;1197.26,818.64;1199.46,840.57;1203.84,908.56;1192.88,930.49;1184.10,939.26;1162.17,944.74;1139.15,960.09;1058.01,976.54;1028.40,969.96;1002.09,972.15;931.91,974.35;844.19,972.15;772.92,972.15;729.06,967.77;713.71,971.06;685.20,973.25;659.98,968.86;644.63,984.21;623.80,983.12;588.71,985.31;560.20,966.67&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polyline</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;traffic_line&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;462.10,0.00;126.80,1200.00&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;3&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polyline&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polyline</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;traffic_line&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;1212.40,0.00;1568.66,1200.00&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;2&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polyline&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;points</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;wheel&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;574.90,939.48;1170.16,907.90;1130.69,445.26;600.16,459.48&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">z_order=</span><span style="color:#4e9a06">&#34;5&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/points&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><h3 id="interpolation">Interpolation</h3>
<p>Below you can find description of the data format for video tasks.
The annotation contains tracks. Each track corresponds to an object which can be presented on multiple frames.
The same object cannot be presented on the same frame in multiple locations.
Each location of the object can have multiple attributes even if an attribute is immutable for the object it will be
cloned for each location (a known redundancy).</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  ...
  <span style="color:#204a87;font-weight:bold">&lt;track</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;Number: id of the track (doesn&#39;t have any special meeting&#34;</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;Number: frame&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;Number: frame&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polyline</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;Number: frame&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polyline&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;points</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;Number: frame&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;x0,y0;x1,y1;...&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/points&gt;</span>
    ...
  <span style="color:#204a87;font-weight:bold">&lt;/track&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><p>Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.1<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>5<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>interpolation<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>4620<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>interpolation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>5<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;flipped&gt;</span>False<span style="color:#204a87;font-weight:bold">&lt;/flipped&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>2018-09-25 12:32:09.868194+03:00<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>2018-09-25 16:05:05.619841+03:00<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>person<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>car<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>5<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>4619<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>http://localhost:8080/?id=5<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;original_size&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;width&gt;</span>640<span style="color:#204a87;font-weight:bold">&lt;/width&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;height&gt;</span>480<span style="color:#204a87;font-weight:bold">&lt;/height&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/original_size&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>2018-09-25 16:05:07.134046+03:00<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;track</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;324.79,213.16;323.74,227.90;347.42,237.37;371.11,217.37;350.05,190.00;318.47,191.58&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;324.79,213.16;323.74,227.90;347.42,237.37;371.11,217.37;350.05,190.00;318.47,191.58&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;6&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;305.32,237.90;312.16,207.90;352.69,206.32;355.32,233.16;331.11,254.74&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;7&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;305.32,237.90;312.16,207.90;352.69,206.32;355.32,233.16;331.11,254.74&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;13&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;313.74,233.16;331.11,220.00;359.53,243.16;333.21,283.16;287.95,274.74&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;polygon</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;14&#34;</span> <span style="color:#c4a000">points=</span><span style="color:#4e9a06">&#34;313.74,233.16;331.11,220.00;359.53,243.16;333.21,283.16;287.95,274.74&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/polygon&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/track&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><h2 id="version-1">Version 1</h2>
<p>There are two different formats for images and video tasks at the moment.
Both formats has a common part which is described below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.0<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>Number: id of the task<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>String: some task name<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>Number: count of frames/images in the task<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>String: interpolation or annotation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>Number: number of overlapped frames between segments<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;</span>String: URL on an page which describe the task<span style="color:#204a87;font-weight:bold">&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>String: date when the task was created<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>String: date when the task was updated<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>String: name of the label (e.g. car, person)<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
            <span style="color:#204a87;font-weight:bold">&lt;attribute&gt;</span>String: attributes for the label (e.g. @select=quality:good,bad)<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>Number: id of the segment<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>Number: first frame<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>Number: last frame<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>String: URL (e.g. http://cvat.example.com/?id=213)<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>String: the author of the task<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;</span>String: email of the author<span style="color:#204a87;font-weight:bold">&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>String: date when the annotation was dumped<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><h3 id="annotation-1">Annotation</h3>
<p>Below you can find description of the data format for images tasks.</p>
<p>On each image it is possible to have many different objects. Each object can have multiple attributes.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  ...
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;Number: id of the image (the index in lexical order of images)&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: path to the image&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    ...
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><p>Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.0<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>1063<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>My annotation task<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>75<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>annotation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>2018-06-06 11:57:54.807162+03:00<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>2018-06-06 12:42:29.375251+03:00<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>car<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
            <span style="color:#204a87;font-weight:bold">&lt;attribute&gt;</span>@select=model:a,b,c,d<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>3086<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>74<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>http://cvat.examle.com:8080/?id=3086<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>2018-06-06 15:47:04.386866+03:00<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;C15_L1_0001.jpg&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;38.95&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;26.51&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;140.64&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;54.29&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;parked&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>false<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>a<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;C15_L1_0002.jpg&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;49.13&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;23.34&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;149.54&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;53.88&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;parked&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>true<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>a<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;2&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;C15_L1_0003.jpg&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;50.73&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;30.26&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;146.72&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;59.97&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;parked&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>false<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>b<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;image</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;39&#34;</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;C15_L1_0040.jpg&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;49.60&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;30.15&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;150.19&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;58.06&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;parked&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>false<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>c<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/image&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><h3 id="interpolation-1">Interpolation</h3>
<p>Below you can find description of the data format for video tasks.
The annotation contains tracks. Each track corresponds to an object which can be presented on multiple frames.
The same object cannot be presented on the same frame in multiple locations.
Each location of the object can have multiple attributes even if an attribute is immutable for the object
it will be cloned for each location (a known redundancy).</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  ...
  <span style="color:#204a87;font-weight:bold">&lt;track</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;Number: id of the track (doesn&#39;t have any special meeting&#34;</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;String: the associated label&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;Number: frame&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;Number: float&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;Number: 0 - False, 1 - True&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;String: an attribute name&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>String: the attribute value<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
      ...
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    ...
  <span style="color:#204a87;font-weight:bold">&lt;/track&gt;</span>
  ...
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div><p>Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;annotations&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.0<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;meta&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;task&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>1062<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>My interpolation task<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;size&gt;</span>30084<span style="color:#204a87;font-weight:bold">&lt;/size&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;mode&gt;</span>interpolation<span style="color:#204a87;font-weight:bold">&lt;/mode&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;overlap&gt;</span>20<span style="color:#204a87;font-weight:bold">&lt;/overlap&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;bugtracker&gt;&lt;/bugtracker&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;created&gt;</span>2018-05-31 14:13:36.483219+03:00<span style="color:#204a87;font-weight:bold">&lt;/created&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;updated&gt;</span>2018-06-06 13:56:32.113705+03:00<span style="color:#204a87;font-weight:bold">&lt;/updated&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;labels&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;label&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>car<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;attributes&gt;</span>
            <span style="color:#204a87;font-weight:bold">&lt;attribute&gt;</span>@select=model:1,2,3,4<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;/attributes&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/label&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/labels&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;segments&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;segment&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>3085<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;start&gt;</span>0<span style="color:#204a87;font-weight:bold">&lt;/start&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;stop&gt;</span>30083<span style="color:#204a87;font-weight:bold">&lt;/stop&gt;</span>
          <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>http://cvat.example.com:8080/?id=3085<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;/segment&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/segments&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;owner&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;username&gt;</span>admin<span style="color:#204a87;font-weight:bold">&lt;/username&gt;</span>
        <span style="color:#204a87;font-weight:bold">&lt;email&gt;&lt;/email&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;/owner&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/task&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;dumped&gt;</span>2018-06-06 15:52:11.138470+03:00<span style="color:#204a87;font-weight:bold">&lt;/dumped&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/meta&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;track</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;110&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;634.12&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;37.68&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;661.50&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;71.37&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>1<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;111&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;634.21&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;38.50&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;661.59&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;72.19&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>1<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;112&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;634.30&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;39.32&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;661.67&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;73.01&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>1<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/track&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;track</span> <span style="color:#c4a000">id=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">label=</span><span style="color:#4e9a06">&#34;car&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;626.81&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;30.96&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;656.05&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;58.88&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>3<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;626.63&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;31.56&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;655.87&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;59.48&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>3<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;box</span> <span style="color:#c4a000">frame=</span><span style="color:#4e9a06">&#34;2&#34;</span> <span style="color:#c4a000">xtl=</span><span style="color:#4e9a06">&#34;626.09&#34;</span> <span style="color:#c4a000">ytl=</span><span style="color:#4e9a06">&#34;33.38&#34;</span> <span style="color:#c4a000">xbr=</span><span style="color:#4e9a06">&#34;655.33&#34;</span> <span style="color:#c4a000">ybr=</span><span style="color:#4e9a06">&#34;61.29&#34;</span> <span style="color:#c4a000">outside=</span><span style="color:#4e9a06">&#34;1&#34;</span> <span style="color:#c4a000">occluded=</span><span style="color:#4e9a06">&#34;0&#34;</span> <span style="color:#c4a000">keyframe=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
      <span style="color:#204a87;font-weight:bold">&lt;attribute</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;model&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>3<span style="color:#204a87;font-weight:bold">&lt;/attribute&gt;</span>
    <span style="color:#204a87;font-weight:bold">&lt;/box&gt;</span>
  <span style="color:#204a87;font-weight:bold">&lt;/track&gt;</span>
<span style="color:#204a87;font-weight:bold">&lt;/annotations&gt;</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-77171fcfcdf5ea7519669685c24e95c3">2.2.22 - Shortcuts</h1>
    <div class="lead">List of available mouse and keyboard shortcuts.</div>
	<p>Many UI elements have shortcut hints. Put your pointer to a required element to see it.</p>
<p><img src="../../images/image075.jpg" alt=""></p>
<table>
<thead>
<tr>
<th>Shortcut</th>
<th>Common</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><em>Main functions</em></td>
</tr>
<tr>
<td><code>F1</code></td>
<td>Open/hide the list of available shortcuts</td>
</tr>
<tr>
<td><code>F2</code></td>
<td>Go to the settings page or go back</td>
</tr>
<tr>
<td><code>Ctrl+S</code></td>
<td>Go to the settings page or go back</td>
</tr>
<tr>
<td><code>Ctrl+Z</code></td>
<td>Cancel the latest action related with objects</td>
</tr>
<tr>
<td><code>Ctrl+Shift+Z</code> or <code>Ctrl+Y</code></td>
<td>Cancel undo action</td>
</tr>
<tr>
<td>Hold <code>Mouse Wheel</code></td>
<td>To move an image frame (for example, while drawing)</td>
</tr>
<tr>
<td></td>
<td><em>Player</em></td>
</tr>
<tr>
<td><code>F</code></td>
<td>Go to the next frame</td>
</tr>
<tr>
<td><code>D</code></td>
<td>Go to the previous frame</td>
</tr>
<tr>
<td><code>V</code></td>
<td>Go forward with a step</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Go backward with a step</td>
</tr>
<tr>
<td><code>Right</code></td>
<td>Search the next frame that satisfies to the filters <br> or next frame which contain any objects</td>
</tr>
<tr>
<td><code>Left</code></td>
<td>Search the previous frame that satisfies to the filters <br> or previous frame which contain any objects</td>
</tr>
<tr>
<td><code>Space</code></td>
<td>Start/stop automatic changing frames</td>
</tr>
<tr>
<td><code>`</code> or <code>~</code></td>
<td>Focus on the element to change the current frame</td>
</tr>
<tr>
<td></td>
<td><em>Modes</em></td>
</tr>
<tr>
<td><code>N</code></td>
<td>Repeat the latest procedure of drawing with the same parameters</td>
</tr>
<tr>
<td><code>M</code></td>
<td>Activate or deactivate mode to merging shapes</td>
</tr>
<tr>
<td><code>Alt+M</code></td>
<td>Activate or deactivate mode to splitting shapes</td>
</tr>
<tr>
<td><code>G</code></td>
<td>Activate or deactivate mode to grouping shapes</td>
</tr>
<tr>
<td><code>Shift+G</code></td>
<td>Reset group for selected shapes (in group mode)</td>
</tr>
<tr>
<td><code>Esc</code></td>
<td>Cancel any active canvas mode</td>
</tr>
<tr>
<td></td>
<td><em>Image operations</em></td>
</tr>
<tr>
<td><code>Ctrl+R</code></td>
<td>Change image angle (add 90 degrees)</td>
</tr>
<tr>
<td><code>Ctrl+Shift+R</code></td>
<td>Change image angle (subtract 90 degrees)</td>
</tr>
<tr>
<td><code>Shift+B+=</code></td>
<td>Increase brightness level for the image</td>
</tr>
<tr>
<td><code>Shift+B+-</code></td>
<td>Decrease brightness level for the image</td>
</tr>
<tr>
<td><code>Shift+C+=</code></td>
<td>Increase contrast level for the image</td>
</tr>
<tr>
<td><code>Shift+C+-</code></td>
<td>Decrease contrast level for the image</td>
</tr>
<tr>
<td><code>Shift+S+=</code></td>
<td>Increase saturation level for the image</td>
</tr>
<tr>
<td><code>Shift+S+-</code></td>
<td>Increase contrast level for the image</td>
</tr>
<tr>
<td><code>Shift+G+=</code></td>
<td>Make the grid more visible</td>
</tr>
<tr>
<td><code>Shift+G+-</code></td>
<td>Make the grid less visible</td>
</tr>
<tr>
<td><code>Shift+G+Enter</code></td>
<td>Set another color for the image grid</td>
</tr>
<tr>
<td></td>
<td><em>Operations with objects</em></td>
</tr>
<tr>
<td><code>Ctrl</code></td>
<td>Switch automatic bordering for polygons and polylines during drawing/editing</td>
</tr>
<tr>
<td>Hold <code>Ctrl</code></td>
<td>When the shape is active and fix it</td>
</tr>
<tr>
<td><code>Alt+Click</code> on point</td>
<td>Deleting a point (used when hovering over a point of polygon, polyline, points)</td>
</tr>
<tr>
<td><code>Shift+Click</code> on point</td>
<td>Editing a shape (used when hovering over a point of polygon, polyline or points)</td>
</tr>
<tr>
<td><code>Right-Click</code> on shape</td>
<td>Display of an object element from objects sidebar</td>
</tr>
<tr>
<td><code>T+L</code></td>
<td>Change locked state for all objects in the sidebar</td>
</tr>
<tr>
<td><code>L</code></td>
<td>Change locked state for an active object</td>
</tr>
<tr>
<td><code>T+H</code></td>
<td>Change hidden state for objects in the sidebar</td>
</tr>
<tr>
<td><code>H</code></td>
<td>Change hidden state for an active object</td>
</tr>
<tr>
<td><code>Q</code> or <code>/</code></td>
<td>Change occluded property for an active object</td>
</tr>
<tr>
<td><code>Del</code> or <code>Shift+Del</code></td>
<td>Delete an active object. Use shift to force delete of locked objects</td>
</tr>
<tr>
<td><code>-</code> or <code>_</code></td>
<td>Put an active object &ldquo;farther&rdquo; from the user (decrease z axis value)</td>
</tr>
<tr>
<td><code>+</code> or <code>=</code></td>
<td>Put an active object &ldquo;closer&rdquo; to the user (increase z axis value)</td>
</tr>
<tr>
<td><code>Ctrl+C</code></td>
<td>Copy shape to CVAT internal clipboard</td>
</tr>
<tr>
<td><code>Ctrl+V</code></td>
<td>Paste a shape from internal CVAT clipboard</td>
</tr>
<tr>
<td>Hold <code>Ctrl</code> while pasting</td>
<td>When pasting shape from the buffer for multiple pasting.</td>
</tr>
<tr>
<td><code>Ctrl+B</code></td>
<td>Make a copy of the object on the following frames</td>
</tr>
<tr>
<td><code>Ctrl+(0..9)</code></td>
<td>Changes a label for an activated object or for the next drawn object if no objects are activated</td>
</tr>
<tr>
<td></td>
<td><em>Operations are available only for track</em></td>
</tr>
<tr>
<td><code>K</code></td>
<td>Change keyframe property for an active track</td>
</tr>
<tr>
<td><code>O</code></td>
<td>Change outside property for an active track</td>
</tr>
<tr>
<td><code>R</code></td>
<td>Go to the next keyframe of an active track</td>
</tr>
<tr>
<td><code>E</code></td>
<td>Go to the previous keyframe of an active track</td>
</tr>
<tr>
<td></td>
<td><em>Attribute annotation mode</em></td>
</tr>
<tr>
<td><code>Up Arrow</code></td>
<td>Go to the next attribute (up)</td>
</tr>
<tr>
<td><code>Down Arrow</code></td>
<td>Go to the next attribute (down)</td>
</tr>
<tr>
<td><code>Tab</code></td>
<td>Go to the next annotated object in current frame</td>
</tr>
<tr>
<td><code>Shift+Tab</code></td>
<td>Go to the previous annotated object in current frame</td>
</tr>
<tr>
<td><code>&lt;number&gt;</code></td>
<td>Assign a corresponding value to the current attribute</td>
</tr>
<tr>
<td></td>
<td><em>Standard 3d mode</em></td>
</tr>
<tr>
<td><code>Shift+arrrowup</code></td>
<td>Increases camera roll angle</td>
</tr>
<tr>
<td><code>Shift+arrrowdown</code></td>
<td>Decreases camera roll angle</td>
</tr>
<tr>
<td><code>Shift+arrrowleft</code></td>
<td>Decreases camera pitch angle</td>
</tr>
<tr>
<td><code>Shift+arrrowright</code></td>
<td>Increases camera pitch angle</td>
</tr>
<tr>
<td><code>Alt+O</code></td>
<td>Move the camera up</td>
</tr>
<tr>
<td><code>Alt+U</code></td>
<td>Move the camera down</td>
</tr>
<tr>
<td><code>Alt+J</code></td>
<td>Move the camera left</td>
</tr>
<tr>
<td><code>Alt+L</code></td>
<td>Move the camera right</td>
</tr>
<tr>
<td><code>Alt+I</code></td>
<td>Performs zoom in</td>
</tr>
<tr>
<td><code>Alt+K</code></td>
<td>Performs zoom out</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8c8c008f3339d846e9b9e1cce1057602">2.2.23 - Filter</h1>
    <div class="lead">Guide to using the Filter feature in CVAT.</div>
	<p>There are some reasons to use the feature:</p>
<ol>
<li>When you use a filter, objects that don&rsquo;t match the filter will be hidden.</li>
<li>The fast navigation between frames which have an object of interest.
Use the <code>Left Arrow</code> / <code>Right Arrow</code> keys for this purpose
or customize the UI buttons by right-clicking and select <code>switching by filter</code>.
If there are no objects which correspond to the filter,
you will go to the previous / next frame which contains any annotated objects.</li>
</ol>
<p>To apply filters you need to click on the button on the top panel.</p>
<p><img src="../../images/image059.jpg" alt=""></p>
<p>It will open a window for filter input. Here you will find two buttons: <code>Add rule</code> and <code>Add group</code>.</p>
<p><img src="../../images/image202.jpg" alt=""></p>
<h3 id="rules">Rules</h3>
<p>The &ldquo;Add rule&rdquo; button adds a rule for objects display. A rule may use the following properties:</p>
<p><img src="../../images/image204.jpg" alt=""></p>
<p><strong>Supported properties:</strong></p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Supported values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Label</code></td>
<td>all the label names that are in the task</td>
<td>label name</td>
</tr>
<tr>
<td><code>Type</code></td>
<td>shape, track or tag</td>
<td>type of object</td>
</tr>
<tr>
<td><code>Shape</code></td>
<td>all shape types</td>
<td>type of shape</td>
</tr>
<tr>
<td><code>Occluded</code></td>
<td>true or false</td>
<td>occluded (<a href="../../docs/manual/advanced/shape-mode-advanced/">read more</a>)</td>
</tr>
<tr>
<td><code>Width</code></td>
<td>number of px or field</td>
<td>shape width</td>
</tr>
<tr>
<td><code>Height</code></td>
<td>number of px or field</td>
<td>shape height</td>
</tr>
<tr>
<td><code>ServerID</code></td>
<td>number or field</td>
<td>ID of the object on the server <br>(You can find out by forming a link to the object through the Action menu)</td>
</tr>
<tr>
<td><code>ObjectID</code></td>
<td>number or field</td>
<td>ID of the object in your client <br>(indicated on the objects sidebar)</td>
</tr>
<tr>
<td><code>Attributes</code></td>
<td>some other fields including attributes with a <br>similar type or a specific attribute value</td>
<td>any fields specified by a label</td>
</tr>
</tbody>
</table>
<p><strong>Supported operators for properties:</strong></p>
<p><code>==</code> - Equally; <code>!=</code> - Not equal; <code>&gt;</code> - More; <code>&gt;=</code> - More or equal; <code>&lt;</code> - Less; <code>&lt;=</code> - Less or equal;</p>
<p><code>Any in</code>; <code>Not in</code> - these operators allow you to set multiple values in one rule;</p>
<p><img src="../../images/image203.jpg" alt=""></p>
<p><code>Is empty</code>; <code>is not empty</code> – these operators don&rsquo;t require to input a value.</p>
<p><code>Between</code>; <code>Not between</code> – these operators allow you to choose a range between two values.</p>
<p>Some properties support two types of values that you can choose:</p>
<p><img src="../../images/image205.jpg" alt=""></p>
<p>You can add multiple rules, to do so click the add rule button and set another rule.
Once you&rsquo;ve set a new rule, you&rsquo;ll be able to choose which operator they will be connected by: <code>And</code> or <code>Or</code>.</p>
<p><img src="../../images/image206.jpg" alt=""></p>
<p>All subsequent rules will be joined by the chosen operator.
Click <code>Submit</code> to apply the filter or if you want multiple rules to be connected by different operators, use groups.</p>
<h3 id="groups">Groups</h3>
<p>To add a group, click the &ldquo;add group&rdquo; button. Inside the group you can create rules or groups.</p>
<p><img src="../../images/image207.jpg" alt=""></p>
<p>If there is more than one rule in the group, they can be connected by <code>And</code> or <code>Or</code> operators.
The rule group will work as well as a separate rule outside the group and will be joined by an
operator outside the group.
You can create groups within other groups, to do so you need to click the add group button within the group.</p>
<p>You can move rules and groups. To move the rule or group, drag it by the button.
To remove the rule or group, click on the <code>Delete</code> button.</p>
<p><img src="../../images/image208.jpg" alt=""></p>
<p>If you activate the <code>Not</code> button, objects that don&rsquo;t match the group will be filtered out.
Click <code>Submit</code> to apply the filter.
The &ldquo;Cancel&rdquo; button undoes the filter. The <code>Clear filter</code> button removes the filter.</p>
<p>Once applied filter automatically appears in <code>Recent used</code> list. Maximum length of the list is 10.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-36f6d1f2f816a0b53b7c706d77dce673">2.2.24 - Review</h1>
    <div class="lead">Guide to using the Review mode for task validation.</div>
	<p>A special mode to check the annotation allows you to point to an object or area in the frame containing an error.
<code>Review mode</code> is not available in 3D tasks.
To go into review mode, you need to select <code>Request a review</code> in the menu and assign the user to run a check.</p>
<p><img src="../../images/image194.jpg" alt=""></p>
<p>After that, the job status will be changed to <code>validation</code>
and the reviewer will be able to open the task in review mode.
Review mode is a UI mode, there is a special &ldquo;issue&rdquo; tool which you can use to identify objects
or areas in the frame and describe the problem.</p>
<ul>
<li>
<p>To do this, first click <code>open an issue</code> icon on the controls sidebar:</p>
<p><img src="../../images/image195.jpg" alt=""></p>
</li>
<li>
<p>Then click on an object in the frame to highlight the object or highlight the area by holding the left mouse button
and describe the problem. The object or area will be shaded in red.</p>
</li>
<li>
<p>The created issue will appear in the workspace and in the <code>issues</code> tab on the objects sidebar.</p>
</li>
<li>
<p>After you save the annotation, other users will be able to see the problem, comment on each issue
and change the status of the problem to <code>resolved</code>.</p>
</li>
<li>
<p>You can use the arrows on the issues tab to navigate the frames that contain problems.</p>
<p><img src="../../images/image196_detrac.jpg" alt=""></p>
</li>
<li>
<p>Once all the problems are marked, save the annotation, open the menu and select &ldquo;submit the review&rdquo;.
After that you&rsquo;ll see a form containing the verification statistics,
here you can give an assessment of the job and choose further actions:</p>
<ul>
<li>Accept - changes the status of the job to <code>completed</code>.</li>
<li>Review next – passes the job to another user for re-review.</li>
<li>Reject - changes the status of the job to <code>annotation</code>.</li>
</ul>
<p><img src="../../images/image197.jpg" alt=""></p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e8b13f3a1b1ab022a3ac4c5532053190">2.2.25 - Context images for 2d task</h1>
    <div class="lead">Adding additional contextual images to a task.</div>
	<p>When you create a task, you can provide the images with additional contextual images.
To do this, create a folder related_images and place a folder with a contextual image in it
(make sure the folder has the same name as the image to which it should be tied).
An example of the structure:</p>
<ul>
<li>root_directory
<ul>
<li>image_1_to_be_annotated.jpg</li>
<li>image_2_to_be_annotated.jpg</li>
<li>related_images/
<ul>
<li>image_1_to_be_annotated_jpg/
<ul>
<li>context_image_for_image_1.jpg</li>
</ul>
</li>
<li>image_2_to_be_annotated_jpg/
<ul>
<li>context_image_for_image_2.jpg</li>
</ul>
</li>
</ul>
</li>
<li>subdirectory_example/
<ul>
<li>image_3_to_be_annotated.jpg</li>
<li>related_images/
<ul>
<li>image_3_to_be_annotated_jpg/
<ul>
<li>context_image_for_image_3.jpg</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The contextual image is displayed in the upper right corner of the workspace.
You can hide it by clicking on the corresponding button or maximize the image by clicking on it.</p>
<p><img src="../../images/image212_mapillary_vistas.jpg" alt="contex_images_1"></p>
<p>When the image is maximized, you can rotate it clockwise/counterclockwise and zoom in/out.
You can also move the image by moving the mouse while holding down the LMB
and zoom in/out by scrolling the mouse wheel.
To close the image, just click the <code>X</code>.</p>
<p><img src="../../images/image213_mapillary_vistas.jpg" alt="contex_images_2"></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-158b1d880eaabf3e0830c8518c23321b">2.2.26 - Shape grouping</h1>
    <div class="lead">Grouping multiple shapes during annotation.</div>
	<p>This feature allows us to group several shapes.</p>
<p>You may use the <code>Group Shapes</code> button or shortcuts:</p>
<ul>
<li><code>G</code> — start selection / end selection in group mode</li>
<li><code>Esc</code> — close group mode</li>
<li><code>Shift+G</code> — reset group for selected shapes</li>
</ul>
<p>You may select shapes clicking on them or selecting an area.</p>
<p>Grouped shapes will have <code>group_id</code> filed in dumped annotation.</p>
<p>Also you may switch color distribution from an instance (default) to a group.
You have to switch <code>Color By Group</code> checkbox for that.</p>
<p>Shapes that don&rsquo;t have <code>group_id</code>, will be highlighted in white.</p>
<p><img src="../../images/image078_detrac.jpg" alt=""></p>
<p><img src="../../images/image077_detrac.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1d89766387352cb048ccadef403c6743">2.2.27 - Analytics Monitoring</h1>
    <div class="lead">Using Analytics to monitor usage statistics.</div>
	<p>If your CVAT instance was created with analytics support, you can press the <code>Analytics</code> button in the dashboard
and analytics and journals will be opened in a new tab.</p>
<p><img src="../../images/image113.jpg" alt=""></p>
<p>The analytics allows you to see how much time every user spends on each task
and how much work they did over any time range.</p>
<p><img src="../../images/image097.jpg" alt=""></p>
<p>It also has an activity graph which can be modified with a number of users shown and a timeframe.</p>
<p><img src="../../images/image096.jpg" alt=""></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cadd546c949870aa199c5df717a0755c">2.2.28 - Command line interface (CLI)</h1>
    <div class="lead">Guide to working with CVAT tasks in the command line interface. This section on <a href="https://github.com/openvinotoolkit/cvat/tree/develop/utils/cli">GitHub</a>.</div>
	<p><strong>Description</strong>
A simple command line interface for working with CVAT tasks. At the moment it
implements a basic feature set but may serve as the starting point for a more
comprehensive CVAT administration tool in the future.</p>
<p>Overview of functionality:</p>
<ul>
<li>Create a new task (supports name, bug tracker, project, labels JSON, local/share/remote files)</li>
<li>Delete tasks (supports deleting a list of task IDs)</li>
<li>List all tasks (supports basic CSV or JSON output)</li>
<li>Download JPEG frames (supports a list of frame IDs)</li>
<li>Dump annotations (supports all formats via format string)</li>
<li>Upload annotations for a task in the specified format (e.g. &lsquo;YOLO ZIP 1.0&rsquo;)</li>
<li>Export and download a whole task</li>
<li>Import a task</li>
</ul>
<p><strong>Usage</strong></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">usage: cli.py <span style="color:#ce5c00;font-weight:bold">[</span>-h<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>--auth USER:<span style="color:#ce5c00;font-weight:bold">[</span>PASS<span style="color:#ce5c00;font-weight:bold">]]</span> <span style="color:#ce5c00;font-weight:bold">[</span>--server-host SERVER_HOST<span style="color:#ce5c00;font-weight:bold">]</span>
              <span style="color:#ce5c00;font-weight:bold">[</span>--server-port SERVER_PORT<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>--debug<span style="color:#ce5c00;font-weight:bold">]</span>
              <span style="color:#ce5c00;font-weight:bold">{</span>create,delete,ls,frames,dump,upload,export,import<span style="color:#ce5c00;font-weight:bold">}</span> ...

Perform common operations related to CVAT tasks.

positional arguments:
  <span style="color:#ce5c00;font-weight:bold">{</span>create,delete,ls,frames,dump,upload,export,import<span style="color:#ce5c00;font-weight:bold">}</span>

optional arguments:
  -h, --help            show this <span style="color:#204a87">help</span> message and <span style="color:#204a87">exit</span>
  --auth USER:<span style="color:#ce5c00;font-weight:bold">[</span>PASS<span style="color:#ce5c00;font-weight:bold">]</span>    defaults to the current user and supports the PASS
                        environment variable or password prompt.
  --server-host SERVER_HOST
                        host <span style="color:#ce5c00;font-weight:bold">(</span>default: localhost<span style="color:#ce5c00;font-weight:bold">)</span>
  --server-port SERVER_PORT
                        port <span style="color:#ce5c00;font-weight:bold">(</span>default: 8080<span style="color:#ce5c00;font-weight:bold">)</span>
  --https
                        using https connection <span style="color:#ce5c00;font-weight:bold">(</span>default: False<span style="color:#ce5c00;font-weight:bold">)</span>
  --debug               show debug output
</code></pre></div><p><strong>Examples</strong></p>
<ul>
<li>Create a task
<code>cli.py create &quot;new task&quot; --labels labels.json local file1.jpg file2.jpg</code></li>
<li>Delete some tasks
<code>cli.py delete 100 101 102</code></li>
<li>List all tasks
<code>cli.py ls</code></li>
<li>Dump annotations
<code>cli.py dump --format &quot;CVAT for images 1.1&quot; 103 output.xml</code></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-38aabad9f17e6d1d7ac9776c09a32a5c">2.2.29 - Simple command line to prepare dataset manifest file</h1>
    <div class="lead">This section on <a href="https://github.com/openvinotoolkit/cvat/tree/develop/utils/dataset_manifest">GitHub</a></div>
	<h3 id="steps-before-use">Steps before use</h3>
<p>When used separately from Computer Vision Annotation Tool(CVAT), the required dependencies must be installed</p>
<h4 id="ubuntu2004">Ubuntu:20.04</h4>
<p>Install dependencies:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># General</span>
sudo apt-get update <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> sudo apt-get --no-install-recommends install -y <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    python3-dev python3-pip python3-venv pkg-config
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Library components</span>
sudo apt-get install --no-install-recommends -y <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    libavformat-dev libavcodec-dev libavdevice-dev <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    libavutil-dev libswscale-dev libswresample-dev libavfilter-dev
</code></pre></div><p>Create an environment and install the necessary python modules:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python3 -m venv .env
. .env/bin/activate
pip install -U pip
pip install -r requirements.txt
</code></pre></div><h3 id="using">Using</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">usage: python create.py <span style="color:#ce5c00;font-weight:bold">[</span>-h<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>--force<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">[</span>--output-dir .<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#204a87">source</span>

positional arguments:
  <span style="color:#204a87">source</span>                Source paths

optional arguments:
  -h, --help            show this <span style="color:#204a87">help</span> message and <span style="color:#204a87">exit</span>
  --force               Use this flag to prepare the manifest file <span style="color:#204a87;font-weight:bold">for</span> video data <span style="color:#204a87;font-weight:bold">if</span> by default the video does not meet the requirements
                        and a manifest file is not prepared
  --output-dir OUTPUT_DIR
                        Directory where the manifest file will be saved
</code></pre></div><h3 id="alternative-way-to-use-with-openvinocvat_server">Alternative way to use with openvino/cvat_server</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -it --entrypoint python3 -v /path/to/host/data/:/path/inside/container/:rw openvino/cvat_server
utils/dataset_manifest/create.py --output-dir /path/to/manifest/directory/ /path/to/data/
</code></pre></div><h3 id="examples-of-using">Examples of using</h3>
<p>Create a dataset manifest in the current directory with video which contains enough keyframes:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python create.py ~/Documents/video.mp4
</code></pre></div><p>Create a dataset manifest with video which does not contain enough keyframes:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python create.py --force --output-dir ~/Documents ~/Documents/video.mp4
</code></pre></div><p>Create a dataset manifest with images:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python create.py --output-dir ~/Documents ~/Documents/images/
</code></pre></div><p>Create a dataset manifest with pattern (may be used <code>*</code>, <code>?</code>, <code>[]</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">python create.py --output-dir ~/Documents <span style="color:#4e9a06">&#34;/home/</span><span style="color:#4e9a06">${</span><span style="color:#000">USER</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">/Documents/**/image*.jpeg&#34;</span>
</code></pre></div><p>Create a dataset manifest with <code>openvino/cvat_server</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -it --entrypoint python3 -v ~/Documents/data/:<span style="color:#4e9a06">${</span><span style="color:#000">HOME</span><span style="color:#4e9a06">}</span>/manifest/:rw openvino/cvat_server
utils/dataset_manifest/create.py --output-dir ~/manifest/ ~/manifest/images/
</code></pre></div><h3 id="examples-of-generated-manifestjsonl-files">Examples of generated <code>manifest.jsonl</code> files</h3>
<p>A maifest file contains some intuitive information and some specific like:</p>
<p><code>pts</code> - time at which the frame should be shown to the user
<code>checksum</code> - <code>md5</code> hash sum for the specific image/frame</p>
<h4 id="for-a-video">For a video</h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;version&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;1.0&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;video&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;properties&#34;</span><span style="color:#000;font-weight:bold">:{</span><span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;video.mp4&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;resolution&#34;</span><span style="color:#000;font-weight:bold">:[</span><span style="color:#0000cf;font-weight:bold">1280</span><span style="color:#000;font-weight:bold">,</span><span style="color:#0000cf;font-weight:bold">720</span><span style="color:#000;font-weight:bold">],</span><span style="color:#204a87;font-weight:bold">&#34;length&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">778</span><span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;17bb40d76887b56fe8213c6fded3d540&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">135</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">486000</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;9da9b4d42c1206d71bf17a7070a05847&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">270</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">972000</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;a1c3a61814f9b58b00a795fa18bb6d3e&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">405</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">1458000</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;18c0803b3cc1aa62ac75b112439d2b62&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">540</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">1944000</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;4551ecea0f80e95a6c32c32e70cac59e&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;number&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">675</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;pts&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">2430000</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;0e72faf67e5218c70b506445ac91cdd7&#34;</span><span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h4 id="for-a-dataset-with-images">For a dataset with images</h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;version&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;1.0&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;images&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;image1&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;extension&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;.jpg&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;width&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">720</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;height&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">405</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;meta&#34;</span><span style="color:#000;font-weight:bold">:{</span><span style="color:#204a87;font-weight:bold">&#34;related_images&#34;</span><span style="color:#000;font-weight:bold">:[]},</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;548918ec4b56132a5cff1d4acabe9947&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;image2&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;extension&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;.jpg&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;width&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">183</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;height&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">275</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;meta&#34;</span><span style="color:#000;font-weight:bold">:{</span><span style="color:#204a87;font-weight:bold">&#34;related_images&#34;</span><span style="color:#000;font-weight:bold">:[]},</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;4b4eefd03cc6a45c1c068b98477fb639&#34;</span><span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">{</span><span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;image3&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;extension&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;.jpg&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;width&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">301</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;height&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">167</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">&#34;meta&#34;</span><span style="color:#000;font-weight:bold">:{</span><span style="color:#204a87;font-weight:bold">&#34;related_images&#34;</span><span style="color:#000;font-weight:bold">:[]},</span><span style="color:#204a87;font-weight:bold">&#34;checksum&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#4e9a06">&#34;0e454a6f4a13d56c82890c98be063663&#34;</span><span style="color:#000;font-weight:bold">}</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d7d77f3c70d971a82c22b478c3271a5a">2.2.30 - Data preparation on the fly</h1>
    
	<!--lint disable heading-style-->
<h2 id="description">Description</h2>
<p>Data on the fly processing is a way of working with data, the main idea of which is as follows: when creating a task,
the minimum necessary meta information is collected. This meta information allows in the future to create necessary
chunks when receiving a request from a client.</p>
<p>Generated chunks are stored in a cache of the limited size with a policy of evicting less popular items.</p>
<p>When a request is received from a client, the required chunk is searched for in the cache. If the chunk does not exist
yet, it is created using prepared meta information and then put into the cache.</p>
<p>This method of working with data allows:</p>
<ul>
<li>reduce the task creation time.</li>
<li>store data in a cache of the limited size with a policy of evicting less popular items.</li>
</ul>
<p>Unfortunately, this method will not work for all videos with a valid manifest file. If there are not enough keyframes
in the video for smooth video decoding, the task will be created in another way. Namely, all chunks will be prepared
during task creation, which may take some time.</p>
<h4 id="uploading-a-manifest-with-data">Uploading a manifest with data</h4>
<p>When creating a task, you can upload a <code>manifest.jsonl</code> file along with the video or dataset with images.
You can see how to prepare it <a href="../../docs/manual/advanced/dataset_manifest/">here</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1b35e18fef7d8c06ef313e32977f5739">2.2.31 - Serverless tutorial</h1>
    
	<h2 id="introduction">Introduction</h2>
<p>Computers have now become our partners. They help us to solve routine problems,
fix mistakes, find information, etc. It is a natural idea to use their
compute power to annotate datasets. There are multiple DL models for
classification, object detection, semantic segmentation which can do
data annotation for us. And it is relatively simple to integrate your
own ML/DL solution into CVAT.</p>
<p>But the world is not perfect and we don&rsquo;t have a silver bullet which can
solve all our problems. Usually, available DL models are trained on public
datasets which cannot cover all specific cases. Very often you want to
detect objects which cannot be recognized by these models. Our annotation
requirements can be so strict that automatically
annotated objects cannot be accepted as is, and it is easier to annotate them
from scratch. You always need to keep in mind all these mentioned limitations.
Even if you have a DL solution which can
<em>perfectly</em> annotate 50% of your data, it means that manual work will only be
reduced in half.</p>
<p>When we know that DL models can help us to annotate data faster, the next
question is how to use them? In CVAT all such DL models are implemented
as serverless functions for the <a href="https://nuclio.io/">Nuclio</a> serverless platform.
And there are multiple implemented functions which can be
found in the <a href="https://github.com/openvinotoolkit/cvat/tree/develop/serverless">serverless</a> directory such as <em>Mask RCNN,
Faster RCNN, SiamMask, Inside Outside Guidance, Deep Extreme Cut</em>, etc.
Follow <a href="../../docs/administration/advanced/installation_automatic_annotation">the installation guide</a> to build and deploy
these serverless functions. See <a href="../../docs/manual/advanced/ai-tools/">the user guide</a> to
understand how to use these functions in the UI to automatically annotate data.</p>
<p>What is a serverless function and why is it used for automatic annotation
in CVAT? Let&rsquo;s assume that you have a DL model and want to use it for
AI-assisted annotation. The naive approach is to implement a Python
script which uses the DL model to prepare a file with annotations in a
public format like <a href="https://cocodataset.org/#format-data">MS COCO</a> or <a href="http://host.robots.ox.ac.uk/pascal/VOC/voc2012/htmldoc/index.html">Pascal VOC</a>.
After that you can upload the annotation file into CVAT. It works but it is
not user-friendly. How to make CVAT run the script for you?</p>
<p>You can pack the script with your DL model into a container which
provides a standard interface for interacting with it. One way to do that is to use
the <a href="https://en.wikipedia.org/wiki/Function_as_a_service">function as a service</a> approach. Your script becomes a function
inside cloud infrastructure which can be called over HTTP. The Nuclio
serverless platform helps us to implement and manage such functions.</p>
<p>CVAT supports Nuclio out of the box if it is built properly. See
<a href="../../docs/administration/advanced/installation_automatic_annotation">the installation guide</a> for instructions.
Thus if you deploy a serverless function, the CVAT server can see it and call it
with appropriate arguments. Of course there are some tricks how to create
serverless functions for CVAT and we will discuss them in next sections of
the tutorial.</p>
<h2 id="using-builtin-dl-models-in-practice">Using builtin DL models in practice</h2>
<p>In the tutorial it is assumed that you already have the cloned
<a href="https://github.com/openvinotoolkit/cvat">CVAT GitHub repo</a>.
To build CVAT with serverless support you need to run <code>docker-compose</code> command
with specific configuration files. In the case it is <code>docker-compose.serverless.yml</code>.
It has necessary instructions how to build and deploy Nuclio platform as a
docker container and enable corresponding support in CVAT.</p>
<pre><code class="language-console" data-lang="console">$ docker-compose -f docker-compose.yml -f docker-compose.dev.yml -f components/serverless/docker-compose.serverless.yml up -d --build
</code></pre><pre><code class="language-console" data-lang="console">$ docker-compose -f docker-compose.yml -f docker-compose.dev.yml -f components/serverless/docker-compose.serverless.yml ps
   Name                 Command                  State                            Ports
-------------------------------------------------------------------------------------------------------------
cvat         /usr/bin/supervisord             Up             8080/tcp
cvat_db      docker-entrypoint.sh postgres    Up             5432/tcp
cvat_proxy   /docker-entrypoint.sh /bin ...   Up             0.0.0.0:8080-&gt;80/tcp,:::8080-&gt;80/tcp
cvat_redis   docker-entrypoint.sh redis ...   Up             6379/tcp
cvat_ui      /docker-entrypoint.sh ngin ...   Up             80/tcp
nuclio       /docker-entrypoint.sh sh - ...   Up (healthy)   80/tcp, 0.0.0.0:8070-&gt;8070/tcp,:::8070-&gt;8070/tcp
</code></pre><p>Next step is to deploy builtin serverless functions using Nuclio command
line tool (aka <code>nuctl</code>). It is assumed that you followed
<a href="../../docs/administration/advanced/installation_automatic_annotation">the installation guide</a> and <code>nuctl</code>
is already installed on your operating system. Run the following
command to check that it works. In the beginning you should not have
any deployed serverless functions.</p>
<pre><code class="language-console" data-lang="console">$ nuctl get functions
No functions found
</code></pre><p>Let&rsquo;s see on examples how to use DL models for annotation in different
computer vision tasks.</p>
<h3 id="tracking-using-siammask">Tracking using SiamMask</h3>
<p>In this use case a user needs to annotate all individual objects on a video as
tracks. Basically for every object we need to know its location on every frame.</p>
<p>First step is to deploy <a href="https://github.com/openvinotoolkit/cvat/tree/develop/serverless/pytorch/foolwood/siammask/nuclio">SiamMask</a>. The deployment process
can depend on your operating system. On Linux you can use <code>serverless/deploy_cpu.sh</code>
auxiliary script, but below we are using <code>nuctl</code> directly.</p>
<pre><code class="language-console" data-lang="console">$ nuctl create project cvat

nuctl deploy --project-name cvat --path &quot;./serverless/pytorch/foolwood/siammask/nuclio&quot; --platform local
21.05.07 13:00:22.233                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.05.07 13:00:22.233                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.05.07 13:00:22.652                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;pth-foolwood-siammask&quot;}
21.05.07 13:00:22.705                     nuctl (I) Staging files and preparing base images
21.05.07 13:00:22.706                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/pth.foolwood.siammask:latest&quot;}
21.05.07 13:00:22.706     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.05.07 13:00:26.351     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.05.07 13:00:29.819            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/pth.foolwood.siammask:latest&quot;}
21.05.07 13:00:30.103            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/pth.foolwood.siammask:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.05.07 13:00:30.103            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/pth.foolwood.siammask:latest&quot;}
21.05.07 13:00:30.104                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/pth.foolwood.siammask:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;pth-foolwood-siammask&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;pytorch&quot;,&quot;name&quot;:&quot;SiamMask&quot;,&quot;spec&quot;:&quot;&quot;,&quot;type&quot;:&quot;tracker&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;Fast Online Object Tracking and Segmentation&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.6&quot;,&quot;env&quot;:[{&quot;name&quot;:&quot;PYTHONPATH&quot;,&quot;value&quot;:&quot;/opt/nuclio/SiamMask:/opt/nuclio/SiamMask/experiments/siammask_sharp&quot;}],&quot;resources&quot;:{},&quot;image&quot;:&quot;cvat/pth.foolwood.siammask:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:2,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;build&quot;:{&quot;image&quot;:&quot;cvat/pth.foolwood.siammask&quot;,&quot;baseImage&quot;:&quot;continuumio/miniconda3&quot;,&quot;directives&quot;:{&quot;preCopy&quot;:[{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda create -y -n siammask python=3.6&quot;},{&quot;kind&quot;:&quot;SHELL&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;siammask\&quot;, \&quot;/bin/bash\&quot;, \&quot;-c\&quot;]&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;git clone https://github.com/foolwood/SiamMask.git&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;pip install -r SiamMask/requirements.txt jsonpickle&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y gcc_linux-64&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;cd SiamMask \u0026\u0026 bash make.sh \u0026\u0026 cd -&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;wget -P SiamMask/experiments/siammask_sharp http://www.robots.ox.ac.uk/~qwang/SiamMask_DAVIS.pth&quot;},{&quot;kind&quot;:&quot;ENTRYPOINT&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;siammask\&quot;]&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.05.07 13:00:31.387            nuctl.platform (I) Waiting for function to be ready {&quot;timeout&quot;: 60}
21.05.07 13:00:32.796                     nuctl (I) Function deploy complete {&quot;functionName&quot;: &quot;pth-foolwood-siammask&quot;, &quot;httpPort&quot;: 49155}
</code></pre><pre><code class="language-console" data-lang="console">$ nuctl get functions
  NAMESPACE |         NAME          | PROJECT | STATE | NODE PORT | REPLICAS
  nuclio    | pth-foolwood-siammask | cvat    | ready |     49155 | 1/1
</code></pre><p>Let&rsquo;s see how it works in the UI. Go to the <a href="http://localhost:8080/models">models tab</a>
and check that you can see SiamMask in the list. If you cannot, it
means that there are some problems. Go to one of our public channels and ask
for help.</p>
<p><img src="../../images/models_list_with_siammask.png" alt="Models list with SiamMask"></p>
<p>After that, go to the <a href="http://localhost:8080/tasks/create">new task page</a> and
create a task with <a href="https://github.com/opencv/opencv/blob/master/samples/data/vtest.avi?raw=true">this video file</a>. You can choose any task name,
any labels, and even another video file if you like. In this case, the <code>Remote sources</code>
option was used to specify the video file. Press <code>submit</code> button at the end to
finish the process.</p>
<p><img src="../../images/create_video_task.png" alt="Create a video annotation task"></p>
<p>Open the task and use <a href="../../docs/manual/advanced/ai-tools/">AI tools</a> to start tracking
an object. Draw a bounding box around an object, and sequentially switch
through the frame and correct the restrictive box if necessary.</p>
<p><img src="../../images/trackers_tab.jpg" alt="Start tracking an object"></p>
<p>Finally you will get bounding boxes.</p>
<p><img src="../../images/siammask_results.gif" alt="SiamMask results"></p>
<p><code>SiamMask</code> model is more optimized to work on Nvidia GPUs.
For more information about deploying the model for the GPU, <a href="#objects-segmentation-using-mask-rcnn">read on</a>.</p>
<h3 id="object-detection-using-yolo-v3">Object detection using YOLO-v3</h3>
<p>First of all let&rsquo;s deploy the DL model. The deployment process is similar for
all serverless functions. Need to run <code>nuctl deploy</code> command with appropriate
arguments. To simplify the process, you can use <code>serverless/deploy_cpu.sh</code>
command. Inference of the serverless function is optimized for CPU using
<a href="https://software.intel.com/content/www/us/en/develop/tools/openvino-toolkit.html">Intel OpenVINO framework</a>.</p>
<details>
<summary>
<pre><code class="language-console" data-lang="console">$ serverless/deploy_cpu.sh serverless/openvino/omz/public/yolo-v3-tf/
</code></pre></summary>
<pre><code class="language-console" data-lang="console">Deploying serverless/openvino/omz/public/yolo-v3-tf function...
21.07.12 15:55:17.314                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.07.12 15:55:17.314                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.07.12 15:55:17.682                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;openvino-omz-public-yolo-v3-tf&quot;}
21.07.12 15:55:17.739                     nuctl (I) Staging files and preparing base images
21.07.12 15:55:17.743                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;}
21.07.12 15:55:17.743     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.07.12 15:55:21.048     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.07.12 15:55:24.595            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;}
21.07.12 15:55:30.359            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.07.12 15:55:30.359            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;}
21.07.12 15:55:30.359                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;openvino-omz-public-yolo-v3-tf&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;openvino&quot;,&quot;name&quot;:&quot;YOLO v3&quot;,&quot;spec&quot;:&quot;[\n  { \&quot;id\&quot;: 0, \&quot;name\&quot;: \&quot;person\&quot; },\n  { \&quot;id\&quot;: 1, \&quot;name\&quot;: \&quot;bicycle\&quot; },\n  { \&quot;id\&quot;: 2, \&quot;name\&quot;: \&quot;car\&quot; },\n  { \&quot;id\&quot;: 3, \&quot;name\&quot;: \&quot;motorbike\&quot; },\n  { \&quot;id\&quot;: 4, \&quot;name\&quot;: \&quot;aeroplane\&quot; },\n  { \&quot;id\&quot;: 5, \&quot;name\&quot;: \&quot;bus\&quot; },\n  { \&quot;id\&quot;: 6, \&quot;name\&quot;: \&quot;train\&quot; },\n  { \&quot;id\&quot;: 7, \&quot;name\&quot;: \&quot;truck\&quot; },\n  { \&quot;id\&quot;: 8, \&quot;name\&quot;: \&quot;boat\&quot; },\n  { \&quot;id\&quot;: 9, \&quot;name\&quot;: \&quot;traffic light\&quot; },\n  { \&quot;id\&quot;: 10, \&quot;name\&quot;: \&quot;fire hydrant\&quot; },\n  { \&quot;id\&quot;: 11, \&quot;name\&quot;: \&quot;stop sign\&quot; },\n  { \&quot;id\&quot;: 12, \&quot;name\&quot;: \&quot;parking meter\&quot; },\n  { \&quot;id\&quot;: 13, \&quot;name\&quot;: \&quot;bench\&quot; },\n  { \&quot;id\&quot;: 14, \&quot;name\&quot;: \&quot;bird\&quot; },\n  { \&quot;id\&quot;: 15, \&quot;name\&quot;: \&quot;cat\&quot; },\n  { \&quot;id\&quot;: 16, \&quot;name\&quot;: \&quot;dog\&quot; },\n  { \&quot;id\&quot;: 17, \&quot;name\&quot;: \&quot;horse\&quot; },\n  { \&quot;id\&quot;: 18, \&quot;name\&quot;: \&quot;sheep\&quot; },\n  { \&quot;id\&quot;: 19, \&quot;name\&quot;: \&quot;cow\&quot; },\n  { \&quot;id\&quot;: 20, \&quot;name\&quot;: \&quot;elephant\&quot; },\n  { \&quot;id\&quot;: 21, \&quot;name\&quot;: \&quot;bear\&quot; },\n  { \&quot;id\&quot;: 22, \&quot;name\&quot;: \&quot;zebra\&quot; },\n  { \&quot;id\&quot;: 23, \&quot;name\&quot;: \&quot;giraffe\&quot; },\n  { \&quot;id\&quot;: 24, \&quot;name\&quot;: \&quot;backpack\&quot; },\n  { \&quot;id\&quot;: 25, \&quot;name\&quot;: \&quot;umbrella\&quot; },\n  { \&quot;id\&quot;: 26, \&quot;name\&quot;: \&quot;handbag\&quot; },\n  { \&quot;id\&quot;: 27, \&quot;name\&quot;: \&quot;tie\&quot; },\n  { \&quot;id\&quot;: 28, \&quot;name\&quot;: \&quot;suitcase\&quot; },\n  { \&quot;id\&quot;: 29, \&quot;name\&quot;: \&quot;frisbee\&quot; },\n  { \&quot;id\&quot;: 30, \&quot;name\&quot;: \&quot;skis\&quot; },\n  { \&quot;id\&quot;: 31, \&quot;name\&quot;: \&quot;snowboard\&quot; },\n  { \&quot;id\&quot;: 32, \&quot;name\&quot;: \&quot;sports ball\&quot; },\n  { \&quot;id\&quot;: 33, \&quot;name\&quot;: \&quot;kite\&quot; },\n  { \&quot;id\&quot;: 34, \&quot;name\&quot;: \&quot;baseball bat\&quot; },\n  { \&quot;id\&quot;: 35, \&quot;name\&quot;: \&quot;baseball glove\&quot; },\n  { \&quot;id\&quot;: 36, \&quot;name\&quot;: \&quot;skateboard\&quot; },\n  { \&quot;id\&quot;: 37, \&quot;name\&quot;: \&quot;surfboard\&quot; },\n  { \&quot;id\&quot;: 38, \&quot;name\&quot;: \&quot;tennis racket\&quot; },\n  { \&quot;id\&quot;: 39, \&quot;name\&quot;: \&quot;bottle\&quot; },\n  { \&quot;id\&quot;: 40, \&quot;name\&quot;: \&quot;wine glass\&quot; },\n  { \&quot;id\&quot;: 41, \&quot;name\&quot;: \&quot;cup\&quot; },\n  { \&quot;id\&quot;: 42, \&quot;name\&quot;: \&quot;fork\&quot; },\n  { \&quot;id\&quot;: 43, \&quot;name\&quot;: \&quot;knife\&quot; },\n  { \&quot;id\&quot;: 44, \&quot;name\&quot;: \&quot;spoon\&quot; },\n  { \&quot;id\&quot;: 45, \&quot;name\&quot;: \&quot;bowl\&quot; },\n  { \&quot;id\&quot;: 46, \&quot;name\&quot;: \&quot;banana\&quot; },\n  { \&quot;id\&quot;: 47, \&quot;name\&quot;: \&quot;apple\&quot; },\n  { \&quot;id\&quot;: 48, \&quot;name\&quot;: \&quot;sandwich\&quot; },\n  { \&quot;id\&quot;: 49, \&quot;name\&quot;: \&quot;orange\&quot; },\n  { \&quot;id\&quot;: 50, \&quot;name\&quot;: \&quot;broccoli\&quot; },\n  { \&quot;id\&quot;: 51, \&quot;name\&quot;: \&quot;carrot\&quot; },\n  { \&quot;id\&quot;: 52, \&quot;name\&quot;: \&quot;hot dog\&quot; },\n  { \&quot;id\&quot;: 53, \&quot;name\&quot;: \&quot;pizza\&quot; },\n  { \&quot;id\&quot;: 54, \&quot;name\&quot;: \&quot;donut\&quot; },\n  { \&quot;id\&quot;: 55, \&quot;name\&quot;: \&quot;cake\&quot; },\n  { \&quot;id\&quot;: 56, \&quot;name\&quot;: \&quot;chair\&quot; },\n  { \&quot;id\&quot;: 57, \&quot;name\&quot;: \&quot;sofa\&quot; },\n  { \&quot;id\&quot;: 58, \&quot;name\&quot;: \&quot;pottedplant\&quot; },\n  { \&quot;id\&quot;: 59, \&quot;name\&quot;: \&quot;bed\&quot; },\n  { \&quot;id\&quot;: 60, \&quot;name\&quot;: \&quot;diningtable\&quot; },\n  { \&quot;id\&quot;: 61, \&quot;name\&quot;: \&quot;toilet\&quot; },\n  { \&quot;id\&quot;: 62, \&quot;name\&quot;: \&quot;tvmonitor\&quot; },\n  { \&quot;id\&quot;: 63, \&quot;name\&quot;: \&quot;laptop\&quot; },\n  { \&quot;id\&quot;: 64, \&quot;name\&quot;: \&quot;mouse\&quot; },\n  { \&quot;id\&quot;: 65, \&quot;name\&quot;: \&quot;remote\&quot; },\n  { \&quot;id\&quot;: 66, \&quot;name\&quot;: \&quot;keyboard\&quot; },\n  { \&quot;id\&quot;: 67, \&quot;name\&quot;: \&quot;cell phone\&quot; },\n  { \&quot;id\&quot;: 68, \&quot;name\&quot;: \&quot;microwave\&quot; },\n  { \&quot;id\&quot;: 69, \&quot;name\&quot;: \&quot;oven\&quot; },\n  { \&quot;id\&quot;: 70, \&quot;name\&quot;: \&quot;toaster\&quot; },\n  { \&quot;id\&quot;: 71, \&quot;name\&quot;: \&quot;sink\&quot; },\n  { \&quot;id\&quot;: 72, \&quot;name\&quot;: \&quot;refrigerator\&quot; },\n  { \&quot;id\&quot;: 73, \&quot;name\&quot;: \&quot;book\&quot; },\n  { \&quot;id\&quot;: 74, \&quot;name\&quot;: \&quot;clock\&quot; },\n  { \&quot;id\&quot;: 75, \&quot;name\&quot;: \&quot;vase\&quot; },\n  { \&quot;id\&quot;: 76, \&quot;name\&quot;: \&quot;scissors\&quot; },\n  { \&quot;id\&quot;: 77, \&quot;name\&quot;: \&quot;teddy bear\&quot; },\n  { \&quot;id\&quot;: 78, \&quot;name\&quot;: \&quot;hair drier\&quot; },\n  { \&quot;id\&quot;: 79, \&quot;name\&quot;: \&quot;toothbrush\&quot; }\n]\n&quot;,&quot;type&quot;:&quot;detector&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;YOLO v3 via Intel OpenVINO&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.6&quot;,&quot;env&quot;:[{&quot;name&quot;:&quot;NUCLIO_PYTHON_EXE_PATH&quot;,&quot;value&quot;:&quot;/opt/nuclio/common/openvino/python3&quot;}],&quot;resources&quot;:{},&quot;image&quot;:&quot;cvat/openvino.omz.public.yolo-v3-tf:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:2,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;volumes&quot;:[{&quot;volume&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;hostPath&quot;:{&quot;path&quot;:&quot;/home/nmanovic/Workspace/cvat/serverless/common&quot;}},&quot;volumeMount&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;mountPath&quot;:&quot;/opt/nuclio/common&quot;}}],&quot;build&quot;:{&quot;image&quot;:&quot;cvat/openvino.omz.public.yolo-v3-tf&quot;,&quot;baseImage&quot;:&quot;openvino/ubuntu18_dev:2020.2&quot;,&quot;directives&quot;:{&quot;preCopy&quot;:[{&quot;kind&quot;:&quot;USER&quot;,&quot;value&quot;:&quot;root&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;ln -s /usr/bin/pip3 /usr/bin/pip&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;/opt/intel/openvino/deployment_tools/open_model_zoo/tools/downloader/downloader.py --name yolo-v3-tf -o /opt/nuclio/open_model_zoo&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;/opt/intel/openvino/deployment_tools/open_model_zoo/tools/downloader/converter.py --name yolo-v3-tf --precisions FP32 -d /opt/nuclio/open_model_zoo -o /opt/nuclio/open_model_zoo&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.07.12 15:55:31.496            nuctl.platform (I) Waiting for function to be ready {&quot;timeout&quot;: 60}
21.07.12 15:55:32.894                     nuctl (I) Function deploy complete {&quot;functionName&quot;: &quot;openvino-omz-public-yolo-v3-tf&quot;, &quot;httpPort&quot;: 49156}
</code></pre></details>
<p>Again, go to <a href="http://localhost:8080/models">models tab</a> and check that you can
see <code>YOLO v3</code> in the list. If you cannot by a reason it means that there are some
problems. Go to one of our public channels and ask for help.</p>
<p>Let us reuse the task which you created for testing <code>SiamMask</code> serverless function
above. Choose the <code>magic wand</code> tool, go to the <code>Detectors</code> tab, and select
<code>YOLO v3</code> model. Press <code>Annotate</code> button and after a couple of seconds you
should see detection results. Do not forget to save annotations.</p>
<p><img src="../../images/yolo_v3_results.jpg" alt="YOLO v3 results"></p>
<p>Also it is possible to run a detector for the whole annotation task. Thus
CVAT will run the serverless function on every frame of the task and submit
results directly into database. For more details please read
<a href="../../docs/manual/advanced/automatic-annotation/">the guide</a>.</p>
<h3 id="objects-segmentation-using-mask-rcnn">Objects segmentation using Mask-RCNN</h3>
<p>If you have a detector, which returns polygons, you can segment objects. One
of such detectors is <code>Mask-RCNN</code>. There are several implementations of the
detector available out of the box:</p>
<ul>
<li><code>serverless/openvino/omz/public/mask_rcnn_inception_resnet_v2_atrous_coco</code> is
optimized using <a href="https://software.intel.com/content/www/us/en/develop/tools/openvino-toolkit.html">Intel OpenVINO framework</a> and works well
if it is run on an Intel CPU.</li>
<li><code>serverless/tensorflow/matterport/mask_rcnn/</code> is optimized for GPU.</li>
</ul>
<p>The deployment process for a serverless function optimized for GPU is similar.
Just need to run <code>serverless/deploy_gpu.sh</code> script. It runs mostly the same
commands but utilize <code>function-gpu.yaml</code> configuration file instead of
<code>function.yaml</code> internally. See next sections if you want to understand the
difference.</p>
<p><em>Note: Please do not run several GPU functions at the same time. In many cases it
will not work out of the box. For now you should manually schedule different
functions on different GPUs and it requires source code modification. Nuclio
autoscaler does not support the local platform (docker).</em></p>
<details>
<summary>
<pre><code class="language-console" data-lang="console">$ serverless/deploy_gpu.sh serverless/tensorflow/matterport/mask_rcnn
</code></pre></summary>
<pre><code class="language-console" data-lang="console">Deploying serverless/tensorflow/matterport/mask_rcnn function...
21.07.12 16:48:48.995                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.07.12 16:48:48.995                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.07.12 16:48:49.356                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;tf-matterport-mask-rcnn&quot;}
21.07.12 16:48:49.470                     nuctl (I) Function already exists, deleting function containers {&quot;functionName&quot;: &quot;tf-matterport-mask-rcnn&quot;}
21.07.12 16:48:50.247                     nuctl (I) Staging files and preparing base images
21.07.12 16:48:50.248                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/tf.matterport.mask_rcnn:latest&quot;}
21.07.12 16:48:50.249     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.07.12 16:48:53.674     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.07.12 16:48:57.424            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/tf.matterport.mask_rcnn:latest&quot;}
21.07.12 16:48:57.763            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/tf.matterport.mask_rcnn:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.07.12 16:48:57.764            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/tf.matterport.mask_rcnn:latest&quot;}
21.07.12 16:48:57.764                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/tf.matterport.mask_rcnn:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;tf-matterport-mask-rcnn&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;tensorflow&quot;,&quot;name&quot;:&quot;Mask RCNN via Tensorflow&quot;,&quot;spec&quot;:&quot;[\n  { \&quot;id\&quot;: 0, \&quot;name\&quot;: \&quot;BG\&quot; },\n  { \&quot;id\&quot;: 1, \&quot;name\&quot;: \&quot;person\&quot; },\n  { \&quot;id\&quot;: 2, \&quot;name\&quot;: \&quot;bicycle\&quot; },\n  { \&quot;id\&quot;: 3, \&quot;name\&quot;: \&quot;car\&quot; },\n  { \&quot;id\&quot;: 4, \&quot;name\&quot;: \&quot;motorcycle\&quot; },\n  { \&quot;id\&quot;: 5, \&quot;name\&quot;: \&quot;airplane\&quot; },\n  { \&quot;id\&quot;: 6, \&quot;name\&quot;: \&quot;bus\&quot; },\n  { \&quot;id\&quot;: 7, \&quot;name\&quot;: \&quot;train\&quot; },\n  { \&quot;id\&quot;: 8, \&quot;name\&quot;: \&quot;truck\&quot; },\n  { \&quot;id\&quot;: 9, \&quot;name\&quot;: \&quot;boat\&quot; },\n  { \&quot;id\&quot;: 10, \&quot;name\&quot;: \&quot;traffic_light\&quot; },\n  { \&quot;id\&quot;: 11, \&quot;name\&quot;: \&quot;fire_hydrant\&quot; },\n  { \&quot;id\&quot;: 12, \&quot;name\&quot;: \&quot;stop_sign\&quot; },\n  { \&quot;id\&quot;: 13, \&quot;name\&quot;: \&quot;parking_meter\&quot; },\n  { \&quot;id\&quot;: 14, \&quot;name\&quot;: \&quot;bench\&quot; },\n  { \&quot;id\&quot;: 15, \&quot;name\&quot;: \&quot;bird\&quot; },\n  { \&quot;id\&quot;: 16, \&quot;name\&quot;: \&quot;cat\&quot; },\n  { \&quot;id\&quot;: 17, \&quot;name\&quot;: \&quot;dog\&quot; },\n  { \&quot;id\&quot;: 18, \&quot;name\&quot;: \&quot;horse\&quot; },\n  { \&quot;id\&quot;: 19, \&quot;name\&quot;: \&quot;sheep\&quot; },\n  { \&quot;id\&quot;: 20, \&quot;name\&quot;: \&quot;cow\&quot; },\n  { \&quot;id\&quot;: 21, \&quot;name\&quot;: \&quot;elephant\&quot; },\n  { \&quot;id\&quot;: 22, \&quot;name\&quot;: \&quot;bear\&quot; },\n  { \&quot;id\&quot;: 23, \&quot;name\&quot;: \&quot;zebra\&quot; },\n  { \&quot;id\&quot;: 24, \&quot;name\&quot;: \&quot;giraffe\&quot; },\n  { \&quot;id\&quot;: 25, \&quot;name\&quot;: \&quot;backpack\&quot; },\n  { \&quot;id\&quot;: 26, \&quot;name\&quot;: \&quot;umbrella\&quot; },\n  { \&quot;id\&quot;: 27, \&quot;name\&quot;: \&quot;handbag\&quot; },\n  { \&quot;id\&quot;: 28, \&quot;name\&quot;: \&quot;tie\&quot; },\n  { \&quot;id\&quot;: 29, \&quot;name\&quot;: \&quot;suitcase\&quot; },\n  { \&quot;id\&quot;: 30, \&quot;name\&quot;: \&quot;frisbee\&quot; },\n  { \&quot;id\&quot;: 31, \&quot;name\&quot;: \&quot;skis\&quot; },\n  { \&quot;id\&quot;: 32, \&quot;name\&quot;: \&quot;snowboard\&quot; },\n  { \&quot;id\&quot;: 33, \&quot;name\&quot;: \&quot;sports_ball\&quot; },\n  { \&quot;id\&quot;: 34, \&quot;name\&quot;: \&quot;kite\&quot; },\n  { \&quot;id\&quot;: 35, \&quot;name\&quot;: \&quot;baseball_bat\&quot; },\n  { \&quot;id\&quot;: 36, \&quot;name\&quot;: \&quot;baseball_glove\&quot; },\n  { \&quot;id\&quot;: 37, \&quot;name\&quot;: \&quot;skateboard\&quot; },\n  { \&quot;id\&quot;: 38, \&quot;name\&quot;: \&quot;surfboard\&quot; },\n  { \&quot;id\&quot;: 39, \&quot;name\&quot;: \&quot;tennis_racket\&quot; },\n  { \&quot;id\&quot;: 40, \&quot;name\&quot;: \&quot;bottle\&quot; },\n  { \&quot;id\&quot;: 41, \&quot;name\&quot;: \&quot;wine_glass\&quot; },\n  { \&quot;id\&quot;: 42, \&quot;name\&quot;: \&quot;cup\&quot; },\n  { \&quot;id\&quot;: 43, \&quot;name\&quot;: \&quot;fork\&quot; },\n  { \&quot;id\&quot;: 44, \&quot;name\&quot;: \&quot;knife\&quot; },\n  { \&quot;id\&quot;: 45, \&quot;name\&quot;: \&quot;spoon\&quot; },\n  { \&quot;id\&quot;: 46, \&quot;name\&quot;: \&quot;bowl\&quot; },\n  { \&quot;id\&quot;: 47, \&quot;name\&quot;: \&quot;banana\&quot; },\n  { \&quot;id\&quot;: 48, \&quot;name\&quot;: \&quot;apple\&quot; },\n  { \&quot;id\&quot;: 49, \&quot;name\&quot;: \&quot;sandwich\&quot; },\n  { \&quot;id\&quot;: 50, \&quot;name\&quot;: \&quot;orange\&quot; },\n  { \&quot;id\&quot;: 51, \&quot;name\&quot;: \&quot;broccoli\&quot; },\n  { \&quot;id\&quot;: 52, \&quot;name\&quot;: \&quot;carrot\&quot; },\n  { \&quot;id\&quot;: 53, \&quot;name\&quot;: \&quot;hot_dog\&quot; },\n  { \&quot;id\&quot;: 54, \&quot;name\&quot;: \&quot;pizza\&quot; },\n  { \&quot;id\&quot;: 55, \&quot;name\&quot;: \&quot;donut\&quot; },\n  { \&quot;id\&quot;: 56, \&quot;name\&quot;: \&quot;cake\&quot; },\n  { \&quot;id\&quot;: 57, \&quot;name\&quot;: \&quot;chair\&quot; },\n  { \&quot;id\&quot;: 58, \&quot;name\&quot;: \&quot;couch\&quot; },\n  { \&quot;id\&quot;: 59, \&quot;name\&quot;: \&quot;potted_plant\&quot; },\n  { \&quot;id\&quot;: 60, \&quot;name\&quot;: \&quot;bed\&quot; },\n  { \&quot;id\&quot;: 61, \&quot;name\&quot;: \&quot;dining_table\&quot; },\n  { \&quot;id\&quot;: 62, \&quot;name\&quot;: \&quot;toilet\&quot; },\n  { \&quot;id\&quot;: 63, \&quot;name\&quot;: \&quot;tv\&quot; },\n  { \&quot;id\&quot;: 64, \&quot;name\&quot;: \&quot;laptop\&quot; },\n  { \&quot;id\&quot;: 65, \&quot;name\&quot;: \&quot;mouse\&quot; },\n  { \&quot;id\&quot;: 66, \&quot;name\&quot;: \&quot;remote\&quot; },\n  { \&quot;id\&quot;: 67, \&quot;name\&quot;: \&quot;keyboard\&quot; },\n  { \&quot;id\&quot;: 68, \&quot;name\&quot;: \&quot;cell_phone\&quot; },\n  { \&quot;id\&quot;: 69, \&quot;name\&quot;: \&quot;microwave\&quot; },\n  { \&quot;id\&quot;: 70, \&quot;name\&quot;: \&quot;oven\&quot; },\n  { \&quot;id\&quot;: 71, \&quot;name\&quot;: \&quot;toaster\&quot; },\n  { \&quot;id\&quot;: 72, \&quot;name\&quot;: \&quot;sink\&quot; },\n  { \&quot;id\&quot;: 73, \&quot;name\&quot;: \&quot;refrigerator\&quot; },\n  { \&quot;id\&quot;: 74, \&quot;name\&quot;: \&quot;book\&quot; },\n  { \&quot;id\&quot;: 75, \&quot;name\&quot;: \&quot;clock\&quot; },\n  { \&quot;id\&quot;: 76, \&quot;name\&quot;: \&quot;vase\&quot; },\n  { \&quot;id\&quot;: 77, \&quot;name\&quot;: \&quot;scissors\&quot; },\n  { \&quot;id\&quot;: 78, \&quot;name\&quot;: \&quot;teddy_bear\&quot; },\n  { \&quot;id\&quot;: 79, \&quot;name\&quot;: \&quot;hair_drier\&quot; },\n  { \&quot;id\&quot;: 80, \&quot;name\&quot;: \&quot;toothbrush\&quot; }\n]\n&quot;,&quot;type&quot;:&quot;detector&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;Mask RCNN optimized for GPU&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.6&quot;,&quot;env&quot;:[{&quot;name&quot;:&quot;MASK_RCNN_DIR&quot;,&quot;value&quot;:&quot;/opt/nuclio/Mask_RCNN&quot;}],&quot;resources&quot;:{&quot;limits&quot;:{&quot;nvidia.com/gpu&quot;:&quot;1&quot;}},&quot;image&quot;:&quot;cvat/tf.matterport.mask_rcnn:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:1,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;volumes&quot;:[{&quot;volume&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;hostPath&quot;:{&quot;path&quot;:&quot;/home/nmanovic/Workspace/cvat/serverless/common&quot;}},&quot;volumeMount&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;mountPath&quot;:&quot;/opt/nuclio/common&quot;}}],&quot;build&quot;:{&quot;functionConfigPath&quot;:&quot;serverless/tensorflow/matterport/mask_rcnn/nuclio/function-gpu.yaml&quot;,&quot;image&quot;:&quot;cvat/tf.matterport.mask_rcnn&quot;,&quot;baseImage&quot;:&quot;tensorflow/tensorflow:1.15.5-gpu-py3&quot;,&quot;directives&quot;:{&quot;postCopy&quot;:[{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;apt update \u0026\u0026 apt install --no-install-recommends -y git curl&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;git clone --depth 1 https://github.com/matterport/Mask_RCNN.git&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -L https://github.com/matterport/Mask_RCNN/releases/download/v2.0/mask_rcnn_coco.h5 -o Mask_RCNN/mask_rcnn_coco.h5&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;pip3 install numpy cython pyyaml keras==2.1.0 scikit-image Pillow&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.07.12 16:48:59.071            nuctl.platform (I) Waiting for function to be ready {&quot;timeout&quot;: 60}
21.07.12 16:49:00.437                     nuctl (I) Function deploy complete {&quot;functionName&quot;: &quot;tf-matterport-mask-rcnn&quot;, &quot;httpPort&quot;: 49155}
</code></pre></details>
<p>Now you should be able to annotate objects using segmentation masks.</p>
<p><img src="../../images/mask_rcnn_results.jpg" alt="Mask RCNN results"></p>
<h2 id="adding-your-own-dl-models">Adding your own DL models</h2>
<h3 id="choose-a-dl-model">Choose a DL model</h3>
<p>For the tutorial I will choose a popular AI library with a lot of models inside.
In your case it can be your own model. If it is based on detectron2 it
will be easy to integrate. Just follow the tutorial.</p>
<p><a href="https://github.com/facebookresearch/detectron2">Detectron2</a> is Facebook AI Research&rsquo;s next generation
library that provides state-of-the-art detection and segmentation algorithms.
It is the successor of Detectron and maskrcnn-benchmark. It supports a number
of computer vision research projects and production applications in Facebook.</p>
<p>Clone the repository somewhere. I assume that all other experiments will be
run from the cloned <code>detectron2</code> directory.</p>
<pre><code class="language-console" data-lang="console">$ git clone https://github.com/facebookresearch/detectron2
$ cd detectron2
</code></pre><h3 id="run-local-experiments">Run local experiments</h3>
<p>Let&rsquo;s run a detection model locally. First of all need to
<a href="https://detectron2.readthedocs.io/en/latest/tutorials/install.html">install requirements</a> for the library.</p>
<p>In my case I have Ubuntu 20.04 with python 3.8.5. I installed
<a href="https://pytorch.org/get-started/locally/">PyTorch 1.8.1</a> for Linux with pip, python, and CPU inside
a virtual environment. Follow <a href="https://github.com/opencv/opencv-python">opencv-python</a>
installation guide to get the library for demo and visualization.</p>
<pre><code class="language-console" data-lang="console">$ python3 -m venv .detectron2
$ . .detectron2/bin/activate
$ pip install torch==1.8.1+cpu torchvision==0.9.1+cpu torchaudio==0.8.1 -f https://download.pytorch.org/whl/torch_stable.html
$ pip install opencv-python
</code></pre><p>Install the detectron2 library from your local clone (you should be inside
detectron2 directory).</p>
<pre><code class="language-console" data-lang="console">$ python -m pip install -e .
</code></pre><p>After the library from Facebook AI Research is installed, we can run a couple
of experiments. See the <a href="https://detectron2.readthedocs.io/en/latest/tutorials/getting_started.html">official tutorial</a> for more
examples. I decided to experiment with <a href="https://github.com/facebookresearch/detectron2/blob/master/MODEL_ZOO.md#retinanet">RetinaNet</a>. First
step is to download model weights.</p>
<pre><code class="language-console" data-lang="console">$ curl -O https://dl.fbaipublicfiles.com/detectron2/COCO-Detection/retinanet_R_101_FPN_3x/190397697/model_final_971ab9.pkl
</code></pre><p>To run experiments let&rsquo;s download an image with cats from wikipedia.</p>
<pre><code class="language-console" data-lang="console">$ curl -O https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Cat_poster_1.jpg/1920px-Cat_poster_1.jpg
</code></pre><p>Finally let&rsquo;s run the DL model inference on CPU. If all is fine, you will see
a window with cats and bounding boxes around them with scores.</p>
<pre><code class="language-console" data-lang="console">$ python demo/demo.py --config-file configs/COCO-Detection/retinanet_R_101_FPN_3x.yaml \
    --input 1920px-Cat_poster_1.jpg --opts MODEL.WEIGHTS model_final_971ab9.pkl MODEL.DEVICE cpu
</code></pre><p><img src="../../images/detectron2_detected_cats.jpg" alt="Cats detected by RetinaNet R101"></p>
<p>Next step is to minimize <code>demo/demo.py</code> script and keep code which is necessary to load,
run, and interpret output of the model only. Let&rsquo;s hard code parameters and remove
argparse. Keep only code which is responsible for working with an image. There is
no common advice how to minimize some code.</p>
<p>Finally you should get something like the code below which has fixed config, read a
predefined image, initialize predictor, and run inference. As the final step it prints
all detected bounding boxes with scores and labels.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">detectron2.config</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">get_cfg</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">detectron2.data.detection_utils</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">read_image</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">detectron2.engine.defaults</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">DefaultPredictor</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">detectron2.data.datasets.builtin_meta</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">COCO_CATEGORIES</span>

<span style="color:#000">CONFIG_FILE</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;configs/COCO-Detection/retinanet_R_101_FPN_3x.yaml&#34;</span>
<span style="color:#000">CONFIG_OPTS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;MODEL.WEIGHTS&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;model_final_971ab9.pkl&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;MODEL.DEVICE&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;cpu&#34;</span><span style="color:#000;font-weight:bold">]</span>
<span style="color:#000">CONFIDENCE_THRESHOLD</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0.5</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setup_cfg</span><span style="color:#000;font-weight:bold">():</span>
    <span style="color:#000">cfg</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_cfg</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">merge_from_file</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">CONFIG_FILE</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">merge_from_list</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">CONFIG_OPTS</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">RETINANET</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">SCORE_THRESH_TEST</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ROI_HEADS</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">SCORE_THRESH_TEST</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">PANOPTIC_FPN</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">COMBINE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">INSTANCES_CONFIDENCE_THRESH</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">freeze</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">cfg</span>


<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">__name__</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;__main__&#34;</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#000">cfg</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">setup_cfg</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#204a87">input</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;1920px-Cat_poster_1.jpg&#34;</span>
    <span style="color:#000">img</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">read_image</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">input</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">format</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;BGR&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">predictor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DefaultPredictor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">predictions</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">predictor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">img</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">instances</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">predictions</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;instances&#39;</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000">pred_boxes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pred_boxes</span>
    <span style="color:#000">scores</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">scores</span>
    <span style="color:#000">pred_classes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pred_classes</span>
    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">box</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">score</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">label</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#204a87">zip</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">pred_boxes</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">scores</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">pred_classes</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">label</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">COCO_CATEGORIES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87">int</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">label</span><span style="color:#000;font-weight:bold">)][</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">]</span>
        <span style="color:#204a87;font-weight:bold">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">box</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">tolist</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#204a87">float</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">score</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">label</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h3 id="dl-model-as-a-serverless-function">DL model as a serverless function</h3>
<p>When we know how to run the DL model locally, we can prepare a serverless
function which can be used by CVAT to annotate data. Let&rsquo;s see how function.yaml
will look like&hellip;</p>
<p>Let&rsquo;s look at <a href="https://raw.githubusercontent.com/openvinotoolkit/cvat/38b774046d41d604ed85a521587e4bacce61b69c/serverless/tensorflow/faster_rcnn_inception_v2_coco/nuclio/function.yaml">faster_rcnn_inception_v2_coco</a> serverless
function configuration as an example and try adapting it to our case.
First of all let&rsquo;s invent an unique name for the new function:
<code>pth.facebookresearch.detectron2.retinanet_r101</code>. Section <code>annotations</code>
describes our function for CVAT serverless subsystem:</p>
<ul>
<li><code>annotations.name</code> is a display name</li>
<li><code>annotations.type</code> is a type of the serverless function. It can have
several different values. Basically it affects input and output of the function.
In our case it has <code>detector</code> type and it means that the integrated DL model can
generate shapes with labels for an image.</li>
<li><code>annotations.framework</code> is used for information only and can have arbitrary
value. Usually it has values like OpenVINO, PyTorch, TensorFlow, etc.</li>
<li><code>annotations.spec</code> describes the list of labels which the model supports. In
the case the DL model was trained on MS COCO dataset and the list of labels
correspond to the dataset.</li>
<li><code>spec.description</code> is used to provide basic information for the model.</li>
</ul>
<p>All other parameters are described in <a href="https://nuclio.io/docs/latest/reference/function-configuration/function-configuration-reference/">Nuclio documentation</a>.</p>
<ul>
<li><code>spec.handler</code> is the entry point to your function.</li>
<li><code>spec.runtime</code> is the name of the language runtime.</li>
<li><code>spec.eventTimeout</code> is the global event timeout</li>
</ul>
<p>Next step is to describe how to build our serverless function:</p>
<ul>
<li><code>spec.build.image</code> is the name of your docker image</li>
<li><code>spec.build.baseImage</code> is the name of a base container image from which to build the function</li>
<li><code>spec.build.directives</code> are commands to build your docker image</li>
</ul>
<p>In our case we start from Ubuntu 20.04 base image, install <code>curl</code> to download
weights for our model, <code>git</code> to clone detectron2 project from GitHub, and
<code>python</code> together with <code>pip</code>. Repeat installation steps which we used to setup
the DL model locally with minor modifications.</p>
<p>For Nuclio platform we have to specify a couple of more parameters:</p>
<ul>
<li><code>spec.triggers.myHttpTrigger</code> describes <a href="https://nuclio.io/docs/latest/reference/triggers/http/">HTTP trigger</a>
to handle incoming HTTP requests.</li>
<li><code>spec.platform</code> describes some important parameters to run your functions like
<code>restartPolicy</code> and <code>mountMode</code>. Read Nuclio documentation for more details.</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">metadata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pth.facebookresearch.detectron2.retinanet_r101</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">namespace</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cvat</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RetinaNet R101</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">detector</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">framework</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pytorch</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">      [
</span><span style="color:#8f5902;font-style:italic">        { &#34;id&#34;: 1, &#34;name&#34;: &#34;person&#34; },
</span><span style="color:#8f5902;font-style:italic">        { &#34;id&#34;: 2, &#34;name&#34;: &#34;bicycle&#34; },
</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">        ...
</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">        { &#34;id&#34;:89, &#34;name&#34;: &#34;hair_drier&#34; },
</span><span style="color:#8f5902;font-style:italic">        { &#34;id&#34;:90, &#34;name&#34;: &#34;toothbrush&#34; }
</span><span style="color:#8f5902;font-style:italic">      ]</span><span style="color:#f8f8f8;text-decoration:underline">      
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RetinaNet R101 from Detectron2</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">runtime</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;python:3.8&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">handler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">main:handler</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">eventTimeout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">30s</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">build</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cvat/pth.facebookresearch.detectron2.retinanet_r101</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">baseImage</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ubuntu:20.04</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">directives</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">preCopy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ENV</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEBIAN_FRONTEND=noninteractive</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">apt-get update &amp;&amp; apt-get -y install curl git python3 python3-pip</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">WORKDIR</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/opt/nuclio</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pip3 install torch==1.8.1+cpu torchvision==0.9.1+cpu torchaudio==0.8.1 -f https://download.pytorch.org/whl/torch_stable.html</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pip3 install &#39;git+https://github.com/facebookresearch/detectron2@v0.4&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">curl -O https://dl.fbaipublicfiles.com/detectron2/COCO-Detection/retinanet_R_101_FPN_3x/190397697/model_final_971ab9.pkl</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ln -s /usr/bin/pip3 /usr/local/bin/pip</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">triggers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">myHttpTrigger</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">maxWorkers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;http&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">workerAvailabilityTimeoutMilliseconds</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10000</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">attributes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">maxRequestBodySize</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">33554432</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 32MB</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">platform</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">attributes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">restartPolicy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">always</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">maximumRetryCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">mountMode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">volume</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>Full code can be found here: <a href="https://github.com/openvinotoolkit/cvat/blob/b2f616859ca64687c385e636b4a25014fbb9d17c/serverless/pytorch/facebookresearch/detectron2/retinanet/nuclio/function.yaml">detectron2/retinanet/nuclio/function.yaml</a></p>
<p>Next step is to adapt our source code which we implemented to run the DL model
locally to requirements of Nuclio platform. First step is to load the model
into memory using <code>init_context(context)</code> function. Read more about the function
in <a href="https://nuclio.io/docs/latest/concepts/best-practices-and-common-pitfalls/">Best Practices and Common Pitfalls</a>.</p>
<p>After that we need to accept incoming HTTP requests, run inference,
reply with detection results. For the process our entry point is resposible
which we specified in our function specification <code>handler(context, event)</code>.
Again in accordance to function specification the entry point should be
located inside <code>main.py</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">init_context</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Init context...  0%&#34;</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">cfg</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_config</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;COCO-Detection/retinanet_R_101_FPN_3x.yaml&#39;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">merge_from_list</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">CONFIG_OPTS</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">RETINANET</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">SCORE_THRESH_TEST</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ROI_HEADS</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">SCORE_THRESH_TEST</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MODEL</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">PANOPTIC_FPN</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">COMBINE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">INSTANCES_CONFIDENCE_THRESH</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CONFIDENCE_THRESHOLD</span>
    <span style="color:#000">cfg</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">freeze</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">predictor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DefaultPredictor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">cfg</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">model_handler</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">predictor</span>

    <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Init context...100%&#34;</span><span style="color:#000;font-weight:bold">)</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">handler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">event</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">info</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Run retinanet-R101 model&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">event</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">body</span>
    <span style="color:#000">buf</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">io</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">BytesIO</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">base64</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">b64decode</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;image&#34;</span><span style="color:#000;font-weight:bold">]))</span>
    <span style="color:#000">threshold</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">float</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;threshold&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.5</span><span style="color:#000;font-weight:bold">))</span>
    <span style="color:#000">image</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">convert_PIL_to_numpy</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Image</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">open</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">buf</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">format</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;BGR&#34;</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">predictions</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">model_handler</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">image</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">instances</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">predictions</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;instances&#39;</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000">pred_boxes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pred_boxes</span>
    <span style="color:#000">scores</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">scores</span>
    <span style="color:#000">pred_classes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">instances</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pred_classes</span>
    <span style="color:#000">results</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[]</span>
    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">box</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">score</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">label</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#204a87">zip</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">pred_boxes</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">scores</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">pred_classes</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">label</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">COCO_CATEGORIES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87">int</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">label</span><span style="color:#000;font-weight:bold">)][</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">]</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">score</span> <span style="color:#ce5c00;font-weight:bold">&gt;=</span> <span style="color:#000">threshold</span><span style="color:#000;font-weight:bold">:</span>
            <span style="color:#000">results</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">({</span>
                <span style="color:#4e9a06">&#34;confidence&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">str</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">float</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">score</span><span style="color:#000;font-weight:bold">)),</span>
                <span style="color:#4e9a06">&#34;label&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">label</span><span style="color:#000;font-weight:bold">,</span>
                <span style="color:#4e9a06">&#34;points&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">box</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">tolist</span><span style="color:#000;font-weight:bold">(),</span>
                <span style="color:#4e9a06">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;rectangle&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000;font-weight:bold">})</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Response</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">body</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">json</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">dumps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">results</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">headers</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{},</span>
        <span style="color:#000">content_type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;application/json&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">status_code</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>

</code></pre></div><p>Full code can be found here: <a href="https://github.com/openvinotoolkit/cvat/blob/b2f616859ca64687c385e636b4a25014fbb9d17c/serverless/pytorch/facebookresearch/detectron2/retinanet/nuclio/main.py">detectron2/retinanet/nuclio/main.py</a></p>
<h3 id="deploy-retinanet-serverless-function">Deploy RetinaNet serverless function</h3>
<p>To use the new serverless function you have to deploy it using <code>nuctl</code> command.
The actual deployment process is described in
<a href="../../docs/administration/advanced/installation_automatic_annotation">automatic annotation guide</a>.</p>
<details>
<summary>
<pre><code class="language-console" data-lang="console">$ ./serverless/deploy_cpu.sh ./serverless/pytorch/facebookresearch/detectron2/retinanet/
</code></pre></summary>
<pre><code class="language-console" data-lang="console">21.07.21 15:20:31.011                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.07.21 15:20:31.011                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.07.21 15:20:31.407                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;pth.facebookresearch.detectron2.retinanet_r101&quot;}
21.07.21 15:20:31.497                     nuctl (I) Function already exists, deleting function containers {&quot;functionName&quot;: &quot;pth.facebookresearch.detectron2.retinanet_r101&quot;}
21.07.21 15:20:31.914                     nuctl (I) Staging files and preparing base images
21.07.21 15:20:31.915                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;}
21.07.21 15:20:31.916     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.07.21 15:20:34.495     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.07.21 15:20:37.524            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;}
21.07.21 15:20:37.852            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.07.21 15:20:37.853            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;}
21.07.21 15:20:37.853                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;pth.facebookresearch.detectron2.retinanet_r101&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;pytorch&quot;,&quot;name&quot;:&quot;RetinaNet R101&quot;,&quot;spec&quot;:&quot;[\n  { \&quot;id\&quot;: 1, \&quot;name\&quot;: \&quot;person\&quot; },\n  { \&quot;id\&quot;: 2, \&quot;name\&quot;: \&quot;bicycle\&quot; },\n  { \&quot;id\&quot;: 3, \&quot;name\&quot;: \&quot;car\&quot; },\n  { \&quot;id\&quot;: 4, \&quot;name\&quot;: \&quot;motorcycle\&quot; },\n  { \&quot;id\&quot;: 5, \&quot;name\&quot;: \&quot;airplane\&quot; },\n  { \&quot;id\&quot;: 6, \&quot;name\&quot;: \&quot;bus\&quot; },\n  { \&quot;id\&quot;: 7, \&quot;name\&quot;: \&quot;train\&quot; },\n  { \&quot;id\&quot;: 8, \&quot;name\&quot;: \&quot;truck\&quot; },\n  { \&quot;id\&quot;: 9, \&quot;name\&quot;: \&quot;boat\&quot; },\n  { \&quot;id\&quot;:10, \&quot;name\&quot;: \&quot;traffic_light\&quot; },\n  { \&quot;id\&quot;:11, \&quot;name\&quot;: \&quot;fire_hydrant\&quot; },\n  { \&quot;id\&quot;:13, \&quot;name\&quot;: \&quot;stop_sign\&quot; },\n  { \&quot;id\&quot;:14, \&quot;name\&quot;: \&quot;parking_meter\&quot; },\n  { \&quot;id\&quot;:15, \&quot;name\&quot;: \&quot;bench\&quot; },\n  { \&quot;id\&quot;:16, \&quot;name\&quot;: \&quot;bird\&quot; },\n  { \&quot;id\&quot;:17, \&quot;name\&quot;: \&quot;cat\&quot; },\n  { \&quot;id\&quot;:18, \&quot;name\&quot;: \&quot;dog\&quot; },\n  { \&quot;id\&quot;:19, \&quot;name\&quot;: \&quot;horse\&quot; },\n  { \&quot;id\&quot;:20, \&quot;name\&quot;: \&quot;sheep\&quot; },\n  { \&quot;id\&quot;:21, \&quot;name\&quot;: \&quot;cow\&quot; },\n  { \&quot;id\&quot;:22, \&quot;name\&quot;: \&quot;elephant\&quot; },\n  { \&quot;id\&quot;:23, \&quot;name\&quot;: \&quot;bear\&quot; },\n  { \&quot;id\&quot;:24, \&quot;name\&quot;: \&quot;zebra\&quot; },\n  { \&quot;id\&quot;:25, \&quot;name\&quot;: \&quot;giraffe\&quot; },\n  { \&quot;id\&quot;:27, \&quot;name\&quot;: \&quot;backpack\&quot; },\n  { \&quot;id\&quot;:28, \&quot;name\&quot;: \&quot;umbrella\&quot; },\n  { \&quot;id\&quot;:31, \&quot;name\&quot;: \&quot;handbag\&quot; },\n  { \&quot;id\&quot;:32, \&quot;name\&quot;: \&quot;tie\&quot; },\n  { \&quot;id\&quot;:33, \&quot;name\&quot;: \&quot;suitcase\&quot; },\n  { \&quot;id\&quot;:34, \&quot;name\&quot;: \&quot;frisbee\&quot; },\n  { \&quot;id\&quot;:35, \&quot;name\&quot;: \&quot;skis\&quot; },\n  { \&quot;id\&quot;:36, \&quot;name\&quot;: \&quot;snowboard\&quot; },\n  { \&quot;id\&quot;:37, \&quot;name\&quot;: \&quot;sports_ball\&quot; },\n  { \&quot;id\&quot;:38, \&quot;name\&quot;: \&quot;kite\&quot; },\n  { \&quot;id\&quot;:39, \&quot;name\&quot;: \&quot;baseball_bat\&quot; },\n  { \&quot;id\&quot;:40, \&quot;name\&quot;: \&quot;baseball_glove\&quot; },\n  { \&quot;id\&quot;:41, \&quot;name\&quot;: \&quot;skateboard\&quot; },\n  { \&quot;id\&quot;:42, \&quot;name\&quot;: \&quot;surfboard\&quot; },\n  { \&quot;id\&quot;:43, \&quot;name\&quot;: \&quot;tennis_racket\&quot; },\n  { \&quot;id\&quot;:44, \&quot;name\&quot;: \&quot;bottle\&quot; },\n  { \&quot;id\&quot;:46, \&quot;name\&quot;: \&quot;wine_glass\&quot; },\n  { \&quot;id\&quot;:47, \&quot;name\&quot;: \&quot;cup\&quot; },\n  { \&quot;id\&quot;:48, \&quot;name\&quot;: \&quot;fork\&quot; },\n  { \&quot;id\&quot;:49, \&quot;name\&quot;: \&quot;knife\&quot; },\n  { \&quot;id\&quot;:50, \&quot;name\&quot;: \&quot;spoon\&quot; },\n  { \&quot;id\&quot;:51, \&quot;name\&quot;: \&quot;bowl\&quot; },\n  { \&quot;id\&quot;:52, \&quot;name\&quot;: \&quot;banana\&quot; },\n  { \&quot;id\&quot;:53, \&quot;name\&quot;: \&quot;apple\&quot; },\n  { \&quot;id\&quot;:54, \&quot;name\&quot;: \&quot;sandwich\&quot; },\n  { \&quot;id\&quot;:55, \&quot;name\&quot;: \&quot;orange\&quot; },\n  { \&quot;id\&quot;:56, \&quot;name\&quot;: \&quot;broccoli\&quot; },\n  { \&quot;id\&quot;:57, \&quot;name\&quot;: \&quot;carrot\&quot; },\n  { \&quot;id\&quot;:58, \&quot;name\&quot;: \&quot;hot_dog\&quot; },\n  { \&quot;id\&quot;:59, \&quot;name\&quot;: \&quot;pizza\&quot; },\n  { \&quot;id\&quot;:60, \&quot;name\&quot;: \&quot;donut\&quot; },\n  { \&quot;id\&quot;:61, \&quot;name\&quot;: \&quot;cake\&quot; },\n  { \&quot;id\&quot;:62, \&quot;name\&quot;: \&quot;chair\&quot; },\n  { \&quot;id\&quot;:63, \&quot;name\&quot;: \&quot;couch\&quot; },\n  { \&quot;id\&quot;:64, \&quot;name\&quot;: \&quot;potted_plant\&quot; },\n  { \&quot;id\&quot;:65, \&quot;name\&quot;: \&quot;bed\&quot; },\n  { \&quot;id\&quot;:67, \&quot;name\&quot;: \&quot;dining_table\&quot; },\n  { \&quot;id\&quot;:70, \&quot;name\&quot;: \&quot;toilet\&quot; },\n  { \&quot;id\&quot;:72, \&quot;name\&quot;: \&quot;tv\&quot; },\n  { \&quot;id\&quot;:73, \&quot;name\&quot;: \&quot;laptop\&quot; },\n  { \&quot;id\&quot;:74, \&quot;name\&quot;: \&quot;mouse\&quot; },\n  { \&quot;id\&quot;:75, \&quot;name\&quot;: \&quot;remote\&quot; },\n  { \&quot;id\&quot;:76, \&quot;name\&quot;: \&quot;keyboard\&quot; },\n  { \&quot;id\&quot;:77, \&quot;name\&quot;: \&quot;cell_phone\&quot; },\n  { \&quot;id\&quot;:78, \&quot;name\&quot;: \&quot;microwave\&quot; },\n  { \&quot;id\&quot;:79, \&quot;name\&quot;: \&quot;oven\&quot; },\n  { \&quot;id\&quot;:80, \&quot;name\&quot;: \&quot;toaster\&quot; },\n  { \&quot;id\&quot;:81, \&quot;name\&quot;: \&quot;sink\&quot; },\n  { \&quot;id\&quot;:83, \&quot;name\&quot;: \&quot;refrigerator\&quot; },\n  { \&quot;id\&quot;:84, \&quot;name\&quot;: \&quot;book\&quot; },\n  { \&quot;id\&quot;:85, \&quot;name\&quot;: \&quot;clock\&quot; },\n  { \&quot;id\&quot;:86, \&quot;name\&quot;: \&quot;vase\&quot; },\n  { \&quot;id\&quot;:87, \&quot;name\&quot;: \&quot;scissors\&quot; },\n  { \&quot;id\&quot;:88, \&quot;name\&quot;: \&quot;teddy_bear\&quot; },\n  { \&quot;id\&quot;:89, \&quot;name\&quot;: \&quot;hair_drier\&quot; },\n  { \&quot;id\&quot;:90, \&quot;name\&quot;: \&quot;toothbrush\&quot; }\n]\n&quot;,&quot;type&quot;:&quot;detector&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;RetinaNet R101 from Detectron2&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.8&quot;,&quot;resources&quot;:{},&quot;image&quot;:&quot;cvat/pth.facebookresearch.detectron2.retinanet_r101:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:2,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;volumes&quot;:[{&quot;volume&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;hostPath&quot;:{&quot;path&quot;:&quot;/home/nmanovic/Workspace/cvat/serverless/common&quot;}},&quot;volumeMount&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;mountPath&quot;:&quot;/opt/nuclio/common&quot;}}],&quot;build&quot;:{&quot;image&quot;:&quot;cvat/pth.facebookresearch.detectron2.retinanet_r101&quot;,&quot;baseImage&quot;:&quot;ubuntu:20.04&quot;,&quot;directives&quot;:{&quot;preCopy&quot;:[{&quot;kind&quot;:&quot;ENV&quot;,&quot;value&quot;:&quot;DEBIAN_FRONTEND=noninteractive&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;apt-get update \u0026\u0026 apt-get -y install curl git python3 python3-pip&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;pip3 install torch==1.8.1+cpu torchvision==0.9.1+cpu torchaudio==0.8.1 -f https://download.pytorch.org/whl/torch_stable.html&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;pip3 install 'git+https://github.com/facebookresearch/detectron2@v0.4'&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -O https://dl.fbaipublicfiles.com/detectron2/COCO-Detection/retinanet_R_101_FPN_3x/190397697/model_final_971ab9.pkl&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;ln -s /usr/bin/pip3 /usr/local/bin/pip&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.07.21 15:20:39.042            nuctl.platform (I) Waiting for function to be ready {&quot;timeout&quot;: 60}
21.07.21 15:20:40.480                     nuctl (I) Function deploy complete {&quot;functionName&quot;: &quot;pth.facebookresearch.detectron2.retinanet_r101&quot;, &quot;httpPort&quot;: 49153}
</code></pre></details>
<h2 id="advanced-capabilities">Advanced capabilities</h2>
<h3 id="optimize-using-gpu">Optimize using GPU</h3>
<p>To optimize a function for a specific device (e.g. GPU), basically you just need
to modify instructions above to run the function on the target device. In most
cases it will be necessary to modify installation instructions only.</p>
<p>For <code>RetinaNet R101</code> which was added above modifications will look like:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#a40000">--- function.yaml	2021-06-25 21:06:51.603281723 +0300
</span><span style="color:#a40000"></span><span style="color:#00a000">+++ function-gpu.yaml	2021-07-07 22:38:53.454202637 +0300
</span><span style="color:#00a000"></span><span style="color:#800080;font-weight:bold">@@ -90,7 +90,7 @@
</span><span style="color:#800080;font-weight:bold"></span>       ]

 spec:
<span style="color:#a40000">-  description: RetinaNet R101 from Detectron2
</span><span style="color:#a40000"></span><span style="color:#00a000">+  description: RetinaNet R101 from Detectron2 optimized for GPU
</span><span style="color:#00a000"></span>   runtime: &#39;python:3.8&#39;
   handler: main:handler
   eventTimeout: 30s
<span style="color:#800080;font-weight:bold">@@ -108,7 +108,7 @@
</span><span style="color:#800080;font-weight:bold"></span>         - kind: WORKDIR
           value: /opt/nuclio
         - kind: RUN
<span style="color:#a40000">-          value: pip3 install torch==1.8.1+cpu torchvision==0.9.1+cpu torchaudio==0.8.1 -f https://download.pytorch.org/whl/torch_stable.html
</span><span style="color:#a40000"></span><span style="color:#00a000">+          value: pip3 install torch==1.8.1+cu111 torchvision==0.9.1+cu111 torchaudio==0.8.1 -f https://download.pytorch.org/whl/torch_stable.html
</span><span style="color:#00a000"></span>         - kind: RUN
           value: git clone https://github.com/facebookresearch/detectron2
         - kind: RUN
<span style="color:#800080;font-weight:bold">@@ -120,12 +120,16 @@
</span><span style="color:#800080;font-weight:bold"></span>
   triggers:
     myHttpTrigger:
<span style="color:#a40000">-      maxWorkers: 2
</span><span style="color:#a40000"></span><span style="color:#00a000">+      maxWorkers: 1
</span><span style="color:#00a000"></span>       kind: &#39;http&#39;
       workerAvailabilityTimeoutMilliseconds: 10000
       attributes:
         maxRequestBodySize: 33554432 # 32MB

<span style="color:#00a000">+  resources:
</span><span style="color:#00a000">+    limits:
</span><span style="color:#00a000">+      nvidia.com/gpu: 1
</span><span style="color:#00a000">+
</span><span style="color:#00a000"></span>   platform:
     attributes:
       restartPolicy:
</code></pre></div><p><em>Note: GPU has very limited amount of memory and it doesn&rsquo;t allow to run
multiple serverless functions in parallel for now using free open-source
Nuclio version on the local platform because scaling to zero feature is
absent. Theoretically it is possible to run different functions on different
GPUs, but it requires to change source code on corresponding serverless
functions to choose a free GPU.</em></p>
<h3 id="debugging-a-serverless-function">Debugging a serverless function</h3>
<p>Let&rsquo;s say you have a problem with your serverless function and want to debug it.
Of course you can use <code>context.logger.info</code> or similar methods to print the
intermediate state of your function.
Another way is to debug using <a href="https://code.visualstudio.com/">Visual Studio Code</a>.
Please see instructions below to setup your environment step by step.</p>
<p>Let&rsquo;s modify our function.yaml to include <a href="https://github.com/microsoft/debugpy">debugpy</a>
package and specify that <code>maxWorkers</code> count is 1. Otherwise both workers will
try to use the same port and it will lead to an exception in python code.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RUN</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pip3 install debugpy</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">triggers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">myHttpTrigger</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">maxWorkers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>Change <code>main.py</code> to listen to a port (e.g. 5678). Insert code below
in the beginning of your file with entry point.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">debugpy</span>
<span style="color:#000">debugpy</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">listen</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">5678</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><p>After these changes deploy the serverless function once again. For
<code>serverless/pytorch/facebookresearch/detectron2/retinanet/nuclio/</code> you should
run the command below:</p>
<pre><code class="language-console" data-lang="console">$ serverless/deploy_cpu.sh serverless/pytorch/facebookresearch/detectron2/retinanet
</code></pre><p>To debug python code inside a container you have to publish the port (in this
tutorial it is 5678). Nuclio deploy command doesn&rsquo;t support that and we have to
workaround it using <a href="https://www.ssh.com/academy/ssh/tunneling">SSH port forwarding</a>.</p>
<ul>
<li>Install SSH server on your host machine using <code>sudo apt install openssh-server</code></li>
<li>In <code>/etc/ssh/sshd_config</code> host file set <code>GatewayPorts yes</code></li>
<li>Restart ssh service to apply changes using <code>sudo systemctl restart ssh.service</code></li>
</ul>
<p>Next step is to install ssh client inside the container and run port forwarding.
In the snippet below instead of <code>user</code> and <code>ipaddress</code> provide username and
IP address of your host (usually IP address starts from <code>192.168.</code>). You will
need to confirm that you want to connect to your host computer and enter your
password. Keep the terminal open after that.</p>
<pre><code class="language-console" data-lang="console">$ docker exec -it nuclio-nuclio-pth.facebookresearch.detectron2.retinanet_r101 /bin/bash
$ apt update &amp;&amp; apt install -y ssh
$ ssh -R 5678:localhost:5678 user@ipaddress
</code></pre><p>See how the latest command looks like in my case:</p>
<pre><code class="language-console" data-lang="console">root@2d6cceec8f70:/opt/nuclio# ssh -R 5678:localhost:5678 nmanovic@192.168.50.188
The authenticity of host '192.168.50.188 (192.168.50.188)' can't be established.
ECDSA key fingerprint is SHA256:0sD6IWi+FKAhtUXr2TroHqyjcnYRIGLLx/wkGaZeRuo.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '192.168.50.188' (ECDSA) to the list of known hosts.
nmanovic@192.168.50.188's password:
Welcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.8.0-53-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

223 updates can be applied immediately.
132 of these updates are standard security updates.
To see these additional updates run: apt list --upgradable

Your Hardware Enablement Stack (HWE) is supported until April 2025.
Last login: Fri Jun 25 16:39:04 2021 from 172.17.0.5
[setupvars.sh] OpenVINO environment initialized
nmanovic@nmanovic-dl-node:~$
</code></pre><p>Finally, add the configuration below into your launch.json. Open Visual Studio Code and
run <code>Serverless Debug</code> configuration, set a breakpoint in <code>main.py</code> and try to call the
serverless function from CVAT UI. The breakpoint should be triggered in Visual Studio
Code and it should be possible to inspect variables and debug code.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Serverless Debug&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;python&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;attach&#34;</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#204a87;font-weight:bold">&#34;connect&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;host&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;localhost&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;port&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">5678</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#204a87;font-weight:bold">&#34;pathMappings&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;localRoot&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;${workspaceFolder}/serverless/pytorch/facebookresearch/detectron2/retinanet/nuclio&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;remoteRoot&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;/opt/nuclio&#34;</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p><img src="../../images/vscode_debug_retinanet.png" alt="VS Code debug RetinaNet"></p>
<p><em>Note: In case of changes in the source code, need to re-deploy the function and initiate
port forwarding again.</em></p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>First of all need to check that you are using the recommended version of
Nuclio framework. In my case it is <code>1.5.16</code> but you need to check <a href="../../docs/administration/advanced/installation_automatic_annotation">the
installation manual</a>.</p>
<pre><code class="language-console" data-lang="console">$ nuctl version
Client version:
&quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;
</code></pre><p>Check that Nuclio dashboard is running and its version corresponds to <code>nuctl</code>.</p>
<pre><code class="language-console" data-lang="console">$ docker ps --filter NAME=^nuclio$
CONTAINER ID   IMAGE                                   COMMAND                  CREATED       STATUS                    PORTS                                               NAMES
7ab0c076c927   quay.io/nuclio/dashboard:1.5.16-amd64   &quot;/docker-entrypoint.…&quot;   6 weeks ago   Up 46 minutes (healthy)   80/tcp, 0.0.0.0:8070-&gt;8070/tcp, :::8070-&gt;8070/tcp   nuclio
</code></pre><p>Be sure that the model, which doesn&rsquo;t work, is healthy. In my case Inside Outside
Guidance is not running.</p>
<pre><code class="language-console" data-lang="console">$ docker ps --filter NAME=iog
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</code></pre><p>Let&rsquo;s run it. Go to the root of CVAT repository and run the deploying command.</p>
<pre><code class="language-console" data-lang="console">$ serverless/deploy_cpu.sh serverless/pytorch/shiyinzhang/iog
</code></pre><details>
<pre><code class="language-console" data-lang="console">Deploying serverless/pytorch/shiyinzhang/iog function...
21.07.06 12:49:08.763                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.07.06 12:49:08.763                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.07.06 12:49:09.085                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;pth.shiyinzhang.iog&quot;}
21.07.06 12:49:09.162                     nuctl (I) Function already exists, deleting function containers {&quot;functionName&quot;: &quot;pth.shiyinzhang.iog&quot;}
21.07.06 12:49:09.230                     nuctl (I) Staging files and preparing base images
21.07.06 12:49:09.232                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 12:49:09.232     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.07.06 12:49:12.525     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.07.06 12:49:16.222            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 12:49:16.555            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.07.06 12:49:16.555            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 12:49:16.555                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/pth.shiyinzhang.iog:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;pth.shiyinzhang.iog&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;pytorch&quot;,&quot;min_pos_points&quot;:&quot;1&quot;,&quot;name&quot;:&quot;IOG&quot;,&quot;spec&quot;:&quot;&quot;,&quot;startswith_box&quot;:&quot;true&quot;,&quot;type&quot;:&quot;interactor&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;Interactive Object Segmentation with Inside-Outside Guidance&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.6&quot;,&quot;env&quot;:[{&quot;name&quot;:&quot;PYTHONPATH&quot;,&quot;value&quot;:&quot;/opt/nuclio/iog&quot;}],&quot;resources&quot;:{},&quot;image&quot;:&quot;cvat/pth.shiyinzhang.iog:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:2,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;volumes&quot;:[{&quot;volume&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;hostPath&quot;:{&quot;path&quot;:&quot;/home/nmanovic/Workspace/cvat/serverless/common&quot;}},&quot;volumeMount&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;mountPath&quot;:&quot;/opt/nuclio/common&quot;}}],&quot;build&quot;:{&quot;image&quot;:&quot;cvat/pth.shiyinzhang.iog&quot;,&quot;baseImage&quot;:&quot;continuumio/miniconda3&quot;,&quot;directives&quot;:{&quot;preCopy&quot;:[{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda create -y -n iog python=3.6&quot;},{&quot;kind&quot;:&quot;SHELL&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;iog\&quot;, \&quot;/bin/bash\&quot;, \&quot;-c\&quot;]&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y -c anaconda curl&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y pytorch=0.4 torchvision=0.2 -c pytorch&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y -c conda-forge pycocotools opencv scipy&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;git clone https://github.com/shiyinzhang/Inside-Outside-Guidance.git iog&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio/iog&quot;},{&quot;kind&quot;:&quot;ENV&quot;,&quot;value&quot;:&quot;fileid=1Lm1hhMhhjjnNwO4Pf7SC6tXLayH2iH0l&quot;},{&quot;kind&quot;:&quot;ENV&quot;,&quot;value&quot;:&quot;filename=IOG_PASCAL_SBD.pth&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -c ./cookie -s -L \&quot;https://drive.google.com/uc?export=download\u0026id=${fileid}\&quot;&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;echo \&quot;/download/ {print \\$NF}\&quot; \u003e confirm_code.awk&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -Lb ./cookie \&quot;https://drive.google.com/uc?export=download\u0026confirm=`awk -f confirm_code.awk ./cookie`\u0026id=${fileid}\&quot; -o ${filename}&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;ENTRYPOINT&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;iog\&quot;]&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.07.06 12:49:17.422     nuctl.platform.docker (W) Failed to run container {&quot;err&quot;: &quot;stdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n&quot;, &quot;errVerbose&quot;: &quot;\nError - exit status 125\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\n\nCall stack:\nstdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\nstdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n&quot;, &quot;errCauses&quot;: [{&quot;error&quot;: &quot;exit status 125&quot;}], &quot;stdout&quot;: &quot;1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n&quot;, &quot;stderr&quot;: &quot;&quot;}
21.07.06 12:49:17.422                     nuctl (W) Failed to create a function; setting the function status {&quot;err&quot;: &quot;Failed to run a Docker container&quot;, &quot;errVerbose&quot;: &quot;\nError - exit status 125\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\n\nCall stack:\nstdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\nFailed to run a Docker container\n    /nuclio/pkg/platform/local/platform.go:653\nFailed to run a Docker container&quot;, &quot;errCauses&quot;: [{&quot;error&quot;: &quot;stdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n&quot;, &quot;errorVerbose&quot;: &quot;\nError - exit status 125\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\n\nCall stack:\nstdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n\n    /nuclio/pkg/cmdrunner/shellrunner.go:96\nstdout:\n1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb\ndocker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.\n\nstderr:\n&quot;, &quot;errorCauses&quot;: [{&quot;error&quot;: &quot;exit status 125&quot;}]}]}

Error - exit status 125
    /nuclio/pkg/cmdrunner/shellrunner.go:96

Call stack:
stdout:
1373cb432a178a3606685b5975e40a0755bc7958786c182304f5d1bbc0873ceb
docker: Error response from daemon: driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (df68e7b4a60e553ee3079f1f1622b050cc958bd50f2cd359a20164d8a417d0ea): Bind for 0.0.0.0:49154 failed: port is already allocated.

stderr:

    /nuclio/pkg/cmdrunner/shellrunner.go:96
Failed to run a Docker container
    /nuclio/pkg/platform/local/platform.go:653
Failed to deploy function
    ...//nuclio/pkg/platform/abstract/platform.go:182
  NAMESPACE |                      NAME                      | PROJECT | STATE | NODE PORT | REPLICAS
  nuclio    | openvino-dextr                                 | cvat    | ready |     49154 | 1/1
  nuclio    | pth-foolwood-siammask                          | cvat    | ready |     49155 | 1/1
  nuclio    | pth.facebookresearch.detectron2.retinanet_r101 | cvat    | ready |     49155 | 1/1
  nuclio    | pth.shiyinzhang.iog                            | cvat    | error |         0 | 1/1
</code></pre></details>
<p>In this case the container was built some time ago and the port 49154 was
assigned by Nuclio. Now the port is used by <code>openvino-dextr</code> as we can
see in logs. To prove our hypothesis just need to run a couple of docker
commands:</p>
<pre><code class="language-console" data-lang="console">$ docker container ls -a | grep iog
eb0c1ee46630   cvat/pth.shiyinzhang.iog:latest                              &quot;conda run -n iog pr…&quot;   9 minutes ago       Created                                                                          nuclio-nuclio-pth.shiyinzhang.iog
$ docker inspect eb0c1ee46630 | grep 49154
            &quot;Error&quot;: &quot;driver failed programming external connectivity on endpoint nuclio-nuclio-pth.shiyinzhang.iog (02384290f91b2216162b1603322dadee426afe7f439d3d090f598af5d4863b2d): Bind for 0.0.0.0:49154 failed: port is already allocated&quot;,
                        &quot;HostPort&quot;: &quot;49154&quot;
</code></pre><p>To solve the problem let&rsquo;s just remove the previous container for the function.
In this case it is <code>eb0c1ee46630</code>. After that the deploying command works as
expected.</p>
<pre><code class="language-console" data-lang="console">$ docker container rm eb0c1ee46630
eb0c1ee46630
$ serverless/deploy_cpu.sh serverless/pytorch/shiyinzhang/iog
</code></pre><details>
<pre><code class="language-console" data-lang="console">Deploying serverless/pytorch/shiyinzhang/iog function...
21.07.06 13:09:52.934                     nuctl (I) Deploying function {&quot;name&quot;: &quot;&quot;}
21.07.06 13:09:52.934                     nuctl (I) Building {&quot;versionInfo&quot;: &quot;Label: 1.5.16, Git commit: ae43a6a560c2bec42d7ccfdf6e8e11a1e3cc3774, OS: linux, Arch: amd64, Go version: go1.14.3&quot;, &quot;name&quot;: &quot;&quot;}
21.07.06 13:09:53.282                     nuctl (I) Cleaning up before deployment {&quot;functionName&quot;: &quot;pth.shiyinzhang.iog&quot;}
21.07.06 13:09:53.341                     nuctl (I) Staging files and preparing base images
21.07.06 13:09:53.342                     nuctl (I) Building processor image {&quot;imageName&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 13:09:53.342     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/handler-builder-python-onbuild:1.5.16-amd64&quot;}
21.07.06 13:09:56.633     nuctl.platform.docker (I) Pulling image {&quot;imageName&quot;: &quot;quay.io/nuclio/uhttpc:0.0.1-amd64&quot;}
21.07.06 13:10:00.163            nuctl.platform (I) Building docker image {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 13:10:00.452            nuctl.platform (I) Pushing docker image into registry {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;, &quot;registry&quot;: &quot;&quot;}
21.07.06 13:10:00.452            nuctl.platform (I) Docker image was successfully built and pushed into docker registry {&quot;image&quot;: &quot;cvat/pth.shiyinzhang.iog:latest&quot;}
21.07.06 13:10:00.452                     nuctl (I) Build complete {&quot;result&quot;: {&quot;Image&quot;:&quot;cvat/pth.shiyinzhang.iog:latest&quot;,&quot;UpdatedFunctionConfig&quot;:{&quot;metadata&quot;:{&quot;name&quot;:&quot;pth.shiyinzhang.iog&quot;,&quot;namespace&quot;:&quot;nuclio&quot;,&quot;labels&quot;:{&quot;nuclio.io/project-name&quot;:&quot;cvat&quot;},&quot;annotations&quot;:{&quot;framework&quot;:&quot;pytorch&quot;,&quot;min_pos_points&quot;:&quot;1&quot;,&quot;name&quot;:&quot;IOG&quot;,&quot;spec&quot;:&quot;&quot;,&quot;startswith_box&quot;:&quot;true&quot;,&quot;type&quot;:&quot;interactor&quot;}},&quot;spec&quot;:{&quot;description&quot;:&quot;Interactive Object Segmentation with Inside-Outside Guidance&quot;,&quot;handler&quot;:&quot;main:handler&quot;,&quot;runtime&quot;:&quot;python:3.6&quot;,&quot;env&quot;:[{&quot;name&quot;:&quot;PYTHONPATH&quot;,&quot;value&quot;:&quot;/opt/nuclio/iog&quot;}],&quot;resources&quot;:{},&quot;image&quot;:&quot;cvat/pth.shiyinzhang.iog:latest&quot;,&quot;targetCPU&quot;:75,&quot;triggers&quot;:{&quot;myHttpTrigger&quot;:{&quot;class&quot;:&quot;&quot;,&quot;kind&quot;:&quot;http&quot;,&quot;name&quot;:&quot;myHttpTrigger&quot;,&quot;maxWorkers&quot;:2,&quot;workerAvailabilityTimeoutMilliseconds&quot;:10000,&quot;attributes&quot;:{&quot;maxRequestBodySize&quot;:33554432}}},&quot;volumes&quot;:[{&quot;volume&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;hostPath&quot;:{&quot;path&quot;:&quot;/home/nmanovic/Workspace/cvat/serverless/common&quot;}},&quot;volumeMount&quot;:{&quot;name&quot;:&quot;volume-1&quot;,&quot;mountPath&quot;:&quot;/opt/nuclio/common&quot;}}],&quot;build&quot;:{&quot;image&quot;:&quot;cvat/pth.shiyinzhang.iog&quot;,&quot;baseImage&quot;:&quot;continuumio/miniconda3&quot;,&quot;directives&quot;:{&quot;preCopy&quot;:[{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda create -y -n iog python=3.6&quot;},{&quot;kind&quot;:&quot;SHELL&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;iog\&quot;, \&quot;/bin/bash\&quot;, \&quot;-c\&quot;]&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y -c anaconda curl&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y pytorch=0.4 torchvision=0.2 -c pytorch&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;conda install -y -c conda-forge pycocotools opencv scipy&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;git clone https://github.com/shiyinzhang/Inside-Outside-Guidance.git iog&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio/iog&quot;},{&quot;kind&quot;:&quot;ENV&quot;,&quot;value&quot;:&quot;fileid=1Lm1hhMhhjjnNwO4Pf7SC6tXLayH2iH0l&quot;},{&quot;kind&quot;:&quot;ENV&quot;,&quot;value&quot;:&quot;filename=IOG_PASCAL_SBD.pth&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -c ./cookie -s -L \&quot;https://drive.google.com/uc?export=download\u0026id=${fileid}\&quot;&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;echo \&quot;/download/ {print \\$NF}\&quot; \u003e confirm_code.awk&quot;},{&quot;kind&quot;:&quot;RUN&quot;,&quot;value&quot;:&quot;curl -Lb ./cookie \&quot;https://drive.google.com/uc?export=download\u0026confirm=`awk -f confirm_code.awk ./cookie`\u0026id=${fileid}\&quot; -o ${filename}&quot;},{&quot;kind&quot;:&quot;WORKDIR&quot;,&quot;value&quot;:&quot;/opt/nuclio&quot;},{&quot;kind&quot;:&quot;ENTRYPOINT&quot;,&quot;value&quot;:&quot;[\&quot;conda\&quot;, \&quot;run\&quot;, \&quot;-n\&quot;, \&quot;iog\&quot;]&quot;}]},&quot;codeEntryType&quot;:&quot;image&quot;},&quot;platform&quot;:{&quot;attributes&quot;:{&quot;mountMode&quot;:&quot;volume&quot;,&quot;restartPolicy&quot;:{&quot;maximumRetryCount&quot;:3,&quot;name&quot;:&quot;always&quot;}}},&quot;readinessTimeoutSeconds&quot;:60,&quot;securityContext&quot;:{},&quot;eventTimeout&quot;:&quot;30s&quot;}}}}
21.07.06 13:10:01.604            nuctl.platform (I) Waiting for function to be ready {&quot;timeout&quot;: 60}
21.07.06 13:10:02.976                     nuctl (I) Function deploy complete {&quot;functionName&quot;: &quot;pth.shiyinzhang.iog&quot;, &quot;httpPort&quot;: 49159}
  NAMESPACE |                      NAME                      | PROJECT | STATE | NODE PORT | REPLICAS
  nuclio    | openvino-dextr                                 | cvat    | ready |     49154 | 1/1
  nuclio    | pth-foolwood-siammask                          | cvat    | ready |     49155 | 1/1
  nuclio    | pth-saic-vul-fbrs                              | cvat    | ready |     49156 | 1/1
  nuclio    | pth.facebookresearch.detectron2.retinanet_r101 | cvat    | ready |     49155 | 1/1
  nuclio    | pth.shiyinzhang.iog                            | cvat    | ready |     49159 | 1/1
</code></pre></details>
<p>When you investigate an issue with a serverless function, it is extremely
useful to look at logs. Just run a couple of commands like
<code>docker logs &lt;container&gt;</code>.</p>
<details>
<pre><code class="language-console" data-lang="console">$ docker logs cvat
2021-07-06 13:44:54,699 DEBG 'runserver' stderr output:
[Tue Jul 06 13:44:54.699431 2021] [wsgi:error] [pid 625:tid 140010969868032] [remote 172.28.0.3:40972] [2021-07-06 13:44:54,699] ERROR django.request: Internal Server Error: /api/v1/lambda/functions/pth.shiyinzhang.iog

2021-07-06 13:44:54,700 DEBG 'runserver' stderr output:
[Tue Jul 06 13:44:54.699712 2021] [wsgi:error] [pid 625:tid 140010969868032] [remote 172.28.0.3:40972] ERROR - 2021-07-06 13:44:54,699 - log - Internal Server Error: /api/v1/lambda/functions/pth.shiyinzhang.iog

$ docker container ls --filter name=iog
CONTAINER ID   IMAGE                             COMMAND                  CREATED       STATUS                 PORTS                                         NAMES
3b6ef9a9f3e2   cvat/pth.shiyinzhang.iog:latest   &quot;conda run -n iog pr…&quot;   4 hours ago   Up 4 hours (healthy)   0.0.0.0:49159-&gt;8080/tcp, :::49159-&gt;8080/tcp   nuclio-nuclio-pth.shiyinzhang.iog

$ docker logs nuclio-nuclio-pth.shiyinzhang.iog
</code></pre></details>
<p>If before model deployment you see that the <code>NODE PORT</code> is 0, you need to assign it manually.
Add the <code>port: 32001</code> attribute to the <code>function.yaml</code> file of each model, before you deploy the model.
Different ports should be prescribed for different models.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">triggers:
myHttpTrigger:
    maxWorkers: 1
    kind: &#39;http&#39;
    workerAvailabilityTimeoutMilliseconds: 10000
    attributes:
<span style="color:#00a000">+     port: 32001
</span><span style="color:#00a000"></span>      maxRequestBodySize: 33554432 # 32MB
</code></pre></div><h3 id="installation-serverless-functions-on-windows-10-with-using-the-ubuntu-subsystem">Installation serverless functions on Windows 10 with using the Ubuntu subsystem</h3>
<p>If you encounter a problem running serverless functions on Windows 10,
you can use the Ubuntu subsystem, for this do the following:</p>
<ol>
<li>
<p>Install  <code>WSL 2</code> and <code>Docker Desktop</code> as described in <a href="../../docs/administration/basics/installation/#windows-10">installation manual</a></p>
</li>
<li>
<p>Install <a href="https://www.microsoft.com/en-us/p/ubuntu-1804-lts/9n9tngvndl3q">Ubuntu 18.04 from Microsoft store</a>.</p>
</li>
<li>
<p>Enable integration for Ubuntu-18.04 in the settings of <code>Docker Desktop</code> in the <code>Resources</code> <code>WSL integration</code> tab:</p>
<p><img src="../../images/docker_wsl_integration.jpg" alt="Docker WSL integration Ubuntu 18.04"></p>
</li>
<li>
<p>Then you can download and install <code>nuctl</code> on Ubuntu,
using the <a href="../../docs/administration/advanced/installation_automatic_annotation">automatic annotation guide</a>.</p>
</li>
<li>
<p>Install <code>git</code> and clone repository on Ubuntu,
as described in the <a href="../../docs/administration/basics/installation/#ubuntu-1804-x86_64amd64">installation manual</a>.</p>
</li>
<li>
<p>After that, run the commands from this tutorial through Ubuntu.</p>
</li>
</ol>

</div>



    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9d2b3fd06ac095b9dc68b7aa8fbf324e">3 - Administration</h1>
    <div class="lead">This section contains documents for system administrators.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-1e63fbd88462376b0ea61a372d0f0256">3.1 - Basics</h1>
    <div class="lead">This section contains basic documents for system administrators.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-3b52a3a4deeb0315f304ab2f6d5bc85d">3.1.1 - Installation Guide</h1>
    <div class="lead">A CVAT installation guide for different operating systems.</div>
	<h1 id="quick-installation-guide">Quick installation guide</h1>
<p>Before you can use CVAT, you’ll need to get it installed. The document below
contains instructions for the most popular operating systems. If your system is
not covered by the document it should be relatively straight forward to adapt
the instructions below for other systems.</p>
<p>Probably you need to modify the instructions below in case you are behind a proxy
server. Proxy is an advanced topic and it is not covered by the guide.</p>
<h2 id="ubuntu-1804-x86_64amd64">Ubuntu 18.04 (x86_64/amd64)</h2>
<ul>
<li>
<p>Open a terminal window. If you don&rsquo;t know how to open a terminal window on
Ubuntu please read <a href="https://askubuntu.com/questions/183775/how-do-i-open-a-terminal">the answer</a>.</p>
</li>
<li>
<p>Type commands below into the terminal window to install <code>docker</code>. More
instructions can be found <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">here</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo apt-get update
sudo apt-get --no-install-recommends install -y <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  apt-transport-https <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  ca-certificates <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  curl <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  gnupg-agent <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span style="color:#000;font-weight:bold">|</span> sudo apt-key add -
sudo add-apt-repository <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span style="color:#4e9a06">  </span><span style="color:#204a87;font-weight:bold">$(</span>lsb_release -cs<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06"> \
</span><span style="color:#4e9a06">  stable&#34;</span>
sudo apt-get update
sudo apt-get --no-install-recommends install -y docker-ce docker-ce-cli containerd.io
</code></pre></div></li>
<li>
<p>Perform <a href="https://docs.docker.com/install/linux/linux-postinstall/">post-installation steps</a>
to run docker without root permissions.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo groupadd docker
sudo usermod -aG docker <span style="color:#000">$USER</span>
</code></pre></div><p>Log out and log back in (or reboot) so that your group membership is
re-evaluated. You can type <code>groups</code> command in a terminal window after
that and check if <code>docker</code> group is in its output.</p>
</li>
<li>
<p>Install docker-compose (1.19.0 or newer). Compose is a tool for
defining and running multi-container docker applications.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get --no-install-recommends install -y python3-pip python3-setuptools
sudo python3 -m pip install setuptools docker-compose
</code></pre></div></li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get --no-install-recommends install -y git
git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to the user. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Google Chrome is the only browser which is supported by CVAT. You need to
install it as well. Type commands below in a terminal window:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">curl https://dl-ssl.google.com/linux/linux_signing_key.pub <span style="color:#000;font-weight:bold">|</span> sudo apt-key add -
sudo sh -c <span style="color:#4e9a06">&#39;echo &#34;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&#34; &gt;&gt; /etc/apt/sources.list.d/google-chrome.list&#39;</span>
sudo apt-get update
sudo apt-get --no-install-recommends install -y google-chrome-stable
</code></pre></div></li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="windows-10">Windows 10</h2>
<ul>
<li>
<p>Install WSL2 (Windows subsystem for Linux) refer to <a href="https://docs.microsoft.com/windows/wsl/install-win10">this official guide</a>.
WSL2 requires Windows 10, version 2004 or higher. Note: You may not have to install a Linux distribution unless
needed.</p>
</li>
<li>
<p>Download and install <a href="https://download.docker.com/win/stable/Docker%20Desktop%20Installer.exe">Docker Desktop for Windows</a>.
Double-click <code>Docker for Windows Installer</code> to run the installer.
More instructions can be found <a href="https://docs.docker.com/docker-for-windows/install/">here</a>.
Official guide for docker WSL2 backend can be found
<a href="https://docs.docker.com/docker-for-windows/wsl/">here</a>. Note: Check that you are specifically using WSL2 backend
for Docker.</p>
</li>
<li>
<p>Download and install
<a href="https://github.com/git-for-windows/git/releases/download/v2.21.0.windows.1/Git-2.21.0-64-bit.exe">Git for Windows</a>.
When installing the package please keep all options by default.
More information about the package can be found <a href="https://gitforwindows.org">here</a>.</p>
</li>
<li>
<p>Download and install <a href="https://www.google.com/chrome/">Google Chrome</a>. It is the only browser
which is supported by CVAT.</p>
</li>
<li>
<p>Go to windows menu, find <code>Git Bash</code> application and run it. You should see a terminal window.</p>
</li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to other users. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">winpty docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>If you don&rsquo;t have winpty installed or the above command does not work, you may also try the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#8f5902;font-style:italic"># enter docker image first</span>
docker <span style="color:#204a87">exec</span> -it cvat /bin/bash
<span style="color:#8f5902;font-style:italic"># then run</span>
python3 ~/manage.py createsuperuser
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="mac-os-mojave">Mac OS Mojave</h2>
<ul>
<li>
<p>Download <a href="https://download.docker.com/mac/stable/Docker.dmg">Docker for Mac</a>.
Double-click Docker.dmg to open the installer, then drag Moby the whale
to the Applications folder. Double-click Docker.app in the Applications
folder to start Docker. More instructions can be found
<a href="https://docs.docker.com/v17.12/docker-for-mac/install/#install-and-run-docker-for-mac">here</a>.</p>
</li>
<li>
<p>There are several ways to install Git on a Mac. The easiest is probably to
install the Xcode Command Line Tools. On Mavericks (10.9) or above you can
do this simply by trying to run git from the Terminal the very first time.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git --version
</code></pre></div><p>If you don’t have it installed already, it will prompt you to install it.
More instructions can be found <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">here</a>.</p>
</li>
<li>
<p>Download and install <a href="https://www.google.com/chrome/">Google Chrome</a>. It
is the only browser which is supported by CVAT.</p>
</li>
<li>
<p>Open a terminal window. The terminal app is in the Utilities folder in
Applications. To open it, either open your Applications folder, then open
Utilities and double-click on Terminal, or press Command - spacebar to
launch Spotlight and type &ldquo;Terminal,&rdquo; then double-click the search result.</p>
</li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to other users. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<h3 id="deploying-cvat-behind-a-proxy">Deploying CVAT behind a proxy</h3>
<p>If you deploy CVAT behind a proxy and do not plan to use any of <a href="#semi-automatic-and-automatic-annotation">serverless functions</a>
for automatic annotation, the exported environment variables
<code>http_proxy</code>, <code>https_proxy</code> and <code>no_proxy</code> should be enough to build images.
Otherwise please create or edit the file <code>~/.docker/config.json</code> in the home directory of the user
which starts containers and add JSON such as the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;proxies&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;default&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;httpProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;http://proxy_server:port&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;httpsProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;http://proxy_server:port&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;noProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;*.test.example.com,.example2.com&#34;</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>These environment variables are set automatically within any container.
Please see the <a href="https://docs.docker.com/network/proxy/">Docker documentation</a> for more details.</p>
<h3 id="using-the-traefik-dashboard">Using the Traefik dashboard</h3>
<p>If you are customizing the docker compose files and you come upon some unexpected issues, using the Traefik
dashboard might be very useful to see if the problem is with Traefik configuration, or with some of the services.</p>
<p>You can enable the Traefik dashboard by uncommenting the following lines from <code>docker-compose.yml</code></p>
<pre><code>services:
  traefik:
    # Uncomment to get Traefik dashboard
    #   - &quot;--entryPoints.dashboard.address=:8090&quot;
    #   - &quot;--api.dashboard=true&quot;
    # labels:
    #   - traefik.enable=true
    #   - traefik.http.routers.dashboard.entrypoints=dashboard
    #   - traefik.http.routers.dashboard.service=api@internal
    #   - traefik.http.routers.dashboard.rule=Host(`${CVAT_HOST:-localhost}`)
</code></pre><p>and if you are using <code>docker-compose.https.yml</code>, also uncomment these lines</p>
<pre><code>services:
  traefik:
    command:
      # Uncomment to get Traefik dashboard
      # - &quot;--entryPoints.dashboard.address=:8090&quot;
      # - &quot;--api.dashboard=true&quot;
</code></pre><p>Note that this &ldquo;insecure&rdquo; dashboard is not recommended in production (and if your instance is publicly available);
if you want to keep the dashboard in production you should read Traefik&rsquo;s
<a href="https://doc.traefik.io/traefik/operations/dashboard/">documentation</a> on how to properly secure it.</p>
<h3 id="additional-components">Additional components</h3>
<ul>
<li><a href="../../docs/administration/advanced/analytics/">Analytics: management and monitoring of data annotation team</a></li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Build and run containers with Analytics component support:</span>
docker-compose -f docker-compose.yml <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -f components/analytics/docker-compose.analytics.yml up -d --build
</code></pre></div><h3 id="semi-automatic-and-automatic-annotation">Semi-automatic and automatic annotation</h3>
<p>Please follow this <a href="../../docs/administration/advanced/installation_automatic_annotation/">guide</a>.</p>
<h3 id="stop-all-containers">Stop all containers</h3>
<p>The command below stops and removes containers, networks, volumes, and images
created by <code>up</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose down
</code></pre></div><h3 id="use-your-own-domain">Use your own domain</h3>
<p>If you want to access your instance of CVAT outside of your localhost (on another domain),
you should specify the <code>CVAT_HOST</code> environment variable, like this:</p>
<pre><code>export CVAT_HOST=&lt;YOUR_DOMAIN&gt;
</code></pre><h3 id="share-path">Share path</h3>
<p>You can use a share storage for data uploading during you are creating a task.
To do that you can mount it to CVAT docker container. Example of
docker-compose.override.yml for this purpose:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.3&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">CVAT_SHARE_URL</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;Mounted from /mnt/share host directory&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">cvat_share:/home/django/share:ro</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat_share</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">driver_opts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/mnt/share</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">o</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bind</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>You can change the share device path to your actual share. For user convenience
we have defined the environment variable $CVAT_SHARE_URL. This variable
contains a text (url for example) which is shown in the client-share browser.</p>
<p>You can <a href="../../docs/administration/advanced/mounting_cloud_storages/">mount</a>
your cloud storage as a FUSE and use it later as a share.</p>
<h3 id="email-verification">Email verification</h3>
<p>You can enable email verification for newly registered users.
Specify these options in the
<a href="https://github.com/openvinotoolkit/cvat/blob/develop/cvat/settings/base.py">settings file</a> to configure Django allauth
to enable email verification (ACCOUNT_EMAIL_VERIFICATION = &lsquo;mandatory&rsquo;).
Access is denied until the user&rsquo;s email address is verified.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">ACCOUNT_AUTHENTICATION_METHOD</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;username&#39;</span>
<span style="color:#000">ACCOUNT_CONFIRM_EMAIL_ON_GET</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">True</span>
<span style="color:#000">ACCOUNT_EMAIL_REQUIRED</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">True</span>
<span style="color:#000">ACCOUNT_EMAIL_VERIFICATION</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;mandatory&#39;</span>

<span style="color:#8f5902;font-style:italic"># Email backend settings for Django</span>
<span style="color:#000">EMAIL_BACKEND</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;django.core.mail.backends.smtp.EmailBackend&#39;</span>
</code></pre></div><p>Also you need to configure the Django email backend to send emails.
This depends on the email server you are using and is not covered in this tutorial, please see
<a href="https://docs.djangoproject.com/en/3.1/topics/email/#django.core.mail.backends.smtp.EmailBackend">Django SMTP backend configuration</a>
for details.</p>
<h3 id="deploy-cvat-on-the-scaleway-public-cloud">Deploy CVAT on the Scaleway public cloud</h3>
<p>Please follow
<a href="https://blog.scaleway.com/smart-data-annotation-for-your-computer-vision-projects-cvat-on-scaleway/">this tutorial</a>
to install and set up remote access to CVAT on a Scaleway cloud instance with data in a mounted object storage bucket.</p>
<h3 id="deploy-secure-cvat-instance-with-https">Deploy secure CVAT instance with HTTPS</h3>
<p>Using Traefik, you can automatically obtain TLS certificate for your domain from Let&rsquo;s Encrypt,
enabling you to use HTTPS protocol to access your website.</p>
<p>To enable this, first set the the <code>CVAT_HOST</code> (the domain of your website) and <code>ACME_EMAIL</code>
(contact email for Let&rsquo;s Encrypt) environment variables:</p>
<pre><code>export CVAT_HOST=&lt;YOUR_DOMAIN&gt;
export ACME_EMAIL=&lt;YOUR_EMAIL&gt;
</code></pre><p>Then, use the <code>docker-compose.https.yml</code> file to override the base <code>docker-compose.yml</code> file:</p>
<pre><code>docker-compose -f docker-compose.yml -f docker-compose.https.yml up -d
</code></pre><p>Then, the CVAT instance will be available at your domain on ports 443 (HTTPS) and 80 (HTTP, redirects to 443).</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e0876969fd23d4213b245cf0d69ca6d3">3.1.2 - AWS-Deployment Guide</h1>
    <div class="lead">Instructions for deploying CVAT on Nvidia GPU and other AWS machines.</div>
	<p>There are two ways of deploying the CVAT.</p>
<ol>
<li>
<p><strong>On Nvidia GPU Machine:</strong> Tensorflow annotation feature is dependent on GPU hardware.
One of the easy ways to launch CVAT with the tf-annotation app is to use AWS P3 instances,
which provides the NVIDIA GPU.
Read more about <a href="https://aws.amazon.com/about-aws/whats-new/2017/10/introducing-amazon-ec2-p3-instances/">P3 instances here.</a>
Overall setup instruction is explained in <a href="https://github.com/openvinotoolkit/cvat/">main readme file</a>,
except Installing Nvidia drivers.
So we need to download the drivers and install it.
For Amazon P3 instances, download the Nvidia Drivers from Nvidia website.
For more check <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/install-nvidia-driver.html">Installing the NVIDIA Driver on Linux Instances</a>
link.</p>
</li>
<li>
<p><strong>On Any other AWS Machine:</strong> We can follow the same instruction guide mentioned in the
<a href="../../docs/administration/basics/installation/">installation instructions</a>.
The additional step is to add a <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">security group and rule to allow incoming connections</a>.</p>
</li>
</ol>
<p>For any of above, don&rsquo;t forget to set the <code>CVAT_HOST</code> environemnt variable to the exposed
AWS public IP address or hostname:</p>
<pre><code>export CVAT_HOST=your-instance.amazonaws.com
</code></pre><p>In case of problems with using hostname, you can also use the public IPV4 instead of hostname.
For AWS or any cloud based machines where the instances need to be terminated or stopped,
the public IPV4 and hostname changes with every stop and reboot.
To address this efficiently, avoid using spot instances that cannot be stopped,
since copying the EBS to an AMI and restarting it throws problems.
On the other hand, when a regular instance is stopped and restarted,
the new hostname/IPV4 can be used to set the  <code>CVAT_HOST</code> environment variable.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fe76cc8b9c063eb6606ea27948386ce7">3.1.3 - REST API guide</h1>
    <div class="lead">Instructions on how to interact with REST API and getting swagger documentation.</div>
	<p>To access swagger documentation you need to be authorized.</p>
<p>Automatically generated Swagger documentation for Django REST API is available
on <code>&lt;cvat_origin&gt;/api/swagger</code>(default: <code>localhost:8080/api/swagger</code>).</p>
<p>Swagger documentation is visible on allowed hosts, Update environment
variable in docker-compose.yml file with cvat hosted machine IP or domain
name. Example - <code>ALLOWED_HOSTS: 'localhost, 127.0.0.1'</code>.</p>
<p>Make a request to a resource stored on a server and the server will respond with the requested information.
The HTTP protocol is used to transport a data.
Requests are divided into groups:</p>
<ul>
<li><code>auth</code> - user authorization queries</li>
<li><code>comments</code> - requests to post/delete comments to issues</li>
<li><code>issues</code> - update, delete and view problem comments</li>
<li><code>jobs</code> -requests to manage the job</li>
<li><code>lambda</code> - requests to work with lambda function</li>
<li><code>projects</code> - project management queries</li>
<li><code>restrictions</code> - requests for restrictions</li>
<li><code>reviews</code> -adding and removing the review of the job</li>
<li><code>server</code> - server information requests</li>
<li><code>tasks</code> - requests to manage tasks</li>
<li><code>users</code> -  user management queries</li>
</ul>
<p>Besides it contains <code>Models</code>.
Models - the data type is described using a 
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#schemaObject">schema object</a>.</p>
<p>Each group contains queries related to a different types of HTTP methods such as: <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>DELETE</code>, etc.
Different methods are highlighted in different color. Each item has a name and description.
Clicking on an element opens a form with a name, description and settings input field or an example of json values.</p>
<p>To find out more, read <a href="https://swagger.io/docs/specification/about/">swagger specification</a>.</p>
<p>To try to send a request, click <code>Try it now </code>and type <code>Execute</code>.
You&rsquo;ll get a response in the form of <a href="https://curl.se/"><code>Curl</code></a>, <code>Request URL</code> and <code>Server response</code>.</p>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ba6eae2adf800d38632b8981c2dee567">3.2 - Advanced</h1>
    <div class="lead">This section contains advanced documents for system administrators.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-510d3a6059194f92357d8aa6f6ce7693">3.2.1 - Installation Analytics</h1>
    <div class="lead">Instructions for deployment and customization of Analytics. This section on <a href="https://github.com/openvinotoolkit/cvat/tree/develop/components/analytics">GitHub</a>.</div>
	<p><img src="../../images/image097.jpg" alt=""></p>
<p>It is possible to proxy annotation logs from client to ELK. To do that run the following command below:</p>
<h3 id="build-docker-image">Build docker image</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># From project root directory</span>
docker-compose -f docker-compose.yml -f components/analytics/docker-compose.analytics.yml build
</code></pre></div><h3 id="run-docker-container">Run docker container</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># From project root directory</span>
docker-compose -f docker-compose.yml -f components/analytics/docker-compose.analytics.yml up -d
</code></pre></div><p>At the moment it is not possible to save advanced settings. Below values should be specified manually.</p>
<h2 id="time-picker-default">Time picker default</h2>
<p>{
&ldquo;from&rdquo;: &ldquo;now/d&rdquo;,
&ldquo;to&rdquo;: &ldquo;now/d&rdquo;,
&ldquo;display&rdquo;: &ldquo;Today&rdquo;,
&ldquo;section&rdquo;: 0
}</p>
<h2 id="time-picker-quick-ranges">Time picker quick ranges</h2>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">[</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Today&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This week&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This month&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This year&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Today so far&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Week to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Month to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Year to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1d/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1d/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yesterday&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1w/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1w/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous week&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1m/m&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1m/m&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous month&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1y/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1y/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous year&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">]</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0525160925e6dcda34a919060abed2a7">3.2.2 - Semi-automatic and Automatic Annotation</h1>
    <div class="lead">Information about the installation of components needed for semi-automatic and automatic annotation.</div>
	<blockquote>
<p><strong>⚠ WARNING: Do not use <code>docker-compose up</code></strong>
If you did, make sure all containers are stopped by <code>docker-compose down</code>.</p>
</blockquote>
<ul>
<li>
<p>To bring up cvat with auto annotation tool, from cvat root directory, you need to run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d
</code></pre></div><p>If you did any changes to the docker-compose files, make sure to add <code>--build</code> at the end.</p>
<p>To stop the containers, simply run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml down
</code></pre></div></li>
<li>
<p>You have to install <code>nuctl</code> command line tool to build and deploy serverless
functions. Download <a href="https://github.com/nuclio/nuclio/releases/tag/1.5.16">version 1.5.16</a>.
It is important that the version you download matches the version in
<a href="https://github.com/openvinotoolkit/cvat/blob/develop/components/serverless/docker-compose.serverless.yml">docker-compose.serverless.yml</a>.
For example, using wget.</p>
<pre><code>wget https://github.com/nuclio/nuclio/releases/download/&lt;version&gt;/nuctl-&lt;version&gt;-linux-amd64
</code></pre><p>After downloading the nuclio, give it a proper permission and do a softlink.</p>
<pre><code>sudo chmod +x nuctl-&lt;version&gt;-linux-amd64
sudo ln -sf $(pwd)/nuctl-&lt;version&gt;-linux-amd64 /usr/local/bin/nuctl
</code></pre></li>
<li>
<p>Create <code>cvat</code> project inside nuclio dashboard where you will deploy new serverless functions
and deploy a couple of DL models. Commands below should be run only after CVAT has been installed
using <code>docker-compose</code> because it runs nuclio dashboard which manages all serverless functions.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl create project cvat
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/openvino/dextr/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span>
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/openvino/omz/public/yolo-v3-tf/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span>
</code></pre></div><p><strong>Note:</strong></p>
<ul>
<li>See <a href="https://github.com/openvinotoolkit/cvat/blob/develop/serverless/deploy_cpu.sh">deploy_cpu.sh</a>
for more examples.</li>
</ul>
<h4 id="gpu-support">GPU Support</h4>
<p>You will need to install <a href="https://www.tensorflow.org/install/docker#gpu_support">Nvidia Container Toolkit</a>.
Also you will need to add <code>--resource-limit nvidia.com/gpu=1 --triggers '{&quot;myHttpTrigger&quot;: {&quot;maxWorkers&quot;: 1}}'</code> to
the nuclio deployment command. You can increase the maxWorker if you have enough GPU memory.
As an example, below will run on the GPU:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/tensorflow/matterport/mask_rcnn/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span> --base-image tensorflow/tensorflow:1.15.5-gpu-py3 <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --desc <span style="color:#4e9a06">&#34;GPU based implementation of Mask RCNN on Python 3, Keras, and TensorFlow.&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --image cvat/tf.matterport.mask_rcnn_gpu <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --triggers <span style="color:#4e9a06">&#39;{&#34;myHttpTrigger&#34;: {&#34;maxWorkers&#34;: 1}}&#39;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --resource-limit nvidia.com/gpu<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><p><strong>Note:</strong></p>
<ul>
<li>The number of GPU deployed functions will be limited to your GPU memory.</li>
<li>See <a href="https://github.com/openvinotoolkit/cvat/blob/develop/serverless/deploy_gpu.sh">deploy_gpu.sh</a>
script for more examples.</li>
<li>For some models (namely <a href="../../docs/manual/advanced/ai-tools#trackers">SiamMask</a>) you need an <a href="https://www.nvidia.com/en-us/drivers/unix/">Nvidia driver</a>
version greater than or equal to 450.80.02.</li>
</ul>
<p><strong>Note for Windows users:</strong></p>
<p>If you want to use nuclio under Windows CVAT installation you should install Nvidia drivers for WSL according to
<a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">this</a> instruction and follow the steps up to “2.3 Installing Nvidia drivers”.
Important requirement: you should have the latest versions of Docker Desktop, Nvidia drivers for WSL,
and the latest updates from the Windows Insider Preview Dev channel.</p>
</li>
</ul>
<p><strong>Troubleshooting Nuclio Functions:</strong></p>
<ul>
<li>
<p>You can open nuclio dashboard at <a href="http://localhost:8070">localhost:8070</a>.
Make sure status of your functions are up and running without any error.</p>
</li>
<li>
<p>Test your deployed DL model as a serverless function. The command below should work on Linux and Mac OS.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">image</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>curl https://upload.wikimedia.org/wikipedia/en/7/7d/Lenna_%28test_image%29.png --output - <span style="color:#000;font-weight:bold">|</span> base64 <span style="color:#000;font-weight:bold">|</span> tr -d <span style="color:#4e9a06">&#39;\n&#39;</span><span style="color:#204a87;font-weight:bold">)</span>
cat <span style="color:#4e9a06">&lt;&lt; EOF &gt; /tmp/input.json
</span><span style="color:#4e9a06">{&#34;image&#34;: &#34;$image&#34;}
</span><span style="color:#4e9a06">EOF</span>
cat /tmp/input.json <span style="color:#000;font-weight:bold">|</span> nuctl invoke openvino.omz.public.yolo-v3-tf -c <span style="color:#4e9a06">&#39;application/json&#39;</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">20.07.17 12:07:44.519    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Executing <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;method&#34;</span>: <span style="color:#4e9a06">&#34;POST&#34;</span>, <span style="color:#4e9a06">&#34;url&#34;</span>: <span style="color:#4e9a06">&#34;http://:57308&#34;</span>, <span style="color:#4e9a06">&#34;headers&#34;</span>: <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Content-Type&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Log-Level&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;info&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Target&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;openvino.omz.public.yolo-v3-tf&#34;</span><span style="color:#ce5c00;font-weight:bold">]}}</span>
20.07.17 12:07:45.275    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Got response <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span>: <span style="color:#4e9a06">&#34;200 OK&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> &gt;&gt;&gt; Start of <span style="color:#204a87;font-weight:bold">function</span> logs
20.07.17 12:07:45.275 ino.omz.public.yolo-v3-tf <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Run yolo-v3-tf model <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;worker_id&#34;</span>: <span style="color:#4e9a06">&#34;0&#34;</span>, <span style="color:#4e9a06">&#34;time&#34;</span>: 1594976864570.9353<span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;&lt;</span> End of <span style="color:#204a87;font-weight:bold">function</span> logs

&gt; Response headers:
<span style="color:#000">Date</span> <span style="color:#ce5c00;font-weight:bold">=</span> Fri, <span style="color:#0000cf;font-weight:bold">17</span> Jul <span style="color:#0000cf;font-weight:bold">2020</span> 09:07:45 GMT
Content-Type <span style="color:#ce5c00;font-weight:bold">=</span> application/json
Content-Length <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">100</span>
<span style="color:#000">Server</span> <span style="color:#ce5c00;font-weight:bold">=</span> nuclio

&gt; Response body:
<span style="color:#ce5c00;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;confidence&#34;</span>: <span style="color:#4e9a06">&#34;0.9992254&#34;</span>,
        <span style="color:#4e9a06">&#34;label&#34;</span>: <span style="color:#4e9a06">&#34;person&#34;</span>,
        <span style="color:#4e9a06">&#34;points&#34;</span>: <span style="color:#ce5c00;font-weight:bold">[</span>
            39,
            124,
            408,
            <span style="color:#0000cf;font-weight:bold">512</span>
        <span style="color:#ce5c00;font-weight:bold">]</span>,
        <span style="color:#4e9a06">&#34;type&#34;</span>: <span style="color:#4e9a06">&#34;rectangle&#34;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div></details>
</li>
<li>
<p>To check for internal server errors, run <code>docker ps -a</code> to see the list of containers.
Find the container that you are interested, e.g., <code>nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu</code>.
Then check its logs by <code>docker logs &lt;name of your container&gt;</code>
e.g.,</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker logs nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu
</code></pre></div></li>
<li>
<p>To debug a code inside a container, you can use vscode to attach to a container <a href="https://code.visualstudio.com/docs/remote/attach-container">instructions</a>.
To apply your changes, make sure to restart the container.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker restart &lt;name_of_the_container&gt;
</code></pre></div></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7545f3c848c8d646b0c6d2ceef722983">3.2.3 - Mounting cloud storage</h1>
    <div class="lead">Instructions on how to mount AWS S3 bucket, Microsoft Azure container or Google Drive as a filesystem.</div>
	<!--lint disable heading-style-->
<h2 id="aws-s3-bucket-as-filesystem">AWS S3 bucket as filesystem</h2>
<h3 id="a-nameaws_s3_ubuntu_2004ubuntu-2004a"><a name="aws_s3_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-nameaws_s3_mountmounta"><a name="aws_s3_mount">Mount</a></h4>
<ol>
<li>
<p>Install s3fs:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt install s3fs
</code></pre></div></li>
<li>
<p>Enter your credentials in a file <code>${HOME}/.passwd-s3fs</code> and set owner-only permissions:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#204a87">echo</span> ACCESS_KEY_ID:SECRET_ACCESS_KEY &gt; <span style="color:#4e9a06">${</span><span style="color:#000">HOME</span><span style="color:#4e9a06">}</span>/.passwd-s3fs
chmod <span style="color:#0000cf;font-weight:bold">600</span> <span style="color:#4e9a06">${</span><span style="color:#000">HOME</span><span style="color:#4e9a06">}</span>/.passwd-s3fs
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Run s3fs, replace <code>bucket_name</code>, <code>mount_point</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">s3fs &lt;bucket_name&gt; &lt;mount_point&gt; -o allow_other
</code></pre></div></li>
</ol>
<p>For more details see <a href="https://github.com/s3fs-fuse/s3fs-fuse">here</a>.</p>
<h4 id="a-nameaws_s3_automatically_mountautomatically-mounta"><a name="aws_s3_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 3 mounting steps above.</p>
<h5 id="a-nameaws_s3_using_fstabusing-fstaba"><a name="aws_s3_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create a bash script named aws_s3_fuse(e.g in /usr/bin, as root) with this content
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>backet_name</code>, <code>mount_point</code>, <code>/path/to/.passwd-s3fs</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; s3fs &lt;backet_name&gt; &lt;mount_point&gt; -o <span style="color:#000">passwd_file</span><span style="color:#ce5c00;font-weight:bold">=</span>/path/to/.passwd-s3fs -o allow_other
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/aws_s3_fuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> adding a line like this, replace <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/aws_s3_fuse  &lt;mount_point&gt;     fuse    allow_other,user,_netdev     <span style="color:#0000cf;font-weight:bold">0</span>       <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
</ol>
<h5 id="a-nameaws_s3_using_systemdusing-systemda"><a name="aws_s3_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/s3fs.service</code>
(replace <code>user_name</code>, <code>bucket_name</code>, <code>mount_point</code>, <code>/path/to/.passwd-s3fs</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over AWS S3 bucket
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>s3fs &lt;bucket_name&gt; <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> -o <span style="color:#000">passwd_file</span><span style="color:#ce5c00;font-weight:bold">=</span>/path/to/.passwd-s3fs -o allow_other
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the bucket:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> s3fs.service
sudo systemctl start s3fs.service
</code></pre></div></li>
</ol>
<h4 id="a-nameaws_s3_checkchecka"><a name="aws_s3_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;s3fs&#39;</span>
</code></pre></div><h4 id="a-nameaws_s3_unmount_filesystemunmount-filesystema"><a name="aws_s3_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#aws_s3_using_systemd">systemd</a> to mount a bucket:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop s3fs.service
sudo systemctl disable s3fs.service
</code></pre></div><h2 id="microsoft-azure-container-as-filesystem">Microsoft Azure container as filesystem</h2>
<h3 id="a-nameazure_ubuntu_2004ubuntu-2004a"><a name="azure_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-nameazure_mountmounta"><a name="azure_mount">Mount</a></h4>
<ol>
<li>
<p>Set up the Microsoft package repository.(More <a href="https://docs.microsoft.com/en-us/windows-server/administration/Linux-Package-Repository-for-Microsoft-Software#configuring-the-repositories">here</a>)</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
sudo apt-get update
</code></pre></div></li>
<li>
<p>Install <code>blobfuse</code> and <code>fuse</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install blobfuse fuse
</code></pre></div><p>For more details see <a href="https://github.com/Azure/azure-storage-fuse/wiki/1.-Installation">here</a></p>
</li>
<li>
<p>Create environments (replace <code>account_name</code>, <code>account_key</code>, <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#204a87">export</span> <span style="color:#000">AZURE_STORAGE_ACCOUNT</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;account_name&gt;
<span style="color:#204a87">export</span> <span style="color:#000">AZURE_STORAGE_ACCESS_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;account_key&gt;
<span style="color:#000">MOUNT_POINT</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;mount_point&gt;
</code></pre></div></li>
<li>
<p>Create a folder for cache:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo mkdir -p /mnt/blobfusetmp
</code></pre></div></li>
<li>
<p>Make sure the file must be owned by the user who mounts the container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chown &lt;user&gt; /mnt/blobfusetmp
</code></pre></div></li>
<li>
<p>Create the mount point, if it doesn&rsquo;t exists:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Mount container(replace <code>your_container</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">blobfuse <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> --container-name<span style="color:#ce5c00;font-weight:bold">=</span>&lt;your_container&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/mnt/blobfusetmp -o allow_other
</code></pre></div></li>
</ol>
<h4 id="a-nameazure_automatically_mountautomatically-mounta"><a name="azure_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 7 mounting steps above.</p>
<h5 id="a-nameazure_using_fstabusing-fstaba"><a name="azure_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create configuration file <code>connection.cfg</code> with same content, change accountName,
select one from accountKey or sasToken and replace with your value:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">accountName &lt;account-name-here&gt;
<span style="color:#8f5902;font-style:italic"># Please provide either an account key or a SAS token, and delete the other line.</span>
accountKey &lt;account-key-here-delete-next-line&gt;
<span style="color:#8f5902;font-style:italic">#change authType to specify only 1</span>
sasToken &lt;shared-access-token-here-delete-previous-line&gt;
authType &lt;MSI/SAS/SPN/Key/empty&gt;
containerName &lt;insert-container-name-here&gt;
</code></pre></div></li>
<li>
<p>Create a bash script named <code>azure_fuse</code>(e.g in /usr/bin, as root) with content below
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>mount_point</code>, <code>/path/to/blobfusetmp</code>,<code>/path/to/connection.cfg</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; blobfuse &lt;mount_point&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/blobfusetmp  --config-file<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/connection.cfg -o allow_other
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/azure_fuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> with the blobfuse script. Add the following line(replace paths):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/azure_fuse &lt;/path/to/desired/mountpoint&gt; fuse allow_other,user,_netdev
</code></pre></div></li>
</ol>
<h5 id="a-nameazure_using_systemdusing-systemda"><a name="azure_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/blobfuse.service</code>.
(replace <code>user_name</code>, <code>mount_point</code>, <code>container_name</code>,<code>/path/to/connection.cfg</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over Azure container
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>blobfuse <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> --container-name<span style="color:#ce5c00;font-weight:bold">=</span>&lt;container_name&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/mnt/blobfusetmp --config-file<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/connection.cfg -o allow_other
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> blobfuse.service
sudo systemctl start blobfuse.service
</code></pre></div><p>Or for more detail <a href="https://github.com/Azure/azure-storage-fuse/tree/master/systemd">see here</a></p>
</li>
</ol>
<h4 id="a-nameazure_checkchecka"><a name="azure_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;blobfuse&#39;</span>
</code></pre></div><h4 id="a-nameazure_unmount_filesystemunmount-filesystema"><a name="azure_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#azure_using_systemd">systemd</a> to mount a container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop blobfuse.service
sudo systemctl disable blobfuse.service
</code></pre></div><p>If you have any mounting problems, check out the <a href="https://github.com/Azure/azure-storage-fuse/wiki/3.-Troubleshoot-FAQ">answers</a>
to common problems</p>
<h2 id="google-drive-as-filesystem">Google Drive as filesystem</h2>
<h3 id="a-namegoogle_drive_ubuntu_2004ubuntu-2004a"><a name="google_drive_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-namegoogle_drive_mountmounta"><a name="google_drive_mount">Mount</a></h4>
<p>To mount a google drive as a filesystem in user space(FUSE)
you can use <a href="https://github.com/astrada/google-drive-ocamlfuse">google-drive-ocamlfuse</a>
To do this follow the instructions below:</p>
<ol>
<li>
<p>Install google-drive-ocamlfuse:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:alessandro-strada/ppa
sudo apt-get update
sudo apt-get install google-drive-ocamlfuse
</code></pre></div></li>
<li>
<p>Run <code>google-drive-ocamlfuse</code> without parameters:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">google-drive-ocamlfuse
</code></pre></div><p>This command will create the default application directory (~/.gdfuse/default),
containing the configuration file config (see the <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki">wiki</a>
page for more details about configuration).
And it will start a web browser to obtain authorization to access your Google Drive.
This will let you modify default configuration before mounting the filesystem.</p>
<p>Then you can choose a local directory to mount your Google Drive (e.g.: ~/GoogleDrive).</p>
</li>
<li>
<p>Create the mount point, if it doesn&rsquo;t exist(replace mount_point):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">mountpoint</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;mount_point&gt;&#34;</span>
mkdir -p <span style="color:#000">$mountpoint</span>
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Mount the filesystem:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">google-drive-ocamlfuse -o allow_other <span style="color:#000">$mountpoint</span>
</code></pre></div></li>
</ol>
<h4 id="a-namegoogle_drive_automatically_mountautomatically-mounta"><a name="google_drive_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 4 mounting steps above.</p>
<h5 id="a-namegoogle_drive_using_fstabusing-fstaba"><a name="google_drive_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create a bash script named gdfuse(e.g in /usr/bin, as root) with this content
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>label</code>, <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; google-drive-ocamlfuse -o allow_other -label &lt;label&gt; &lt;mount_point&gt;
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/gdfuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> adding a line like this, replace <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/gdfuse  &lt;mount_point&gt;     fuse    allow_other,user,_netdev     <span style="color:#0000cf;font-weight:bold">0</span>       <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div><p>For more details see <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki/Automounting">here</a></p>
</li>
</ol>
<h5 id="a-namegoogle_drive_using_systemdusing-systemda"><a name="google_drive_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/google-drive-ocamlfuse.service</code>.
(replace <code>user_name</code>, <code>label</code>(default <code>label=default</code>), <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over Google Drive
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>google-drive-ocamlfuse -label &lt;label&gt; <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the drive:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> google-drive-ocamlfuse.service
sudo systemctl start google-drive-ocamlfuse.service
</code></pre></div><p>For more details see <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki/Automounting">here</a></p>
</li>
</ol>
<h4 id="a-namegoogle_drive_checkchecka"><a name="google_drive_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;google-drive-ocamlfuse&#39;</span>
</code></pre></div><h4 id="a-namegoogle_drive_unmount_filesystemunmount-filesystema"><a name="google_drive_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#google_drive_using_systemd">systemd</a> to mount a drive:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop google-drive-ocamlfuse.service
sudo systemctl disable google-drive-ocamlfuse.service
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c7cf871a1ff98f3a84b27456c266df2c">3.2.4 - Backup guide</h1>
    <div class="lead">Instructions on how to backup CVAT data with Docker.</div>
	<!--lint disable heading-style-->
<h2 id="about-cvat-data-volumes">About CVAT data volumes</h2>
<p>Docker volumes are used to store all CVAT data:</p>
<ul>
<li>
<p><code>cvat_db</code>: PostgreSQL database files, used to store information about users, tasks, projects, annotations, etc.
Mounted into <code>cvat_db</code> container by <code>/var/lib/postgresql/data</code> path.</p>
</li>
<li>
<p><code>cvat_data</code>: used to store uploaded and prepared media data.
Mounted into <code>cvat</code> container by <code>/home/django/data</code> path.</p>
</li>
<li>
<p><code>cvat_keys</code>: used to store user ssh keys needed for <a href="../../docs/manual/advanced/task-synchronization/">synchronization with a remote Git repository</a>.
Mounted into <code>cvat</code> container by <code>/home/django/keys</code> path.</p>
</li>
<li>
<p><code>cvat_logs</code>: used to store logs of CVAT backend processes managed by supevisord.
Mounted into <code>cvat</code> container by <code>/home/django/logs</code> path.</p>
</li>
<li>
<p><code>cvat_events</code>: this is an optional volume that is used only when <a href="../../docs/administration/advanced/analytics/">Analytics component</a>
is enabled and is used to store Elasticsearch database files.
Mounted into <code>cvat_elasticsearch</code> container by <code>/usr/share/elasticsearch/data</code> path.</p>
</li>
</ul>
<h2 id="how-to-backup-all-cvat-data">How to backup all CVAT data</h2>
<p>All CVAT containers should be stopped before backup:</p>
<pre><code class="language-console" data-lang="console">docker-compose stop
</code></pre><p>Please don&rsquo;t forget to include all the compose config files that were used in the docker-compose command
using the <code>-f</code> parameter.</p>
<p>Backup data:</p>
<pre><code class="language-console" data-lang="console">mkdir backup
docker run --rm --name temp_backup --volumes-from cvat_db -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_db.tar.bz2 /var/lib/postgresql/data
docker run --rm --name temp_backup --volumes-from cvat -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_data.tar.bz2 /home/django/data
# [optional]
docker run --rm --name temp_backup --volumes-from cvat_elasticsearch -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_events.tar.bz2 /usr/share/elasticsearch/data
</code></pre><p>Make sure the backup archives have been created, the output of <code>ls backup</code> command should look like this:</p>
<pre><code class="language-console" data-lang="console">ls backup
cvat_data.tar.bz2  cvat_db.tar.bz2  cvat_events.tar.bz2
</code></pre><h2 id="how-to-restore-cvat-from-backup">How to restore CVAT from backup</h2>
<p>Note: CVAT containers must exist (if no, please follow the <a href="../../docs/administration/basics/installation/#quick-installation-guide">installation guide</a>).
Stop all CVAT containers:</p>
<pre><code class="language-console" data-lang="console">docker-compose stop
</code></pre><p>Restore data:</p>
<pre><code class="language-console" data-lang="console">cd &lt;path_to_backup_folder&gt;
docker run --rm --name temp_backup --volumes-from cvat_db -v $(pwd):/backup ubuntu bash -c &quot;cd /var/lib/postgresql/data &amp;&amp; tar -xvf /backup/cvat_db.tar.bz2 --strip 4&quot;
docker run --rm --name temp_backup --volumes-from cvat -v $(pwd):/backup ubuntu bash -c &quot;cd /home/django/data &amp;&amp; tar -xvf /backup/cvat_data.tar.bz2 --strip 3&quot;
# [optional]
docker run --rm --name temp_backup --volumes-from cvat_elasticsearch -v $(pwd):/backup ubuntu bash -c &quot;cd /usr/share/elasticsearch/data &amp;&amp; tar -xvf /backup/cvat_events.tar.bz2 --strip 4&quot;
</code></pre><p>After that run CVAT as usual:</p>
<pre><code class="language-console" data-lang="console">docker-compose up -d
</code></pre><h2 id="additional-resources">Additional resources</h2>
<p><a href="https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes">Docker guide about volume backups</a></p>

</div>



    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-99612595f9f698dd585c96dcc8298d9a">4 - Contributing to this project</h1>
    <div class="lead">This section contains documents for CVAT developers.</div>
	<p>Please take a moment to review this document in order to make the contribution
process easy and effective for everyone involved.</p>
<p>Following these guidelines helps to communicate that you respect the time of
the developers managing and developing this open source project. In return,
they should reciprocate that respect in addressing your issue or assessing
patches and features.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-581cde702b4a79613a0ad27e40794a90">4.1 - Development environment</h1>
    <div class="lead">Installing a development environment for different operating systems.</div>
	<ul>
<li>
<p>Install necessary dependencies:</p>
<p>Ubuntu 18.04</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo apt-get update <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> sudo apt-get --no-install-recommends install -y build-essential curl redis-server python3-dev python3-pip python3-venv python3-tk libldap2-dev libsasl2-dev pkg-config libavformat-dev libavcodec-dev libavdevice-dev libavutil-dev libswscale-dev libswresample-dev libavfilter-dev
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#8f5902;font-style:italic"># Install Node.js 16</span>
curl -sL https://deb.nodesource.com/setup_16.x <span style="color:#000;font-weight:bold">|</span> sudo -E bash -
sudo apt-get install -y nodejs
</code></pre></div><p>MacOS 10.15</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">brew install git python pyenv redis curl openssl node
</code></pre></div></li>
<li>
<p>Install FFmpeg libraries (libav*) version 4.0 or higher.</p>
</li>
<li>
<p>Install <a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">Visual Studio Code</a>
for development</p>
</li>
<li>
<p>Install CVAT on your local host:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">git clone https://github.com/openvinotoolkit/cvat
<span style="color:#204a87">cd</span> cvat <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> mkdir logs keys
python3 -m venv .env
. .env/bin/activate
pip install -U pip wheel setuptools
pip install -r cvat/requirements/development.txt
python manage.py migrate
python manage.py collectstatic
</code></pre></div><blockquote>
<p>Note for Mac users</p>
<p>If you have any problems with installing dependencies from
<code>cvat/requirements/*.txt</code>, you may need to reinstall your system python
In some cases after system update it can be configured incorrectly and cannot compile some native modules</p>
</blockquote>
</li>
<li>
<p>Create a super user for CVAT:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ python manage.py createsuperuser
Username <span style="color:#ce5c00;font-weight:bold">(</span>leave blank to use <span style="color:#4e9a06">&#39;django&#39;</span><span style="color:#ce5c00;font-weight:bold">)</span>: ***
Email address: ***
Password: ***
Password <span style="color:#ce5c00;font-weight:bold">(</span>again<span style="color:#ce5c00;font-weight:bold">)</span>: ***
</code></pre></div></li>
<li>
<p>Install npm packages for UI and start UI debug server (run the following command from CVAT root directory):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">npm ci <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> npm run start:cvat-ui
</code></pre></div><blockquote>
<p>Note for Mac users</p>
<p>If you faced with error</p>
<p><code>Node Sass does not yet support your current environment: OS X 64-bit with Unsupported runtime (57)</code></p>
<p>Read this article <a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome">Node Sass does not yet support your current environment</a></p>
</blockquote>
</li>
<li>
<p>Open new terminal (Ctrl + Shift + T), run Visual Studio Code from the virtual environment</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#204a87">source</span> .env/bin/activate <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> code
</code></pre></div></li>
<li>
<p>Install following VS Code extensions:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome">Debugger for Chrome</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">ESLint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=stylelint.vscode-stylelint">Stylelint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=drewbourne.vscode-remark-lint">vscode-remark-lint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ymotongpoo.licenser">licenser</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=shardulm94.trailing-spaces">Trailing Spaces</a></li>
</ul>
</li>
<li>
<p>Reload Visual Studio Code from virtual environment</p>
</li>
<li>
<p>Select <code>server: debug</code> configuration and start it (F5) to run REST server and its workers</p>
</li>
</ul>
<p>You have done! Now it is possible to insert breakpoints and debug server and client of the tool.</p>
<h2 id="note-for-windows-users">Note for Windows users</h2>
<p>You develop CVAT under WSL (Windows subsystem for Linux) following next steps.</p>
<ul>
<li>
<p>Install WSL using <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">this guide</a>.</p>
</li>
<li>
<p>Following this guide install Ubuntu 18.04 Linux distribution for WSL.</p>
</li>
<li>
<p>Run Ubuntu using start menu link or execute next command</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">wsl</span> <span style="color:#000">-d</span> <span style="color:#000">Ubuntu</span><span style="color:#000;font-weight:bold">-</span><span style="color:#000">18</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">04</span>
</code></pre></div></li>
<li>
<p>Run all commands from this installation guide in WSL Ubuntu shell.</p>
</li>
<li>
<p>You might have to manually start the redis server in wsl before you can start the configuration inside
Visual Studio Code. You can do this with <code>sudo service redis-server start</code>. Alternatively you can also
use a redis docker image instead of using the redis-server locally.</p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9331ae571b7ea5467eaf6403bb797504">4.2 - Setup additional components in development environment</h1>
    <div class="lead">Deploying a DL model as a serverless function and Cypress tests.</div>
	<h2 id="dl-models-as-serverless-functions">DL models as serverless functions</h2>
<p>Follow this <a href="../../docs/administration/advanced/installation_automatic_annotation/">guide</a> to install Nuclio:</p>
<ul>
<li>You have to install <code>nuctl</code> command line tool to build and deploy serverless
functions.</li>
<li>The simplest way to explore Nuclio is to run its graphical user interface (GUI)
of the Nuclio dashboard. All you need in order to run the dashboard is Docker. See
<a href="https://github.com/nuclio/nuclio#quick-start-steps">nuclio documentation</a>
for more details.</li>
<li>Create <code>cvat</code> project inside nuclio dashboard where you will deploy new
serverless functions and deploy a couple of DL models.</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl create project cvat
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --path serverless/openvino/dextr/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --platform <span style="color:#204a87">local</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">20.07.17 12:02:23.247                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Deploying <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:23.248                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;versionInfo&#34;</span>: <span style="color:#4e9a06">&#34;Label: 1.4.8, Git commit: 238d4539ac7783896d6c414535d0462b5f4cbcf1, OS: darwin, Arch: amd64, Go version: go1.14.3&#34;</span>, <span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:23.447                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Cleaning up before deployment
20.07.17 12:02:23.535                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Function already exists, deleting
20.07.17 12:02:25.877                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Staging files and preparing base images
20.07.17 12:02:25.891                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building processor image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:25.891     nuctl.platform.docker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pulling image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;quay.io/nuclio/handler-builder-python-onbuild:1.4.8-amd64&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:29.270     nuctl.platform.docker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pulling image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;quay.io/nuclio/uhttpc:0.0.1-amd64&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:33.208            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building docker image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:34.464            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pushing docker image into registry <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span>, <span style="color:#4e9a06">&#34;registry&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:34.464            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Docker image was successfully built and pushed into docker registry <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:34.464                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Build <span style="color:#204a87">complete</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;result&#34;</span>: <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span>,<span style="color:#4e9a06">&#34;UpdatedFunctionConfig&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;metadata&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;openvino.dextr&#34;</span>,<span style="color:#4e9a06">&#34;namespace&#34;</span>:<span style="color:#4e9a06">&#34;nuclio&#34;</span>,<span style="color:#4e9a06">&#34;labels&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;nuclio.io/project-name&#34;</span>:<span style="color:#4e9a06">&#34;cvat&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#4e9a06">&#34;annotations&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;framework&#34;</span>:<span style="color:#4e9a06">&#34;openvino&#34;</span>,<span style="color:#4e9a06">&#34;spec&#34;</span>:<span style="color:#4e9a06">&#34;&#34;</span>,<span style="color:#4e9a06">&#34;type&#34;</span>:<span style="color:#4e9a06">&#34;interactor&#34;</span><span style="color:#ce5c00;font-weight:bold">}}</span>,<span style="color:#4e9a06">&#34;spec&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;description&#34;</span>:<span style="color:#4e9a06">&#34;Deep Extreme Cut&#34;</span>,<span style="color:#4e9a06">&#34;handler&#34;</span>:<span style="color:#4e9a06">&#34;main:handler&#34;</span>,<span style="color:#4e9a06">&#34;runtime&#34;</span>:<span style="color:#4e9a06">&#34;python:3.6&#34;</span>,<span style="color:#4e9a06">&#34;env&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;NUCLIO_PYTHON_EXE_PATH&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio/python3&#34;</span><span style="color:#ce5c00;font-weight:bold">}]</span>,<span style="color:#4e9a06">&#34;resources&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{}</span>,<span style="color:#4e9a06">&#34;image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.dextr:latest&#34;</span>,<span style="color:#4e9a06">&#34;targetCPU&#34;</span>:75,<span style="color:#4e9a06">&#34;triggers&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;myHttpTrigger&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;class&#34;</span>:<span style="color:#4e9a06">&#34;&#34;</span>,<span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;http&#34;</span>,<span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;&#34;</span>,<span style="color:#4e9a06">&#34;maxWorkers&#34;</span>:2,<span style="color:#4e9a06">&#34;workerAvailabilityTimeoutMilliseconds&#34;</span>:10000,<span style="color:#4e9a06">&#34;attributes&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;maxRequestBodySize&#34;</span>:33554432<span style="color:#ce5c00;font-weight:bold">}}}</span>,<span style="color:#4e9a06">&#34;volumes&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;volume&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;volume-1&#34;</span>,<span style="color:#4e9a06">&#34;hostPath&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;path&#34;</span>:<span style="color:#4e9a06">&#34;/Users/nmanovic/Workspace/cvat/serverless/openvino/common&#34;</span><span style="color:#ce5c00;font-weight:bold">}}</span>,<span style="color:#4e9a06">&#34;volumeMount&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;volume-1&#34;</span>,<span style="color:#4e9a06">&#34;mountPath&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio/common&#34;</span><span style="color:#ce5c00;font-weight:bold">}}]</span>,<span style="color:#4e9a06">&#34;build&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.dextr&#34;</span>,<span style="color:#4e9a06">&#34;baseImage&#34;</span>:<span style="color:#4e9a06">&#34;openvino/ubuntu18_runtime:2020.2&#34;</span>,<span style="color:#4e9a06">&#34;directives&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;postCopy&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;curl -O https://download.01.org/openvinotoolkit/models_contrib/cvat/dextr_model_v1.zip&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;unzip dextr_model_v1.zip&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;pip3 install Pillow&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;USER&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;openvino&#34;</span><span style="color:#ce5c00;font-weight:bold">}]</span>,<span style="color:#4e9a06">&#34;preCopy&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;USER&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;root&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;WORKDIR&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;ln -s /usr/bin/pip3 /usr/bin/pip&#34;</span><span style="color:#ce5c00;font-weight:bold">}]}</span>,<span style="color:#4e9a06">&#34;codeEntryType&#34;</span>:<span style="color:#4e9a06">&#34;image&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#4e9a06">&#34;platform&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{}</span>,<span style="color:#4e9a06">&#34;readinessTimeoutSeconds&#34;</span>:60,<span style="color:#4e9a06">&#34;eventTimeout&#34;</span>:<span style="color:#4e9a06">&#34;30s&#34;</span><span style="color:#ce5c00;font-weight:bold">}}}}</span>
20.07.17 12:02:35.012            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Waiting <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#204a87;font-weight:bold">function</span> to be ready <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;timeout&#34;</span>: 60<span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:02:37.448                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Function deploy <span style="color:#204a87">complete</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;httpPort&#34;</span>: 55274<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div></details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --path serverless/openvino/omz/public/yolo-v3-tf/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/openvino/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    --platform <span style="color:#204a87">local</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">20.07.17 12:05:23.377                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Deploying <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:23.378                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;versionInfo&#34;</span>: <span style="color:#4e9a06">&#34;Label: 1.4.8, Git commit: 238d4539ac7783896d6c414535d0462b5f4cbcf1, OS: darwin, Arch: amd64, Go version: go1.14.3&#34;</span>, <span style="color:#4e9a06">&#34;name&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:23.590                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Cleaning up before deployment
20.07.17 12:05:23.694                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Function already exists, deleting
20.07.17 12:05:24.271                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Staging files and preparing base images
20.07.17 12:05:24.274                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building processor image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:24.274     nuctl.platform.docker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pulling image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;quay.io/nuclio/handler-builder-python-onbuild:1.4.8-amd64&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:27.432     nuctl.platform.docker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pulling image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;imageName&#34;</span>: <span style="color:#4e9a06">&#34;quay.io/nuclio/uhttpc:0.0.1-amd64&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:31.462            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Building docker image <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:32.798            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Pushing docker image into registry <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span>, <span style="color:#4e9a06">&#34;registry&#34;</span>: <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:32.798            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Docker image was successfully built and pushed into docker registry <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>: <span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:32.798                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Build <span style="color:#204a87">complete</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;result&#34;</span>: <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span>,<span style="color:#4e9a06">&#34;UpdatedFunctionConfig&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;metadata&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;openvino.omz.public.yolo-v3-tf&#34;</span>,<span style="color:#4e9a06">&#34;namespace&#34;</span>:<span style="color:#4e9a06">&#34;nuclio&#34;</span>,<span style="color:#4e9a06">&#34;labels&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;nuclio.io/project-name&#34;</span>:<span style="color:#4e9a06">&#34;cvat&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#4e9a06">&#34;annotations&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;framework&#34;</span>:<span style="color:#4e9a06">&#34;openvino&#34;</span>,<span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;YOLO v3&#34;</span>,<span style="color:#4e9a06">&#34;spec&#34;</span>:<span style="color:#4e9a06">&#34;[\n  { \&#34;id\&#34;: 0, \&#34;name\&#34;: \&#34;person\&#34; },\n  { \&#34;id\&#34;: 1, \&#34;name\&#34;: \&#34;bicycle\&#34; },\n  { \&#34;id\&#34;: 2, \&#34;name\&#34;: \&#34;car\&#34; },\n  { \&#34;id\&#34;: 3, \&#34;name\&#34;: \&#34;motorbike\&#34; },\n  { \&#34;id\&#34;: 4, \&#34;name\&#34;: \&#34;aeroplane\&#34; },\n  { \&#34;id\&#34;: 5, \&#34;name\&#34;: \&#34;bus\&#34; },\n  { \&#34;id\&#34;: 6, \&#34;name\&#34;: \&#34;train\&#34; },\n  { \&#34;id\&#34;: 7, \&#34;name\&#34;: \&#34;truck\&#34; },\n  { \&#34;id\&#34;: 8, \&#34;name\&#34;: \&#34;boat\&#34; },\n  { \&#34;id\&#34;: 9, \&#34;name\&#34;: \&#34;traffic light\&#34; },\n  { \&#34;id\&#34;: 10, \&#34;name\&#34;: \&#34;fire hydrant\&#34; },\n  { \&#34;id\&#34;: 11, \&#34;name\&#34;: \&#34;stop sign\&#34; },\n  { \&#34;id\&#34;: 12, \&#34;name\&#34;: \&#34;parking meter\&#34; },\n  { \&#34;id\&#34;: 13, \&#34;name\&#34;: \&#34;bench\&#34; },\n  { \&#34;id\&#34;: 14, \&#34;name\&#34;: \&#34;bird\&#34; },\n  { \&#34;id\&#34;: 15, \&#34;name\&#34;: \&#34;cat\&#34; },\n  { \&#34;id\&#34;: 16, \&#34;name\&#34;: \&#34;dog\&#34; },\n  { \&#34;id\&#34;: 17, \&#34;name\&#34;: \&#34;horse\&#34; },\n  { \&#34;id\&#34;: 18, \&#34;name\&#34;: \&#34;sheep\&#34; },\n  { \&#34;id\&#34;: 19, \&#34;name\&#34;: \&#34;cow\&#34; },\n  { \&#34;id\&#34;: 20, \&#34;name\&#34;: \&#34;elephant\&#34; },\n  { \&#34;id\&#34;: 21, \&#34;name\&#34;: \&#34;bear\&#34; },\n  { \&#34;id\&#34;: 22, \&#34;name\&#34;: \&#34;zebra\&#34; },\n  { \&#34;id\&#34;: 23, \&#34;name\&#34;: \&#34;giraffe\&#34; },\n  { \&#34;id\&#34;: 24, \&#34;name\&#34;: \&#34;backpack\&#34; },\n  { \&#34;id\&#34;: 25, \&#34;name\&#34;: \&#34;umbrella\&#34; },\n  { \&#34;id\&#34;: 26, \&#34;name\&#34;: \&#34;handbag\&#34; },\n  { \&#34;id\&#34;: 27, \&#34;name\&#34;: \&#34;tie\&#34; },\n  { \&#34;id\&#34;: 28, \&#34;name\&#34;: \&#34;suitcase\&#34; },\n  { \&#34;id\&#34;: 29, \&#34;name\&#34;: \&#34;frisbee\&#34; },\n  { \&#34;id\&#34;: 30, \&#34;name\&#34;: \&#34;skis\&#34; },\n  { \&#34;id\&#34;: 31, \&#34;name\&#34;: \&#34;snowboard\&#34; },\n  { \&#34;id\&#34;: 32, \&#34;name\&#34;: \&#34;sports ball\&#34; },\n  { \&#34;id\&#34;: 33, \&#34;name\&#34;: \&#34;kite\&#34; },\n  { \&#34;id\&#34;: 34, \&#34;name\&#34;: \&#34;baseball bat\&#34; },\n  { \&#34;id\&#34;: 35, \&#34;name\&#34;: \&#34;baseball glove\&#34; },\n  { \&#34;id\&#34;: 36, \&#34;name\&#34;: \&#34;skateboard\&#34; },\n  { \&#34;id\&#34;: 37, \&#34;name\&#34;: \&#34;surfboard\&#34; },\n  { \&#34;id\&#34;: 38, \&#34;name\&#34;: \&#34;tennis racket\&#34; },\n  { \&#34;id\&#34;: 39, \&#34;name\&#34;: \&#34;bottle\&#34; },\n  { \&#34;id\&#34;: 40, \&#34;name\&#34;: \&#34;wine glass\&#34; },\n  { \&#34;id\&#34;: 41, \&#34;name\&#34;: \&#34;cup\&#34; },\n  { \&#34;id\&#34;: 42, \&#34;name\&#34;: \&#34;fork\&#34; },\n  { \&#34;id\&#34;: 43, \&#34;name\&#34;: \&#34;knife\&#34; },\n  { \&#34;id\&#34;: 44, \&#34;name\&#34;: \&#34;spoon\&#34; },\n  { \&#34;id\&#34;: 45, \&#34;name\&#34;: \&#34;bowl\&#34; },\n  { \&#34;id\&#34;: 46, \&#34;name\&#34;: \&#34;banana\&#34; },\n  { \&#34;id\&#34;: 47, \&#34;name\&#34;: \&#34;apple\&#34; },\n  { \&#34;id\&#34;: 48, \&#34;name\&#34;: \&#34;sandwich\&#34; },\n  { \&#34;id\&#34;: 49, \&#34;name\&#34;: \&#34;orange\&#34; },\n  { \&#34;id\&#34;: 50, \&#34;name\&#34;: \&#34;broccoli\&#34; },\n  { \&#34;id\&#34;: 51, \&#34;name\&#34;: \&#34;carrot\&#34; },\n  { \&#34;id\&#34;: 52, \&#34;name\&#34;: \&#34;hot dog\&#34; },\n  { \&#34;id\&#34;: 53, \&#34;name\&#34;: \&#34;pizza\&#34; },\n  { \&#34;id\&#34;: 54, \&#34;name\&#34;: \&#34;donut\&#34; },\n  { \&#34;id\&#34;: 55, \&#34;name\&#34;: \&#34;cake\&#34; },\n  { \&#34;id\&#34;: 56, \&#34;name\&#34;: \&#34;chair\&#34; },\n  { \&#34;id\&#34;: 57, \&#34;name\&#34;: \&#34;sofa\&#34; },\n  { \&#34;id\&#34;: 58, \&#34;name\&#34;: \&#34;pottedplant\&#34; },\n  { \&#34;id\&#34;: 59, \&#34;name\&#34;: \&#34;bed\&#34; },\n  { \&#34;id\&#34;: 60, \&#34;name\&#34;: \&#34;diningtable\&#34; },\n  { \&#34;id\&#34;: 61, \&#34;name\&#34;: \&#34;toilet\&#34; },\n  { \&#34;id\&#34;: 62, \&#34;name\&#34;: \&#34;tvmonitor\&#34; },\n  { \&#34;id\&#34;: 63, \&#34;name\&#34;: \&#34;laptop\&#34; },\n  { \&#34;id\&#34;: 64, \&#34;name\&#34;: \&#34;mouse\&#34; },\n  { \&#34;id\&#34;: 65, \&#34;name\&#34;: \&#34;remote\&#34; },\n  { \&#34;id\&#34;: 66, \&#34;name\&#34;: \&#34;keyboard\&#34; },\n  { \&#34;id\&#34;: 67, \&#34;name\&#34;: \&#34;cell phone\&#34; },\n  { \&#34;id\&#34;: 68, \&#34;name\&#34;: \&#34;microwave\&#34; },\n  { \&#34;id\&#34;: 69, \&#34;name\&#34;: \&#34;oven\&#34; },\n  { \&#34;id\&#34;: 70, \&#34;name\&#34;: \&#34;toaster\&#34; },\n  { \&#34;id\&#34;: 71, \&#34;name\&#34;: \&#34;sink\&#34; },\n  { \&#34;id\&#34;: 72, \&#34;name\&#34;: \&#34;refrigerator\&#34; },\n  { \&#34;id\&#34;: 73, \&#34;name\&#34;: \&#34;book\&#34; },\n  { \&#34;id\&#34;: 74, \&#34;name\&#34;: \&#34;clock\&#34; },\n  { \&#34;id\&#34;: 75, \&#34;name\&#34;: \&#34;vase\&#34; },\n  { \&#34;id\&#34;: 76, \&#34;name\&#34;: \&#34;scissors\&#34; },\n  { \&#34;id\&#34;: 77, \&#34;name\&#34;: \&#34;teddy bear\&#34; },\n  { \&#34;id\&#34;: 78, \&#34;name\&#34;: \&#34;hair drier\&#34; },\n  { \&#34;id\&#34;: 79, \&#34;name\&#34;: \&#34;toothbrush\&#34; }\n]\n&#34;</span>,<span style="color:#4e9a06">&#34;type&#34;</span>:<span style="color:#4e9a06">&#34;detector&#34;</span><span style="color:#ce5c00;font-weight:bold">}}</span>,<span style="color:#4e9a06">&#34;spec&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;description&#34;</span>:<span style="color:#4e9a06">&#34;YOLO v3 via Intel OpenVINO&#34;</span>,<span style="color:#4e9a06">&#34;handler&#34;</span>:<span style="color:#4e9a06">&#34;main:handler&#34;</span>,<span style="color:#4e9a06">&#34;runtime&#34;</span>:<span style="color:#4e9a06">&#34;python:3.6&#34;</span>,<span style="color:#4e9a06">&#34;env&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;NUCLIO_PYTHON_EXE_PATH&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio/common/python3&#34;</span><span style="color:#ce5c00;font-weight:bold">}]</span>,<span style="color:#4e9a06">&#34;resources&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{}</span>,<span style="color:#4e9a06">&#34;image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf:latest&#34;</span>,<span style="color:#4e9a06">&#34;targetCPU&#34;</span>:75,<span style="color:#4e9a06">&#34;triggers&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;myHttpTrigger&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;class&#34;</span>:<span style="color:#4e9a06">&#34;&#34;</span>,<span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;http&#34;</span>,<span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;&#34;</span>,<span style="color:#4e9a06">&#34;maxWorkers&#34;</span>:2,<span style="color:#4e9a06">&#34;workerAvailabilityTimeoutMilliseconds&#34;</span>:10000,<span style="color:#4e9a06">&#34;attributes&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;maxRequestBodySize&#34;</span>:33554432<span style="color:#ce5c00;font-weight:bold">}}}</span>,<span style="color:#4e9a06">&#34;volumes&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;volume&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;volume-1&#34;</span>,<span style="color:#4e9a06">&#34;hostPath&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;path&#34;</span>:<span style="color:#4e9a06">&#34;/Users/nmanovic/Workspace/cvat/serverless/openvino/common&#34;</span><span style="color:#ce5c00;font-weight:bold">}}</span>,<span style="color:#4e9a06">&#34;volumeMount&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span>:<span style="color:#4e9a06">&#34;volume-1&#34;</span>,<span style="color:#4e9a06">&#34;mountPath&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio/common&#34;</span><span style="color:#ce5c00;font-weight:bold">}}]</span>,<span style="color:#4e9a06">&#34;build&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;image&#34;</span>:<span style="color:#4e9a06">&#34;cvat/openvino.omz.public.yolo-v3-tf&#34;</span>,<span style="color:#4e9a06">&#34;baseImage&#34;</span>:<span style="color:#4e9a06">&#34;openvino/ubuntu18_dev:2020.2&#34;</span>,<span style="color:#4e9a06">&#34;directives&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;postCopy&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;USER&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;openvino&#34;</span><span style="color:#ce5c00;font-weight:bold">}]</span>,<span style="color:#4e9a06">&#34;preCopy&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;USER&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;root&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;WORKDIR&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/nuclio&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;ln -s /usr/bin/pip3 /usr/bin/pip&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/intel/openvino/deployment_tools/open_model_zoo/tools/downloader/downloader.py --name yolo-v3-tf -o /opt/nuclio/open_model_zoo&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;kind&#34;</span>:<span style="color:#4e9a06">&#34;RUN&#34;</span>,<span style="color:#4e9a06">&#34;value&#34;</span>:<span style="color:#4e9a06">&#34;/opt/intel/openvino/deployment_tools/open_model_zoo/tools/downloader/converter.py --name yolo-v3-tf --precisions FP32 -d /opt/nuclio/open_model_zoo -o /opt/nuclio/open_model_zoo&#34;</span><span style="color:#ce5c00;font-weight:bold">}]}</span>,<span style="color:#4e9a06">&#34;codeEntryType&#34;</span>:<span style="color:#4e9a06">&#34;image&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>,<span style="color:#4e9a06">&#34;platform&#34;</span>:<span style="color:#ce5c00;font-weight:bold">{}</span>,<span style="color:#4e9a06">&#34;readinessTimeoutSeconds&#34;</span>:60,<span style="color:#4e9a06">&#34;eventTimeout&#34;</span>:<span style="color:#4e9a06">&#34;30s&#34;</span><span style="color:#ce5c00;font-weight:bold">}}}}</span>
20.07.17 12:05:33.285            nuctl.platform <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Waiting <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#204a87;font-weight:bold">function</span> to be ready <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;timeout&#34;</span>: 60<span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:05:35.452                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Function deploy <span style="color:#204a87">complete</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;httpPort&#34;</span>: 57308<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div></details>
<ul>
<li>Display a list of running serverless functions using <code>nuctl</code> command or see them
in nuclio dashboard:</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl get <span style="color:#204a87;font-weight:bold">function</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  NAMESPACE <span style="color:#000;font-weight:bold">|</span>                             NAME                              <span style="color:#000;font-weight:bold">|</span> PROJECT <span style="color:#000;font-weight:bold">|</span> STATE <span style="color:#000;font-weight:bold">|</span> NODE PORT <span style="color:#000;font-weight:bold">|</span> REPLICAS
  nuclio    <span style="color:#000;font-weight:bold">|</span> openvino.dextr                                                <span style="color:#000;font-weight:bold">|</span> cvat    <span style="color:#000;font-weight:bold">|</span> ready <span style="color:#000;font-weight:bold">|</span>     <span style="color:#0000cf;font-weight:bold">55274</span> <span style="color:#000;font-weight:bold">|</span> 1/1
  nuclio    <span style="color:#000;font-weight:bold">|</span> openvino.omz.public.yolo-v3-tf                                <span style="color:#000;font-weight:bold">|</span> cvat    <span style="color:#000;font-weight:bold">|</span> ready <span style="color:#000;font-weight:bold">|</span>     <span style="color:#0000cf;font-weight:bold">57308</span> <span style="color:#000;font-weight:bold">|</span> 1/1
</code></pre></div></details>
<ul>
<li>Test your deployed DL model as a serverless function. The command below
should work on Linux and Mac OS.</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">image</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>curl https://upload.wikimedia.org/wikipedia/en/7/7d/Lenna_%28test_image%29.png --output - <span style="color:#000;font-weight:bold">|</span> base64 <span style="color:#000;font-weight:bold">|</span> tr -d <span style="color:#4e9a06">&#39;\n&#39;</span><span style="color:#204a87;font-weight:bold">)</span>
cat <span style="color:#4e9a06">&lt;&lt; EOF &gt; /tmp/input.json
</span><span style="color:#4e9a06">{&#34;image&#34;: &#34;$image&#34;}
</span><span style="color:#4e9a06">EOF</span>
cat /tmp/input.json <span style="color:#000;font-weight:bold">|</span> nuctl invoke openvino.omz.public.yolo-v3-tf -c <span style="color:#4e9a06">&#39;application/json&#39;</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">20.07.17 12:07:44.519    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Executing <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;method&#34;</span>: <span style="color:#4e9a06">&#34;POST&#34;</span>, <span style="color:#4e9a06">&#34;url&#34;</span>: <span style="color:#4e9a06">&#34;http://:57308&#34;</span>, <span style="color:#4e9a06">&#34;headers&#34;</span>: <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Content-Type&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Log-Level&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;info&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Target&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;openvino.omz.public.yolo-v3-tf&#34;</span><span style="color:#ce5c00;font-weight:bold">]}}</span>
20.07.17 12:07:45.275    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Got response <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span>: <span style="color:#4e9a06">&#34;200 OK&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> &gt;&gt;&gt; Start of <span style="color:#204a87;font-weight:bold">function</span> logs
20.07.17 12:07:45.275 ino.omz.public.yolo-v3-tf <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Run yolo-v3-tf model <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;worker_id&#34;</span>: <span style="color:#4e9a06">&#34;0&#34;</span>, <span style="color:#4e9a06">&#34;time&#34;</span>: 1594976864570.9353<span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;&lt;</span> End of <span style="color:#204a87;font-weight:bold">function</span> logs

&gt; Response headers:
<span style="color:#000">Date</span> <span style="color:#ce5c00;font-weight:bold">=</span> Fri, <span style="color:#0000cf;font-weight:bold">17</span> Jul <span style="color:#0000cf;font-weight:bold">2020</span> 09:07:45 GMT
Content-Type <span style="color:#ce5c00;font-weight:bold">=</span> application/json
Content-Length <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">100</span>
<span style="color:#000">Server</span> <span style="color:#ce5c00;font-weight:bold">=</span> nuclio

&gt; Response body:
<span style="color:#ce5c00;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;confidence&#34;</span>: <span style="color:#4e9a06">&#34;0.9992254&#34;</span>,
        <span style="color:#4e9a06">&#34;label&#34;</span>: <span style="color:#4e9a06">&#34;person&#34;</span>,
        <span style="color:#4e9a06">&#34;points&#34;</span>: <span style="color:#ce5c00;font-weight:bold">[</span>
            39,
            124,
            408,
            <span style="color:#0000cf;font-weight:bold">512</span>
        <span style="color:#ce5c00;font-weight:bold">]</span>,
        <span style="color:#4e9a06">&#34;type&#34;</span>: <span style="color:#4e9a06">&#34;rectangle&#34;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div></details>
<h2 id="run-cypress-tests">Run Cypress tests</h2>
<ul>
<li>Install Сypress as described in the <a href="https://docs.cypress.io/guides/getting-started/installing-cypress.html">documentation</a>.</li>
<li>Run cypress tests:</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">    <span style="color:#204a87">cd</span> &lt;cvat_local_repository&gt;/tests
    &lt;cypress_installation_directory&gt;/node_modules/.bin/cypress run --headless --browser chrome
</code></pre></div><p>For more information, see the <a href="https://docs.cypress.io/">documentation</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c414e3e4151a3294cd86a33ca60eb228">4.3 - JavaScript/Typescript coding style</h1>
    <div class="lead">Information about JavaScript/Typescript coding style that is used in CVAT development.</div>
	<p>We use the <a href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide</a> for JavaScript code with a
little exception - we prefer 4 spaces for indentation of nested blocks and statements.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4ef825a7833abf73c578fadc480d6f1b">4.4 - Branching model</h1>
    <div class="lead">Information about the branching model that is used in the project.</div>
	<p>The project uses <a href="https://nvie.com/posts/a-successful-git-branching-model">a successful Git branching model</a>.
Thus it has a couple of branches. Some of them are described below:</p>
<ul>
<li>
<p><code>origin/master</code> to be the main branch where the source code of
HEAD always reflects a production-ready state</p>
</li>
<li>
<p><code>origin/develop</code> to be the main branch where the source code of
HEAD always reflects a state with the latest delivered development
changes for the next release. Some would call this the “integration branch”.</p>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9f0fa9959f1dde888009a7489abc95ad">4.5 - Using the issue tracker</h1>
    <div class="lead">Information and rules for using the issue tracker.</div>
	<p>The issue tracker is the preferred channel for <a href="#bugs">bug reports</a>,
<a href="#features">features requests</a> and <a href="#pull-requests">submitting pull
requests</a>, but please respect the following restrictions:</p>
<ul>
<li>
<p>Please <strong>do not</strong> use the issue tracker for personal support requests (use
<a href="http://stackoverflow.com">Stack Overflow</a>).</p>
</li>
<li>
<p>Please <strong>do not</strong> derail or troll issues. Keep the discussion on topic and
respect the opinions of others.</p>
</li>
</ul>
<p><a name="bugs"></a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3d2c51c440746ae3c1c664fd3c6874c5">4.6 - Bug reports</h1>
    <div class="lead">Guidelines and an example of how to report a bug.</div>
	<p>A bug is a <em>demonstrable problem</em> that is caused by the code in the repository.
Good bug reports are extremely helpful - thank you!</p>
<p>Guidelines for bug reports:</p>
<ol>
<li>
<p><strong>Use the GitHub issue search</strong> — check if the issue has already been
reported.</p>
</li>
<li>
<p><strong>Check if the issue has been fixed</strong> — try to reproduce it using the
latest <code>develop</code> branch in the repository.</p>
</li>
<li>
<p><strong>Isolate the problem</strong> — ideally create a reduced test case.</p>
</li>
</ol>
<p>A good bug report shouldn&rsquo;t leave others needing to chase you up for more
information. Please try to be as detailed as possible in your report. What is
your environment? What steps will reproduce the issue? What browser(s) and OS
experience the problem? What would you expect to be the outcome? All these
details will help people to fix any potential bugs.</p>
<p>Example:</p>
<blockquote>
<p>Short and descriptive example bug report title</p>
<p>A summary of the issue and the browser/OS environment in which it occurs. If
suitable, include the steps required to reproduce the bug.</p>
<ol>
<li>This is the first step</li>
<li>This is the second step</li>
<li>Further steps, etc.</li>
</ol>
<p>Any other information you want to share that is relevant to the issue being
reported. This might include the lines of code that you have identified as
causing the bug, and potential solutions (and your opinions on their
merits).</p>
</blockquote>
<p><a name="features"></a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-36bf632c8a299272d929049c3399f872">4.7 - Feature requests</h1>
    <div class="lead">Information on requesting new features.</div>
	<p>Feature requests are welcome. But take a moment to find out whether your idea
fits with the scope and aims of the project. It&rsquo;s up to <em>you</em> to make a strong
case to convince the project&rsquo;s developers of the merits of this feature. Please
provide as much detail and context as possible.</p>
<p><a name="pull-requests"></a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bfe8b249a0cc63de417c2f12c6a75c87">4.8 - Pull requests</h1>
    <div class="lead">Instructions on how to create a pull request.</div>
	<p>Good pull requests - patches, improvements, new features - are a fantastic
help. They should remain focused in scope and avoid containing unrelated
commits.</p>
<p><strong>Please ask first</strong> before embarking on any significant pull request (e.g.
implementing features, refactoring code, porting to a different language),
otherwise you risk spending a lot of time working on something that the
project&rsquo;s developers might not want to merge into the project.</p>
<p>Please adhere to the coding conventions used throughout a project (indentation,
accurate comments, etc.) and any other requirements (such as test coverage).</p>
<p>Follow this process if you&rsquo;d like your work considered for inclusion in the
project:</p>
<ol>
<li>
<p><a href="https://docs.github.com/en/github/getting-started-with-github/fork-a-repo">Fork</a> the project, clone your fork,
and configure the remotes:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Clone your fork of the repo into the current directory</span>
git clone https://github.com/&lt;your-username&gt;/&lt;repo-name&gt;
<span style="color:#8f5902;font-style:italic"># Navigate to the newly cloned directory</span>
<span style="color:#204a87">cd</span> &lt;repo-name&gt;
<span style="color:#8f5902;font-style:italic"># Assign the original repo to a remote called &#34;upstream&#34;</span>
git remote add upstream https://github.com/&lt;upstream-owner&gt;/&lt;repo-name&gt;
</code></pre></div></li>
<li>
<p>If you cloned a while ago, get the latest changes from upstream:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout &lt;dev-branch&gt;
git pull upstream &lt;dev-branch&gt;
</code></pre></div></li>
<li>
<p>Create a new topic branch (off the main project development branch) to
contain your feature, change, or fix:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout -b &lt;topic-branch-name&gt;
</code></pre></div></li>
<li>
<p>Commit your changes in logical chunks. Please adhere to these <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">git commit
message guidelines</a>
or your code is unlikely be merged into the main project. Use Git&rsquo;s
<a href="https://docs.github.com/en/github/using-git/about-git-rebase">interactive rebase</a>
feature to tidy up your commits before making them public.</p>
</li>
<li>
<p>Locally merge (or rebase) the upstream development branch into your topic branch:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git pull <span style="color:#ce5c00;font-weight:bold">[</span>--rebase<span style="color:#ce5c00;font-weight:bold">]</span> upstream &lt;dev-branch&gt;
</code></pre></div></li>
<li>
<p>Push your topic branch up to your fork:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git push origin &lt;topic-branch-name&gt;
</code></pre></div></li>
<li>
<p><a href="hhttps://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">Open a Pull Request</a>
with a clear title and description.</p>
</li>
</ol>
<p><strong>IMPORTANT</strong>: By submitting a patch, you agree to allow the project owner to
license your work under the same license as that used by the project.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-aa57dee42d2570392356d846a0921fdf">4.9 - How to add a new annotation format support</h1>
    <div class="lead">Instructions on adding support for new annotation formats. This section on <a href="https://github.com/openvinotoolkit/cvat/tree/develop/cvat/apps/dataset_manager/formats">GitHub</a>.</div>
	<ol>
<li>Add a python script to <code>dataset_manager/formats</code></li>
<li>Add an import statement to <a href="https://github.com/openvinotoolkit/cvat/tree/develop/cvat/apps/dataset_manager/formats/registry.py">registry.py</a>.</li>
<li>Implement some importers and exporters as the format requires.</li>
</ol>
<p>Each format is supported by an importer and exporter.</p>
<p>It can be a function or a class decorated with
<code>importer</code> or <code>exporter</code> from <a href="https://github.com/openvinotoolkit/cvat/tree/develop/cvat/apps/dataset_manager/formats/registry.py">registry.py</a>.
Examples:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#5c35cc;font-weight:bold">@importer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MyFormat&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;1.0&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ext</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;ZIP&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_importer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file_object</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">task_data</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">):</span>
  <span style="color:#ce5c00;font-weight:bold">...</span>

<span style="color:#5c35cc;font-weight:bold">@importer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MyFormat&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2.0&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ext</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;XML&#34;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">my_importer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file_object</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">task_data</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">):</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__call__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">file_object</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">task_data</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>

<span style="color:#5c35cc;font-weight:bold">@exporter</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MyFormat&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;1.0&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ext</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;ZIP&#34;</span><span style="color:#000;font-weight:bold">):</span>
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_exporter</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">file_object</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">task_data</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">):</span>
  <span style="color:#ce5c00;font-weight:bold">...</span>
</code></pre></div><p>Each decorator defines format parameters such as:</p>
<ul>
<li>
<p><em>name</em></p>
</li>
<li>
<p><em>version</em></p>
</li>
<li>
<p><em>file extension</em>. For the <code>importer</code> it can be a comma-separated list.
These parameters are combined to produce a visible name. It can be
set explicitly by the <code>display_name</code> argument.</p>
</li>
</ul>
<p>Importer arguments:</p>
<ul>
<li><em>file_object</em> - a file with annotations or dataset</li>
<li><em>task_data</em> - an instance of <code>TaskData</code> class.</li>
</ul>
<p>Exporter arguments:</p>
<ul>
<li>
<p><em>file_object</em> - a file for annotations or dataset</p>
</li>
<li>
<p><em>task_data</em> - an instance of <code>TaskData</code> class.</p>
</li>
<li>
<p><em>options</em> - format-specific options. <code>save_images</code> is the option to
distinguish if dataset or just annotations are requested.</p>
</li>
</ul>
<p><a href="https://github.com/openvinotoolkit/cvat/blob/develop/cvat/apps/dataset_manager/bindings.py"><code>TaskData</code></a> provides
many task properties and interfaces to add and read task annotations.</p>
<p>Public members:</p>
<ul>
<li>
<p><strong>TaskData. Attribute</strong> - class, <code>namedtuple('Attribute', 'name, value')</code></p>
</li>
<li>
<p><strong>TaskData. LabeledShape</strong> - class, <code>namedtuple('LabeledShape', 'type, frame, label, points, occluded, attributes, group, z_order')</code></p>
</li>
<li>
<p><strong>TrackedShape</strong> - <code>namedtuple('TrackedShape', 'type, points, occluded, frame, attributes, outside, keyframe, z_order')</code></p>
</li>
<li>
<p><strong>Track</strong> - class, <code>namedtuple('Track', 'label, group, shapes')</code></p>
</li>
<li>
<p><strong>Tag</strong> - class, <code>namedtuple('Tag', 'frame, label, attributes, group')</code></p>
</li>
<li>
<p><strong>Frame</strong> - class, <code>namedtuple('Frame', 'frame, name, width, height, labeled_shapes, tags')</code></p>
</li>
<li>
<p><strong>TaskData. shapes</strong> - property, an iterator over <code>LabeledShape</code> objects</p>
</li>
<li>
<p><strong>TaskData. tracks</strong> - property, an iterator over <code>Track</code> objects</p>
</li>
<li>
<p><strong>TaskData. tags</strong> - property, an iterator over <code>Tag</code> objects</p>
</li>
<li>
<p><strong>TaskData. meta</strong> - property, a dictionary with task information</p>
</li>
<li>
<p><strong>TaskData. group_by_frame()</strong> - method, returns
an iterator over <code>Frame</code> objects, which groups annotation objects by frame.
Note that <code>TrackedShape</code> s will be represented as <code>LabeledShape</code> s.</p>
</li>
<li>
<p><strong>TaskData. add_tag(tag)</strong> - method,
tag should be an instance of the <code>Tag</code> class</p>
</li>
<li>
<p><strong>TaskData. add_shape(shape)</strong> - method,
shape should be an instance of the <code>Shape</code> class</p>
</li>
<li>
<p><strong>TaskData. add_track(track)</strong> - method,
track should be an instance of the <code>Track</code> class</p>
</li>
</ul>
<p>Sample exporter code:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ce5c00;font-weight:bold">...</span>
<span style="color:#8f5902;font-style:italic"># dump meta info if necessary</span>
<span style="color:#ce5c00;font-weight:bold">...</span>
<span style="color:#8f5902;font-style:italic"># iterate over all frames</span>
<span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">frame_annotation</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">task_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">group_by_frame</span><span style="color:#000;font-weight:bold">():</span>
  <span style="color:#8f5902;font-style:italic"># get frame info</span>
  <span style="color:#000">image_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">frame_annotation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span>
  <span style="color:#000">image_width</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">frame_annotation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">width</span>
  <span style="color:#000">image_height</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">frame_annotation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">height</span>
  <span style="color:#8f5902;font-style:italic"># iterate over all shapes on the frame</span>
  <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">shape</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">frame_annotation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">labeled_shapes</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#000">label</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">label</span>
    <span style="color:#000">xtl</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">points</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000">ytl</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">points</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000">xbr</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">points</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#000">ybr</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">points</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#8f5902;font-style:italic"># iterate over shape attributes</span>
    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">attr</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">shape</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">attributes</span><span style="color:#000;font-weight:bold">:</span>
      <span style="color:#000">attr_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">attr</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span>
      <span style="color:#000">attr_value</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">attr</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">value</span>
<span style="color:#ce5c00;font-weight:bold">...</span>
<span style="color:#8f5902;font-style:italic"># dump annotation code</span>
<span style="color:#000">file_object</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">...</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#ce5c00;font-weight:bold">...</span>
</code></pre></div><p>Sample importer code:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ce5c00;font-weight:bold">...</span>
<span style="color:#8f5902;font-style:italic">#read file_object</span>
<span style="color:#ce5c00;font-weight:bold">...</span>
<span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">parsed_shape</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">parsed_shapes</span><span style="color:#000;font-weight:bold">:</span>
  <span style="color:#000">shape</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">task_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">LabeledShape</span><span style="color:#000;font-weight:bold">(</span>
    <span style="color:#204a87">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;rectangle&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">points</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">],</span>
    <span style="color:#000">occluded</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">False</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">attributes</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">[],</span>
    <span style="color:#000">label</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;car&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">outside</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">False</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">frame</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">99</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000;font-weight:bold">)</span>
<span style="color:#000">task_data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">add_shape</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">shape</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="format-specifications">Format specifications</h2>
<ul>
<li><a href="../../docs/manual/advanced/formats/format-cvat/">CVAT</a></li>
<li><a href="../../docs/manual/advanced/formats/format-datumaro/">Datumaro</a></li>
<li><a href="../../docs/manual/advanced/formats/format-labelme/">LabelMe</a></li>
<li><a href="../../docs/manual/advanced/formats/format-mot/">MOT</a></li>
<li><a href="../../docs/manual/advanced/formats/format-mots/">MOTS</a></li>
<li><a href="../../docs/manual/advanced/formats/format-coco/">COCO</a></li>
<li><a href="../../docs/manual/advanced/formats/format-voc/">PASCAL VOC and mask</a></li>
<li><a href="../../docs/manual/advanced/formats/format-yolo/">YOLO</a></li>
<li><a href="../../docs/manual/advanced/formats/format-tfrecord/">TF detection API</a></li>
<li><a href="../../docs/manual/advanced/formats/format-imagenet/">ImageNet</a></li>
<li><a href="../../docs/manual/advanced/formats/format-camvid/">CamVid</a></li>
<li><a href="../../docs/manual/advanced/formats/format-widerface/">WIDER Face</a></li>
<li><a href="../../docs/manual/advanced/formats/format-vggface2/">VGGFace2</a></li>
<li><a href="../../docs/manual/advanced/formats/format-market1501/">Market-1501</a></li>
<li><a href="../../docs/manual/advanced/formats/format-icdar/">ICDAR13/15</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5e4aadf37d817bf7a4525e9d88ae86f7">4.10 - REST API design principles</h1>
    <div class="lead">Information on using the REST API scheme and principles of its design.</div>
	<h2 id="rest-api-scheme">REST API scheme</h2>
<p>Common scheme for our REST API is <code>&lt;VERB&gt; [namespace] &lt;objects&gt; &lt;id&gt; &lt;action&gt;</code>.</p>
<ul>
<li><code>VERB</code> can be <code>POST</code>, <code>GET</code>, <code>PATCH</code>, <code>PUT</code>, <code>DELETE</code>.</li>
<li><code>namespace</code> should scope some specific functionality like <code>auth</code>, <code>lambda</code>.
It is optional in the scheme.</li>
<li>Typical <code>objects</code> are <code>tasks</code>, <code>projects</code>, <code>jobs</code>.</li>
<li>When you want to extract a specific object from a collection, just specify its <code>id</code>.</li>
<li>An <code>action</code> can be used to simplify REST API or provide an endpoint for entities
without <code>objects</code> endpoint like <code>annotations</code>, <code>data</code>, <code>data/meta</code>. Note: action
should not duplicate other endpoints without a reason.</li>
</ul>
<h2 id="design-principles">Design principles</h2>
<ul>
<li>Use nouns instead of verbs in endpoint paths. For example,
<code>POST /api/v1/tasks</code> instead of <code>POST /api/v1/tasks/create</code>.</li>
<li>Accept and respond with JSON whenever it is possible</li>
<li>Name collections with plural nouns (e.g. <code>/tasks</code>, <code>/projects</code>)</li>
<li>Try to keep the API structure flat. Prefer two separate endpoints
for <code>/projects</code> and <code>/tasks</code> instead of <code>/projects/:id1/tasks/:id2</code>. Use
filters to extract necessary information like <code>/tasks/:id2?project=:id1</code>.
In some cases it is useful to get all <code>tasks</code>. If the structure is
hierarchical, it cannot be done easily. Also you have to know both <code>:id1</code>
and <code>:id2</code> to get information about the task.
<em>Note: for now we accept <code>GET /tasks/:id2/jobs</code> but it should be replaced
by <code>/jobs?task=:id2</code> in the future</em>.</li>
<li>Handle errors gracefully and return standard error codes (e.g. <code>201</code>, <code>400</code>)</li>
<li>Allow filtering, sorting, and pagination</li>
<li>Maintain good security practices</li>
<li>Cache data to improve performance</li>
<li>Versioning our APIs (e.g. <code>/api/v1</code>, <code>/api/v2</code>). It should be done when you
delete an endpoint or modify its behaviors.</li>
</ul>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://stackoverflow.blog/2020/03/02/best-practices-for-rest-api-design/">Best practices for REST API design</a></li>
<li><a href="https://stackoverflow.com/questions/20951419/what-are-best-practices-for-rest-nested-resources">Flat vs. nested resources</a></li>
<li><a href="https://www.moesif.com/blog/technical/api-design/REST-API-Design-Best-Practices-for-Sub-and-Nested-Resources/">REST API Design Best Practices for Sub and Nested Resources</a></li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-956da29f025cba37fca9fe6b80ab5d48">5 - Frequently asked questions</h1>
    <div class="lead">Answers to frequently asked questions</div>
	<!--lint disable heading-style-->
<h2 id="how-to-update-cvat">How to update CVAT</h2>
<p>Before updating, please follow the <a href="../../docs/administration/advanced/backup_guide/">backup guide</a>
and backup all CVAT volumes.</p>
<p>To update CVAT, you should clone or download the new version of CVAT and rebuild the CVAT docker images as usual.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose build
</code></pre></div><p>and run containers:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div><p>Sometimes the update process takes a lot of time due to changes in the database schema and data.
You can check the current status with <code>docker logs cvat</code>.
Please do not terminate the migration and wait till the process is complete.</p>
<h2 id="kibana-app-works-but-no-logs-are-displayed">Kibana app works, but no logs are displayed</h2>
<p>Make sure there aren&rsquo;t error messages from Elasticsearch:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker logs cvat_elasticsearch
</code></pre></div><p>If you see errors like this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">lood stage disk watermark <span style="color:#ce5c00;font-weight:bold">[</span>95%<span style="color:#ce5c00;font-weight:bold">]</span> exceeded on <span style="color:#ce5c00;font-weight:bold">[</span>uMg9WI30QIOJxxJNDiIPgQ<span style="color:#ce5c00;font-weight:bold">][</span>uMg9WI3<span style="color:#ce5c00;font-weight:bold">][</span>/usr/share/elasticsearch/data/nodes/0<span style="color:#ce5c00;font-weight:bold">]</span> free: 116.5gb<span style="color:#ce5c00;font-weight:bold">[</span>4%<span style="color:#ce5c00;font-weight:bold">]</span>, all indices on this node will be marked read-only
</code></pre></div><p>You should free up disk space or change the threshold, to do so check: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/disk-allocator.html">Elasticsearch documentation</a>.</p>
<h2 id="how-to-change-default-cvat-hostname-or-port">How to change default CVAT hostname or port</h2>
<p>To change the hostname, simply set the <code>CVAT_HOST</code> environemnt variable</p>
<pre><code>export CVAT_HOST=&lt;YOUR_HOSTNAME&gt;
</code></pre><p>If you want to change the port, change the <code>entryPoints.web.address</code> part of <code>traefik</code> image command in <code>docker-compose.yml</code></p>
<pre><code>services:
  traefik:
    command:
      - &quot;--providers.docker.exposedByDefault=false&quot;
      - &quot;--providers.docker.network=test&quot;
      - &quot;--entryPoints.web.address=:&lt;YOUR_PORT&gt;&quot;
</code></pre><p>Note that changing the port does not make sense if you are using HTTPS - port 443 is conventionally
used for HTTPS connections, and is needed for Let&rsquo;s Encrypt <a href="https://doc.traefik.io/traefik/https/acme/#tlschallenge">TLS challenge</a>.</p>
<h2 id="how-to-configure-connected-share-folder-on-windows">How to configure connected share folder on Windows</h2>
<p>Follow the Docker manual and configure the directory that you want to use as a shared directory:</p>
<ul>
<li><a href="https://docs.docker.com/toolbox/toolbox_install_windows/#optional-add-shared-directories">Docker toolbox manual</a></li>
<li><a href="https://docs.docker.com/docker-for-windows/#resources">Docker for windows (see FILE SHARING section)</a></li>
</ul>
<p>After that, it should be possible to use this directory as a CVAT share:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.3&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">cvat_share:/home/django/share:ro</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat_share</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">driver_opts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/d/my_cvat_share</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">o</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bind</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><h2 id="how-to-make-unassigned-tasks-not-visible-to-all-users">How to make unassigned tasks not visible to all users</h2>
<p>Set <a href="https://github.com/openvinotoolkit/cvat/blob/develop/cvat/settings/base.py#L424">reduce_task_visibility</a>
variable to <code>True</code>.</p>
<h2 id="where-are-uploaded-imagesvideos-stored">Where are uploaded images/videos stored</h2>
<p>The uploaded data is stored in the <code>cvat_data</code> docker volume:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">cvat_data:/home/django/data</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><h2 id="where-are-annotations-stored">Where are annotations stored</h2>
<p>Annotations are stored in the PostgreSQL database. The database files are stored in the <code>cvat_db</code> docker volume:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">cvat_db:/var/lib/postgresql/data</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><h2 id="how-to-mark-jobtask-as-completed">How to mark job/task as completed</h2>
<p>The status is set by the user in the <a href="../../docs/manual/basics/top-panel/#info">Info window</a>
of the job annotation view.
There are three types of status: annotation, validation or completed.
The status of the job changes the progress bar of the task.</p>
<h2 id="how-to-install-cvat-on-windows-10-home">How to install CVAT on Windows 10 Home</h2>
<p>Follow this <a href="../../docs/administration/basics/installation/#windows-10">guide</a>.</p>
<h2 id="i-do-not-have-the-analytics-tab-on-the-header-section-how-can-i-add-analytics">I do not have the Analytics tab on the header section. How can I add analytics</h2>
<p>You should build CVAT images with <a href="https://github.com/openvinotoolkit/cvat/tree/develop/components/analytics">&lsquo;Analytics&rsquo; component</a>.</p>
<h2 id="how-to-upload-annotations-to-an-entire-task-from-ui-when-there-are-multiple-jobs-in-the-task">How to upload annotations to an entire task from UI when there are multiple jobs in the task</h2>
<p>You can upload annotation for a multi-job task from the Dasboard view or the Task view.
Uploading of annotation from the Annotation view only affects the current job.</p>
<h2 id="how-to-specify-multiple-hostnames">How to specify multiple hostnames</h2>
<p>To do this, you will need to edit <code>traefik.http.&lt;router&gt;.cvat.rule</code> docker label for both the
<code>cvat</code> and <code>cvat_ui</code> services, like so
(see <a href="https://doc.traefik.io/traefik/routing/routers/#rule">the documentation</a> on Traefik rules for more details):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">traefik.http.routers.cvat.rule=(Host(`example1.com`) || Host(`example2.com`)) &amp;&amp;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#000">PathPrefix(`/api/`, `/git/`, `/opencv/`, `/analytics/`, `/static/`, `/admin`, `/documentation/`, `/django-rq`)</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat_ui</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">traefik.http.routers.cvat-ui.rule=Host(`example1.com`) || Host(`example2.com`)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><h2 id="how-to-create-a-task-with-multiple-jobs">How to create a task with multiple jobs</h2>
<p>Set the segment size when you create a new task, this option is available in the
<a href="../../docs/manual/basics/creating_an_annotation_task/#advanced-configuration">Advanced configuration</a>
section.</p>
<h2 id="how-to-transfer-cvat-to-another-machine">How to transfer CVAT to another machine</h2>
<p>Follow the <a href="../../docs/administration/advanced/backup_guide/#how-to-backup-all-cvat-data">backup/restore guide</a>.</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-2 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter public chat" aria-label="Gitter public chat">
    <a class="text-white" rel="noopener noreferrer" href="https://gitter.im/opencv-cvat/public">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" rel="noopener noreferrer" href="https://stackoverflow.com/search?q=%23cvat">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="YouTube" aria-label="YouTube">
    <a class="text-white" rel="noopener noreferrer" href="https://www.youtube.com/user/nmanovic">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" rel="noopener noreferrer" href="https://github.com/cvat-ai/cvat">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Forum on Intel Developer Zone" aria-label="Forum on Intel Developer Zone">
    <a class="text-white" rel="noopener noreferrer" href="https://community.intel.com/t5/Intel-Distribution-of-OpenVINO/bd-p/distribution-openvino-toolkit">
      <i class="fas fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter developers chat" aria-label="Gitter developers chat">
    <a class="text-white" rel="noopener noreferrer" href="https://gitter.im/opencv-cvat/dev">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-8 text-center order-sm-2">
        <small class="mr-1"><a href="https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">Privacy Policy</a></small>
        |
        <small class="mx-1"><a href="https://www.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Use</a></small>
        |
        <small class="ml-1"><a href="https://cvat.org/api/restrictions/terms-of-use">CVAT terms of Use</a></small>
        <br/>
        <div class="footer-disclaimer text-white ">
          <small>Intel technologies may require enabled hardware, software or service activation. // No product or component can be absolutely secure. // Your costs and results may vary. // Performance varies by use, configuration and other factors. // See our complete legal <u><a href="https://edc.intel.com/content/www/us/en/products/performance/benchmarks/overview/?r=219444055">Notices and Disclaimers</a></u>. // Intel is committed to respecting human rights and avoiding complicity in human rights abuses. See Intel’s <a href="https://www.intel.com/content/www/us/en/policy/policy-human-rights.html"><u>Global Human Rights Principles</u></a>. Intel’s products and software are intended only to be used in applications that do not cause or contribute to a violation of an internationally recognized human right.</small>
      </div>
  
    <p class="mt-2"><a href="../../about/">About</a></p>
  
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 













<script src="../../js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js" integrity="sha256-OxcsE7YsK&#43;qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin="anonymous"></script>



<script src='../../js/prism.js'></script>



  </body>
</html>
