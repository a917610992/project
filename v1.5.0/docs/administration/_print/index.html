<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.83.1" /><link rel="canonical" type="text/html" href="../../../docs/administration/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../favicons/android-192x192.png" sizes="192x192">

<title>Administration | CVAT</title>
<meta name="description" content=""><meta property="og:title" content="Administration" />
<meta property="og:description" content="This section contains documents for system administrators" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/administration/" /><meta property="og:site_name" content="CVAT" />

<meta itemprop="name" content="Administration">
<meta itemprop="description" content="This section contains documents for system administrators"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Administration"/>
<meta name="twitter:description" content="This section contains documents for system administrators"/>




<link rel="preload" href="../../../scss/main.min.591a88c412fca6c692021fe322184768cfc320012e0a443e8514b68fd373aa21.css" as="style">
<link href="../../../scss/main.min.591a88c412fca6c692021fe322184768cfc320012e0a443e8514b68fd373aa21.css" rel="stylesheet" integrity="">


<script
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="../../../css/prism.css"/>




  </head>
  <body class="td-section">
    <header>
      


<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="../../../about/">
    <span class="navbar-logo"><svg width="98" height="27" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M101 0v29l-52.544.001C44.326 35.511 35.598 40 25.5 40 11.417 40 0 31.27.0 20.5S11.417 1 25.5 1c4.542.0 8.807.908 12.5 2.5V0h63z" id="logoA"/></defs><g transform="translate(-2 -1)" fill="none" fill-rule="evenodd"><mask id="logoB" fill="#fff"><use xlink:href="#logoA"/></mask><path d="M48.142 1c4.736.0 6.879 3.234 6.879 5.904v2.068h-4.737V6.904c0-.79-.789-2.144-2.142-2.144-1.654.0-2.368 1.354-2.368 2.144v15.192c0 .79.714 2.144 2.368 2.144 1.353.0 2.142-1.354 2.142-2.144v-2.068h4.737v2.068c0 2.67-2.143 5.904-6.88 5.904C42.956 28 41 24.766 41 22.134V6.904C41 4.234 42.955 1 48.142 1zM19-6c9.389.0 17 7.611 17 17s-7.611 17-17 17S2 20.389 2 11 9.611-6 19-6zm42.256 7.338 3.345 19.48h.075l3.42-19.48h5l-6.052 26.324h-5L56.22 1.338h5.037zm20.706.0 5.413 26.324h-4.699l-.94-6.13h-4.548l-.902 6.13h-4.435l5.413-26.324h4.698zm18.038.0v3.723h-4.849v22.6h-4.699v-22.6h-4.81V1.338H1e2zM19 4a7 7 0 100 14 7 7 0 000-14zm60.557 4.295h-.113l-1.466 9.439h3.007l-1.428-9.439z" fill="#fff" fill-rule="nonzero" mask="url(#logoB)"/></g></svg></span>
  </a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        
        
        <a class="nav-link active" href="../../../docs/" ><span class="active">Documentation</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        
        
        <a class="nav-link" href="../../../about/" ><span>About</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        <a class="nav-link" href="https://app.cvat.ai"  ><span>Try it now</span></a>
      </li>
      
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        
        
        
        
        
        
        <a class="nav-link" href="https://github.com/cvat-ai/cvat"  ><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      
      
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-target="#dropdown_ver" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            v1.5.0
          </a>
        </li>
        
      
      
    </ul>
  </div>
  <div class="dropdown-menu" id="dropdown_ver" aria-labelledby="navbarDropdownMenuLink">
    
      
        <a class="dropdown-item" href="../../../../docs/administration/">Latest version</a>
    
      
        <a class="dropdown-item" href="../../../../v1.5.0/docs/administration/">v1.5.0</a>
    
      
        <a class="dropdown-item" href="../../../../v1.6.0/docs/administration/">v1.6.0</a>
    
      
        <a class="dropdown-item" href="../../../../v1.7.0/docs/administration/">v1.7.0</a>
    
      
        <a class="dropdown-item" href="../../../../v2.0.0/docs/administration/">v2.0.0</a>
    
      
        <a class="dropdown-item" href="../../../../v2.1.0/docs/administration/">v2.1.0</a>
    
      
        <a class="dropdown-item" href="../../../../v2.2.0/docs/administration/">v2.2.0</a>
    
  </div>
  <div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../offline-search-index.8d14325be08fd27867e14c91fd9e2e8a.json"
  data-offline-search-base-href="../../../"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../docs/administration/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Administration</h1>
<div class="lead">This section contains documents for system administrators</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-1e63fbd88462376b0ea61a372d0f0256">Basics</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-3b52a3a4deeb0315f304ab2f6d5bc85d">Installation Guide</a></li>


    
  
    
    
	
<li>1.2: <a href="#pg-e0876969fd23d4213b245cf0d69ca6d3">AWS-Deployment Guide</a></li>


    
  
    
    
	
<li>1.3: <a href="#pg-fe76cc8b9c063eb6606ea27948386ce7">REST API guide</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-ba6eae2adf800d38632b8981c2dee567">Advanced</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-510d3a6059194f92357d8aa6f6ce7693">Analytics for Computer Vision Annotation Tool (CVAT)</a></li>


    
  
    
    
	
<li>2.2: <a href="#pg-0525160925e6dcda34a919060abed2a7">Semi-automatic and Automatic Annotation</a></li>


    
  
    
    
	
<li>2.3: <a href="#pg-7545f3c848c8d646b0c6d2ceef722983">Mounting cloud storage</a></li>


    
  
    
    
	
<li>2.4: <a href="#pg-c7cf871a1ff98f3a84b27456c266df2c">Backup guide</a></li>


    
  

    </ul>
    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-1e63fbd88462376b0ea61a372d0f0256">1 - Basics</h1>
    <div class="lead">This section contains basic documents for system administrators</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-3b52a3a4deeb0315f304ab2f6d5bc85d">1.1 - Installation Guide</h1>
    <div class="lead">CVAT installation guide for different operating systems</div>
	<h1 id="quick-installation-guide">Quick installation guide</h1>
<p>Before you can use CVAT, you’ll need to get it installed. The document below
contains instructions for the most popular operating systems. If your system is
not covered by the document it should be relatively straight forward to adapt
the instructions below for other systems.</p>
<p>Probably you need to modify the instructions below in case you are behind a proxy
server. Proxy is an advanced topic and it is not covered by the guide.</p>
<h2 id="ubuntu-1804-x86_64amd64">Ubuntu 18.04 (x86_64/amd64)</h2>
<ul>
<li>
<p>Open a terminal window. If you don&rsquo;t know how to open a terminal window on
Ubuntu please read <a href="https://askubuntu.com/questions/183775/how-do-i-open-a-terminal">the answer</a>.</p>
</li>
<li>
<p>Type commands below into the terminal window to install <code>docker</code>. More
instructions can be found <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">here</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo apt-get update
sudo apt-get --no-install-recommends install -y <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  apt-transport-https <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  ca-certificates <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  curl <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  gnupg-agent <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span style="color:#000;font-weight:bold">|</span> sudo apt-key add -
sudo add-apt-repository <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span style="color:#4e9a06">  </span><span style="color:#204a87;font-weight:bold">$(</span>lsb_release -cs<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06"> \
</span><span style="color:#4e9a06">  stable&#34;</span>
sudo apt-get update
sudo apt-get --no-install-recommends install -y docker-ce docker-ce-cli containerd.io
</code></pre></div></li>
<li>
<p>Perform <a href="https://docs.docker.com/install/linux/linux-postinstall/">post-installation steps</a>
to run docker without root permissions.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sudo groupadd docker
sudo usermod -aG docker <span style="color:#000">$USER</span>
</code></pre></div><p>Log out and log back in (or reboot) so that your group membership is
re-evaluated. You can type <code>groups</code> command in a terminal window after
that and check if <code>docker</code> group is in its output.</p>
</li>
<li>
<p>Install docker-compose (1.19.0 or newer). Compose is a tool for
defining and running multi-container docker applications.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get --no-install-recommends install -y python3-pip python3-setuptools
sudo python3 -m pip install setuptools docker-compose
</code></pre></div></li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get --no-install-recommends install -y git
git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to the user. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Google Chrome is the only browser which is supported by CVAT. You need to
install it as well. Type commands below in a terminal window:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">curl https://dl-ssl.google.com/linux/linux_signing_key.pub <span style="color:#000;font-weight:bold">|</span> sudo apt-key add -
sudo sh -c <span style="color:#4e9a06">&#39;echo &#34;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&#34; &gt;&gt; /etc/apt/sources.list.d/google-chrome.list&#39;</span>
sudo apt-get update
sudo apt-get --no-install-recommends install -y google-chrome-stable
</code></pre></div></li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="windows-10">Windows 10</h2>
<ul>
<li>
<p>Install WSL2 (Windows subsystem for Linux) refer to <a href="https://docs.microsoft.com/windows/wsl/install-win10">this official guide</a>.
WSL2 requires Windows 10, version 2004 or higher. Note: You may not have to install a Linux distribution unless
needed.</p>
</li>
<li>
<p>Download and install <a href="https://download.docker.com/win/stable/Docker%20Desktop%20Installer.exe">Docker Desktop for Windows</a>.
Double-click <code>Docker for Windows Installer</code> to run the installer.
More instructions can be found <a href="https://docs.docker.com/docker-for-windows/install/">here</a>.
Official guide for docker WSL2 backend can be found
<a href="https://docs.docker.com/docker-for-windows/wsl/">here</a>. Note: Check that you are specifically using WSL2 backend
for Docker.</p>
</li>
<li>
<p>Download and install
<a href="https://github.com/git-for-windows/git/releases/download/v2.21.0.windows.1/Git-2.21.0-64-bit.exe">Git for Windows</a>.
When installing the package please keep all options by default.
More information about the package can be found <a href="https://gitforwindows.org">here</a>.</p>
</li>
<li>
<p>Download and install <a href="https://www.google.com/chrome/">Google Chrome</a>. It is the only browser
which is supported by CVAT.</p>
</li>
<li>
<p>Go to windows menu, find <code>Git Bash</code> application and run it. You should see a terminal window.</p>
</li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to other users. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">winpty docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>If you don&rsquo;t have winpty installed or the above command does not work, you may also try the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#8f5902;font-style:italic"># enter docker image first</span>
docker <span style="color:#204a87">exec</span> -it cvat /bin/bash
<span style="color:#8f5902;font-style:italic"># then run</span>
python3 ~/manage.py createsuperuser
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="mac-os-mojave">Mac OS Mojave</h2>
<ul>
<li>
<p>Download <a href="https://download.docker.com/mac/stable/Docker.dmg">Docker for Mac</a>.
Double-click Docker.dmg to open the installer, then drag Moby the whale
to the Applications folder. Double-click Docker.app in the Applications
folder to start Docker. More instructions can be found
<a href="https://docs.docker.com/v17.12/docker-for-mac/install/#install-and-run-docker-for-mac">here</a>.</p>
</li>
<li>
<p>There are several ways to install Git on a Mac. The easiest is probably to
install the Xcode Command Line Tools. On Mavericks (10.9) or above you can
do this simply by trying to run git from the Terminal the very first time.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git --version
</code></pre></div><p>If you don’t have it installed already, it will prompt you to install it.
More instructions can be found <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">here</a>.</p>
</li>
<li>
<p>Download and install <a href="https://www.google.com/chrome/">Google Chrome</a>. It
is the only browser which is supported by CVAT.</p>
</li>
<li>
<p>Open a terminal window. The terminal app is in the Utilities folder in
Applications. To open it, either open your Applications folder, then open
Utilities and double-click on Terminal, or press Command - spacebar to
launch Spotlight and type &ldquo;Terminal,&rdquo; then double-click the search result.</p>
</li>
<li>
<p>Clone <em>CVAT</em> source code from the
<a href="https://github.com/opencv/cvat">GitHub repository</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/opencv/cvat
<span style="color:#204a87">cd</span> cvat
</code></pre></div></li>
<li>
<p>Run docker containers. It will take some time to download the latest CVAT
release and other required images like postgres, redis, etc. from DockerHub and create containers.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose up -d
</code></pre></div></li>
<li>
<p>Alternative: if you want to build the images locally with unreleased changes
run the following command. It will take some time to build CVAT images.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-compose -f docker-compose.yml -f docker-compose.dev.yml build
docker-compose up -d
</code></pre></div></li>
<li>
<p>You can register a user but by default it will not have rights even to view
list of tasks. Thus you should create a superuser. A superuser can use an
admin panel to assign correct groups to other users. Please use the command
below:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker <span style="color:#204a87">exec</span> -it cvat bash -ic <span style="color:#4e9a06">&#39;python3 ~/manage.py createsuperuser&#39;</span>
</code></pre></div><p>Choose a username and a password for your admin account. For more information
please read <a href="https://docs.djangoproject.com/en/2.2/ref/django-admin/#createsuperuser">Django documentation</a>.</p>
</li>
<li>
<p>Open the installed Google Chrome browser and go to <a href="http://localhost:8080">localhost:8080</a>.
Type your login/password for the superuser on the login page and press the <em>Login</em>
button. Now you should be able to create a new annotation task. Please read the
<a href="../../../docs/manual/">CVAT manual</a> for more details.</p>
</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<h3 id="deploying-cvat-behind-a-proxy">Deploying CVAT behind a proxy</h3>
<p>If you deploy CVAT behind a proxy and do not plan to use any of <a href="#semi-automatic-and-automatic-annotation">serverless functions</a>
for automatic annotation, the exported environment variables
<code>http_proxy</code>, <code>https_proxy</code> and <code>no_proxy</code> should be enough to build images.
Otherwise please create or edit the file <code>~/.docker/config.json</code> in the home directory of the user
which starts containers and add JSON such as the following:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">&#34;proxies&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;default&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;httpProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;http://proxy_server:port&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;httpsProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;http://proxy_server:port&#34;</span><span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;noProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;*.test.example.com,.example2.com&#34;</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>These environment variables are set automatically within any container.
Please see the <a href="https://docs.docker.com/network/proxy/">Docker documentation</a> for more details.</p>
<h3 id="using-the-traefik-dashboard">Using the Traefik dashboard</h3>
<p>If you are customizing the docker compose files and you come upon some unexpected issues, using the Traefik
dashboard might be very useful to see if the problem is with Traefik configuration, or with some of the services.</p>
<p>You can enable the Traefik dashboard by uncommenting the following lines from <code>docker-compose.yml</code></p>
<pre><code>services:
  traefik:
    # Uncomment to get Traefik dashboard
    #   - &quot;--entryPoints.dashboard.address=:8090&quot;
    #   - &quot;--api.dashboard=true&quot;
    # labels:
    #   - traefik.enable=true
    #   - traefik.http.routers.dashboard.entrypoints=dashboard
    #   - traefik.http.routers.dashboard.service=api@internal
    #   - traefik.http.routers.dashboard.rule=Host(`${CVAT_HOST:-localhost}`)
</code></pre><p>and if you are using <code>docker-compose.https.yml</code>, also uncomment these lines</p>
<pre><code>services:
  traefik:
    command:
      # Uncomment to get Traefik dashboard
      # - &quot;--entryPoints.dashboard.address=:8090&quot;
      # - &quot;--api.dashboard=true&quot;
</code></pre><p>Note that this &ldquo;insecure&rdquo; dashboard is not recommended in production (and if your instance is publicly available);
if you want to keep the dashboard in production you should read Traefik&rsquo;s
<a href="https://doc.traefik.io/traefik/operations/dashboard/">documentation</a> on how to properly secure it.</p>
<h3 id="additional-components">Additional components</h3>
<ul>
<li><a href="../../../docs/administration/advanced/analytics/">Analytics: management and monitoring of data annotation team</a></li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Build and run containers with Analytics component support:</span>
docker-compose -f docker-compose.yml <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -f components/analytics/docker-compose.analytics.yml up -d --build
</code></pre></div><h3 id="semi-automatic-and-automatic-annotation">Semi-automatic and automatic annotation</h3>
<p>Please follow this <a href="../../../docs/administration/advanced/installation_automatic_annotation/">guide</a>.</p>
<h3 id="stop-all-containers">Stop all containers</h3>
<p>The command below stops and removes containers, networks, volumes, and images
created by <code>up</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose down
</code></pre></div><h3 id="use-your-own-domain">Use your own domain</h3>
<p>If you want to access your instance of CVAT outside of your localhost (on another domain),
you should specify the <code>CVAT_HOST</code> environment variable, like this:</p>
<pre><code>export CVAT_HOST=&lt;YOUR_DOMAIN&gt;
</code></pre><h3 id="share-path">Share path</h3>
<p>You can use a share storage for data uploading during you are creating a task.
To do that you can mount it to CVAT docker container. Example of
docker-compose.override.yml for this purpose:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.3&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">CVAT_SHARE_URL</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;Mounted from /mnt/share host directory&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">cvat_share:/home/django/share:ro</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cvat_share</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">driver_opts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/mnt/share</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">o</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bind</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>You can change the share device path to your actual share. For user convenience
we have defined the environment variable $CVAT_SHARE_URL. This variable
contains a text (url for example) which is shown in the client-share browser.</p>
<p>You can <a href="../../../docs/administration/advanced/mounting_cloud_storages/">mount</a>
your cloud storage as a FUSE and use it later as a share.</p>
<h3 id="email-verification">Email verification</h3>
<p>You can enable email verification for newly registered users.
Specify these options in the
<a href="https://github.com/openvinotoolkit/cvat/blob/develop/cvat/settings/base.py">settings file</a> to configure Django allauth
to enable email verification (ACCOUNT_EMAIL_VERIFICATION = &lsquo;mandatory&rsquo;).
Access is denied until the user&rsquo;s email address is verified.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">ACCOUNT_AUTHENTICATION_METHOD</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;username&#39;</span>
<span style="color:#000">ACCOUNT_CONFIRM_EMAIL_ON_GET</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">True</span>
<span style="color:#000">ACCOUNT_EMAIL_REQUIRED</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">True</span>
<span style="color:#000">ACCOUNT_EMAIL_VERIFICATION</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;mandatory&#39;</span>

<span style="color:#8f5902;font-style:italic"># Email backend settings for Django</span>
<span style="color:#000">EMAIL_BACKEND</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;django.core.mail.backends.smtp.EmailBackend&#39;</span>
</code></pre></div><p>Also you need to configure the Django email backend to send emails.
This depends on the email server you are using and is not covered in this tutorial, please see
<a href="https://docs.djangoproject.com/en/3.1/topics/email/#django.core.mail.backends.smtp.EmailBackend">Django SMTP backend configuration</a>
for details.</p>
<h3 id="deploy-cvat-on-the-scaleway-public-cloud">Deploy CVAT on the Scaleway public cloud</h3>
<p>Please follow
<a href="https://blog.scaleway.com/smart-data-annotation-for-your-computer-vision-projects-cvat-on-scaleway/">this tutorial</a>
to install and set up remote access to CVAT on a Scaleway cloud instance with data in a mounted object storage bucket.</p>
<h3 id="deploy-secure-cvat-instance-with-https">Deploy secure CVAT instance with HTTPS</h3>
<p>Using Traefik, you can automatically obtain TLS certificate for your domain from Let&rsquo;s Encrypt,
enabling you to use HTTPS protocol to access your website.</p>
<p>To enable this, first set the the <code>CVAT_HOST</code> (the domain of your website) and <code>ACME_EMAIL</code>
(contact email for Let&rsquo;s Encrypt) environment variables:</p>
<pre><code>export CVAT_HOST=&lt;YOUR_DOMAIN&gt;
export ACME_EMAIL=&lt;YOUR_EMAIL&gt;
</code></pre><p>Then, use the <code>docker-compose.https.yml</code> file to override the base <code>docker-compose.yml</code> file:</p>
<pre><code>docker-compose -f docker-compose.yml -f docker-compose.https.yml up -d
</code></pre><p>Then, the CVAT instance will be available at your domain on ports 443 (HTTPS) and 80 (HTTP, redirects to 443).</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e0876969fd23d4213b245cf0d69ca6d3">1.2 - AWS-Deployment Guide</h1>
    
	<p>There are two ways of deploying the CVAT.</p>
<ol>
<li>
<p><strong>On Nvidia GPU Machine:</strong> Tensorflow annotation feature is dependent on GPU hardware.
One of the easy ways to launch CVAT with the tf-annotation app is to use AWS P3 instances,
which provides the NVIDIA GPU.
Read more about <a href="https://aws.amazon.com/about-aws/whats-new/2017/10/introducing-amazon-ec2-p3-instances/">P3 instances here.</a>
Overall setup instruction is explained in <a href="https://github.com/openvinotoolkit/cvat/">main readme file</a>,
except Installing Nvidia drivers.
So we need to download the drivers and install it.
For Amazon P3 instances, download the Nvidia Drivers from Nvidia website.
For more check <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/install-nvidia-driver.html">Installing the NVIDIA Driver on Linux Instances</a>
link.</p>
</li>
<li>
<p><strong>On Any other AWS Machine:</strong> We can follow the same instruction guide mentioned in the
<a href="../../../docs/administration/basics/installation/">installation instructions</a>.
The additional step is to add a <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">security group and rule to allow incoming connections</a>.</p>
</li>
</ol>
<p>For any of above, don&rsquo;t forget to set the <code>CVAT_HOST</code> environemnt variable to the exposed
AWS public IP address or hostname:</p>
<pre><code>export CVAT_HOST=your-instance.amazonaws.com
</code></pre><p>In case of problems with using hostname, you can also use the public IPV4 instead of hostname.
For AWS or any cloud based machines where the instances need to be terminated or stopped,
the public IPV4 and hostname changes with every stop and reboot.
To address this efficiently, avoid using spot instances that cannot be stopped,
since copying the EBS to an AMI and restarting it throws problems.
On the other hand, when a regular instance is stopped and restarted,
the new hostname/IPV4 can be used to set the  <code>CVAT_HOST</code> environment variable.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fe76cc8b9c063eb6606ea27948386ce7">1.3 - REST API guide</h1>
    
	<p>To access swagger documentation you need to be authorized.</p>
<p>Automatically generated Swagger documentation for Django REST API is available
on <code>&lt;cvat_origin&gt;/api/swagger</code>(default: <code>localhost:8080/api/swagger</code>).</p>
<p>Swagger documentation is visible on allowed hosts, Update environment
variable in docker-compose.yml file with cvat hosted machine IP or domain
name. Example - <code>ALLOWED_HOSTS: 'localhost, 127.0.0.1'</code>.</p>
<p>Make a request to a resource stored on a server and the server will respond with the requested information.
The HTTP protocol is used to transport a data.
Requests are divided into groups:</p>
<ul>
<li><code>auth</code> - user authorization queries</li>
<li><code>comments</code> - requests to post/delete comments to issues</li>
<li><code>issues</code> - update, delete and view problem comments</li>
<li><code>jobs</code> -requests to manage the job</li>
<li><code>lambda</code> - requests to work with lambda function</li>
<li><code>projects</code> - project management queries</li>
<li><code>restrictions</code> - requests for restrictions</li>
<li><code>reviews</code> -adding and removing the review of the job</li>
<li><code>server</code> - server information requests</li>
<li><code>tasks</code> - requests to manage tasks</li>
<li><code>users</code> -  user management queries</li>
</ul>
<p>Besides it contains <code>Models</code>.
Models - the data type is described using a 
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md#schemaObject">schema object</a>.</p>
<p>Each group contains queries related to a different types of HTTP methods such as: <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>DELETE</code>, etc.
Different methods are highlighted in different color. Each item has a name and description.
Clicking on an element opens a form with a name, description and settings input field or an example of json values.</p>
<p>To find out more, read <a href="https://swagger.io/docs/specification/about/">swagger specification</a>.</p>
<p>To try to send a request, click <code>Try it now </code>and type <code>Execute</code>.
You&rsquo;ll get a response in the form of <a href="https://curl.se/"><code>Curl</code></a>, <code>Request URL</code> and <code>Server response</code>.</p>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ba6eae2adf800d38632b8981c2dee567">2 - Advanced</h1>
    <div class="lead">This section contains basic documents for system administrators</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-510d3a6059194f92357d8aa6f6ce7693">2.1 - Analytics for Computer Vision Annotation Tool (CVAT)</h1>
    <div class="lead">This section on <a href="https://github.com/openvinotoolkit/cvat/tree/develop/components/analytics">GitHub</a></div>
	<p><img src="../../../images/image097.jpg" alt=""></p>
<p>It is possible to proxy annotation logs from client to ELK. To do that run the following command below:</p>
<h3 id="build-docker-image">Build docker image</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># From project root directory</span>
docker-compose -f docker-compose.yml -f components/analytics/docker-compose.analytics.yml build
</code></pre></div><h3 id="run-docker-container">Run docker container</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># From project root directory</span>
docker-compose -f docker-compose.yml -f components/analytics/docker-compose.analytics.yml up -d
</code></pre></div><p>At the moment it is not possible to save advanced settings. Below values should be specified manually.</p>
<h2 id="time-picker-default">Time picker default</h2>
<p>{
&ldquo;from&rdquo;: &ldquo;now/d&rdquo;,
&ldquo;to&rdquo;: &ldquo;now/d&rdquo;,
&ldquo;display&rdquo;: &ldquo;Today&rdquo;,
&ldquo;section&rdquo;: 0
}</p>
<h2 id="time-picker-quick-ranges">Time picker quick ranges</h2>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">[</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Today&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This week&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This month&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;This year&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Today so far&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Week to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/M&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Month to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Year to date&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1d/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1d/d&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Yesterday&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1w/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1w/w&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous week&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1m/m&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1m/m&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous month&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1y/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;to&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;now-1y/y&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;display&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Previous year&#34;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#204a87;font-weight:bold">&#34;section&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">]</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0525160925e6dcda34a919060abed2a7">2.2 - Semi-automatic and Automatic Annotation</h1>
    <div class="lead">This page provides information about the installation of components needed for semi-automatic and automatic annotation</div>
	<blockquote>
<p><strong>⚠ WARNING: Do not use <code>docker-compose up</code></strong>
If you did, make sure all containers are stopped by <code>docker-compose down</code>.</p>
</blockquote>
<ul>
<li>
<p>To bring up cvat with auto annotation tool, from cvat root directory, you need to run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d
</code></pre></div><p>If you did any changes to the docker-compose files, make sure to add <code>--build</code> at the end.</p>
<p>To stop the containers, simply run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml down
</code></pre></div></li>
<li>
<p>You have to install <code>nuctl</code> command line tool to build and deploy serverless
functions. Download <a href="https://github.com/nuclio/nuclio/releases/tag/1.5.16">version 1.5.16</a>.
It is important that the version you download matches the version in
<a href="https://github.com/openvinotoolkit/cvat/blob/develop/components/serverless/docker-compose.serverless.yml">docker-compose.serverless.yml</a>
After downloading the nuclio, give it a proper permission and do a softlink</p>
<pre><code>sudo chmod +x nuctl-&lt;version&gt;-linux-amd64
sudo ln -sf $(pwd)/nuctl-&lt;version&gt;-linux-amd64 /usr/local/bin/nuctl
</code></pre></li>
<li>
<p>Create <code>cvat</code> project inside nuclio dashboard where you will deploy new serverless functions
and deploy a couple of DL models. Commands below should be run only after CVAT has been installed
using <code>docker-compose</code> because it runs nuclio dashboard which manages all serverless functions.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl create project cvat
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/openvino/dextr/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span>
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/openvino/omz/public/yolo-v3-tf/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --volume <span style="color:#4e9a06">`</span><span style="color:#204a87">pwd</span><span style="color:#4e9a06">`</span>/serverless/common:/opt/nuclio/common <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span>
</code></pre></div><p><strong>Note:</strong></p>
<ul>
<li>See <a href="https://github.com/openvinotoolkit/cvat/blob/develop/serverless/deploy_cpu.sh">deploy_cpu.sh</a>
for more examples.</li>
</ul>
<h4 id="gpu-support">GPU Support</h4>
<p>You will need to install <a href="https://www.tensorflow.org/install/docker#gpu_support">Nvidia Container Toolkit</a>.
Also you will need to add <code>--resource-limit nvidia.com/gpu=1 --triggers '{&quot;myHttpTrigger&quot;: {&quot;maxWorkers&quot;: 1}}'</code> to
the nuclio deployment command. You can increase the maxWorker if you have enough GPU memory.
As an example, below will run on the GPU:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nuctl deploy --project-name cvat <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --path serverless/tensorflow/matterport/mask_rcnn/nuclio <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --platform <span style="color:#204a87">local</span> --base-image tensorflow/tensorflow:1.15.5-gpu-py3 <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --desc <span style="color:#4e9a06">&#34;GPU based implementation of Mask RCNN on Python 3, Keras, and TensorFlow.&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --image cvat/tf.matterport.mask_rcnn_gpu <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --triggers <span style="color:#4e9a06">&#39;{&#34;myHttpTrigger&#34;: {&#34;maxWorkers&#34;: 1}}&#39;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --resource-limit nvidia.com/gpu<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><p><strong>Note:</strong></p>
<ul>
<li>The number of GPU deployed functions will be limited to your GPU memory.</li>
<li>See <a href="https://github.com/openvinotoolkit/cvat/blob/develop/serverless/deploy_gpu.sh">deploy_gpu.sh</a>
script for more examples.</li>
</ul>
</li>
</ul>
<p><strong>Troubleshooting Nuclio Functions:</strong></p>
<ul>
<li>
<p>You can open nuclio dashboard at <a href="http://localhost:8070">localhost:8070</a>.
Make sure status of your functions are up and running without any error.</p>
</li>
<li>
<p>Test your deployed DL model as a serverless function. The command below should work on Linux and Mac OS.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">image</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>curl https://upload.wikimedia.org/wikipedia/en/7/7d/Lenna_%28test_image%29.png --output - <span style="color:#000;font-weight:bold">|</span> base64 <span style="color:#000;font-weight:bold">|</span> tr -d <span style="color:#4e9a06">&#39;\n&#39;</span><span style="color:#204a87;font-weight:bold">)</span>
cat <span style="color:#4e9a06">&lt;&lt; EOF &gt; /tmp/input.json
</span><span style="color:#4e9a06">{&#34;image&#34;: &#34;$image&#34;}
</span><span style="color:#4e9a06">EOF</span>
cat /tmp/input.json <span style="color:#000;font-weight:bold">|</span> nuctl invoke openvino.omz.public.yolo-v3-tf -c <span style="color:#4e9a06">&#39;application/json&#39;</span>
</code></pre></div><details>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">20.07.17 12:07:44.519    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Executing <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;method&#34;</span>: <span style="color:#4e9a06">&#34;POST&#34;</span>, <span style="color:#4e9a06">&#34;url&#34;</span>: <span style="color:#4e9a06">&#34;http://:57308&#34;</span>, <span style="color:#4e9a06">&#34;headers&#34;</span>: <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Content-Type&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Log-Level&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;info&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>,<span style="color:#4e9a06">&#34;X-Nuclio-Target&#34;</span>:<span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;openvino.omz.public.yolo-v3-tf&#34;</span><span style="color:#ce5c00;font-weight:bold">]}}</span>
20.07.17 12:07:45.275    nuctl.platform.invoker <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Got response <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;status&#34;</span>: <span style="color:#4e9a06">&#34;200 OK&#34;</span><span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> &gt;&gt;&gt; Start of <span style="color:#204a87;font-weight:bold">function</span> logs
20.07.17 12:07:45.275 ino.omz.public.yolo-v3-tf <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> Run yolo-v3-tf model <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#4e9a06">&#34;worker_id&#34;</span>: <span style="color:#4e9a06">&#34;0&#34;</span>, <span style="color:#4e9a06">&#34;time&#34;</span>: 1594976864570.9353<span style="color:#ce5c00;font-weight:bold">}</span>
20.07.17 12:07:45.275                     nuctl <span style="color:#ce5c00;font-weight:bold">(</span>I<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;&lt;</span> End of <span style="color:#204a87;font-weight:bold">function</span> logs

&gt; Response headers:
<span style="color:#000">Date</span> <span style="color:#ce5c00;font-weight:bold">=</span> Fri, <span style="color:#0000cf;font-weight:bold">17</span> Jul <span style="color:#0000cf;font-weight:bold">2020</span> 09:07:45 GMT
Content-Type <span style="color:#ce5c00;font-weight:bold">=</span> application/json
Content-Length <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">100</span>
<span style="color:#000">Server</span> <span style="color:#ce5c00;font-weight:bold">=</span> nuclio

&gt; Response body:
<span style="color:#ce5c00;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#34;confidence&#34;</span>: <span style="color:#4e9a06">&#34;0.9992254&#34;</span>,
        <span style="color:#4e9a06">&#34;label&#34;</span>: <span style="color:#4e9a06">&#34;person&#34;</span>,
        <span style="color:#4e9a06">&#34;points&#34;</span>: <span style="color:#ce5c00;font-weight:bold">[</span>
            39,
            124,
            408,
            <span style="color:#0000cf;font-weight:bold">512</span>
        <span style="color:#ce5c00;font-weight:bold">]</span>,
        <span style="color:#4e9a06">&#34;type&#34;</span>: <span style="color:#4e9a06">&#34;rectangle&#34;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div></details>
</li>
<li>
<p>To check for internal server errors, run <code>docker ps -a</code> to see the list of containers.
Find the container that you are interested, e.g., <code>nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu</code>.
Then check its logs by <code>docker logs &lt;name of your container&gt;</code>
e.g.,</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker logs nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu
</code></pre></div></li>
<li>
<p>To debug a code inside a container, you can use vscode to attach to a container <a href="https://code.visualstudio.com/docs/remote/attach-container">instructions</a>.
To apply your changes, make sure to restart the container.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker restart &lt;name_of_the_container&gt;
</code></pre></div></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7545f3c848c8d646b0c6d2ceef722983">2.3 - Mounting cloud storage</h1>
    
	<!--lint disable heading-style-->
<h2 id="aws-s3-bucket-as-filesystem">AWS S3 bucket as filesystem</h2>
<h3 id="a-nameaws_s3_ubuntu_2004ubuntu-2004a"><a name="aws_s3_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-nameaws_s3_mountmounta"><a name="aws_s3_mount">Mount</a></h4>
<ol>
<li>
<p>Install s3fs:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt install s3fs
</code></pre></div></li>
<li>
<p>Enter your credentials in a file <code>${HOME}/.passwd-s3fs</code> and set owner-only permissions:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#204a87">echo</span> ACCESS_KEY_ID:SECRET_ACCESS_KEY &gt; <span style="color:#4e9a06">${</span><span style="color:#000">HOME</span><span style="color:#4e9a06">}</span>/.passwd-s3fs
chmod <span style="color:#0000cf;font-weight:bold">600</span> <span style="color:#4e9a06">${</span><span style="color:#000">HOME</span><span style="color:#4e9a06">}</span>/.passwd-s3fs
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Run s3fs, replace <code>bucket_name</code>, <code>mount_point</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">s3fs &lt;bucket_name&gt; &lt;mount_point&gt; -o allow_other
</code></pre></div></li>
</ol>
<p>For more details see <a href="https://github.com/s3fs-fuse/s3fs-fuse">here</a>.</p>
<h4 id="a-nameaws_s3_automatically_mountautomatically-mounta"><a name="aws_s3_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 3 mounting steps above.</p>
<h5 id="a-nameaws_s3_using_fstabusing-fstaba"><a name="aws_s3_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create a bash script named aws_s3_fuse(e.g in /usr/bin, as root) with this content
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>backet_name</code>, <code>mount_point</code>, <code>/path/to/.passwd-s3fs</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; s3fs &lt;backet_name&gt; &lt;mount_point&gt; -o <span style="color:#000">passwd_file</span><span style="color:#ce5c00;font-weight:bold">=</span>/path/to/.passwd-s3fs -o allow_other
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/aws_s3_fuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> adding a line like this, replace <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/aws_s3_fuse  &lt;mount_point&gt;     fuse    allow_other,user,_netdev     <span style="color:#0000cf;font-weight:bold">0</span>       <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
</ol>
<h5 id="a-nameaws_s3_using_systemdusing-systemda"><a name="aws_s3_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/s3fs.service</code>
(replace <code>user_name</code>, <code>bucket_name</code>, <code>mount_point</code>, <code>/path/to/.passwd-s3fs</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over AWS S3 bucket
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>s3fs &lt;bucket_name&gt; <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> -o <span style="color:#000">passwd_file</span><span style="color:#ce5c00;font-weight:bold">=</span>/path/to/.passwd-s3fs -o allow_other
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the bucket:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> s3fs.service
sudo systemctl start s3fs.service
</code></pre></div></li>
</ol>
<h4 id="a-nameaws_s3_checkchecka"><a name="aws_s3_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;s3fs&#39;</span>
</code></pre></div><h4 id="a-nameaws_s3_unmount_filesystemunmount-filesystema"><a name="aws_s3_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#aws_s3_using_systemd">systemd</a> to mount a bucket:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop s3fs.service
sudo systemctl disable s3fs.service
</code></pre></div><h2 id="microsoft-azure-container-as-filesystem">Microsoft Azure container as filesystem</h2>
<h3 id="a-nameazure_ubuntu_2004ubuntu-2004a"><a name="azure_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-nameazure_mountmounta"><a name="azure_mount">Mount</a></h4>
<ol>
<li>
<p>Set up the Microsoft package repository.(More <a href="https://docs.microsoft.com/en-us/windows-server/administration/Linux-Package-Repository-for-Microsoft-Software#configuring-the-repositories">here</a>)</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
sudo apt-get update
</code></pre></div></li>
<li>
<p>Install <code>blobfuse</code> and <code>fuse</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install blobfuse fuse
</code></pre></div><p>For more details see <a href="https://github.com/Azure/azure-storage-fuse/wiki/1.-Installation">here</a></p>
</li>
<li>
<p>Create environments (replace <code>account_name</code>, <code>account_key</code>, <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#204a87">export</span> <span style="color:#000">AZURE_STORAGE_ACCOUNT</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;account_name&gt;
<span style="color:#204a87">export</span> <span style="color:#000">AZURE_STORAGE_ACCESS_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;account_key&gt;
<span style="color:#000">MOUNT_POINT</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;mount_point&gt;
</code></pre></div></li>
<li>
<p>Create a folder for cache:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo mkdir -p /mnt/blobfusetmp
</code></pre></div></li>
<li>
<p>Make sure the file must be owned by the user who mounts the container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chown &lt;user&gt; /mnt/blobfusetmp
</code></pre></div></li>
<li>
<p>Create the mount point, if it doesn&rsquo;t exists:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir -p <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Mount container(replace <code>your_container</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">blobfuse <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> --container-name<span style="color:#ce5c00;font-weight:bold">=</span>&lt;your_container&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/mnt/blobfusetmp -o allow_other
</code></pre></div></li>
</ol>
<h4 id="a-nameazure_automatically_mountautomatically-mounta"><a name="azure_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 7 mounting steps above.</p>
<h5 id="a-nameazure_using_fstabusing-fstaba"><a name="azure_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create configuration file <code>connection.cfg</code> with same content, change accountName,
select one from accountKey or sasToken and replace with your value:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">accountName &lt;account-name-here&gt;
<span style="color:#8f5902;font-style:italic"># Please provide either an account key or a SAS token, and delete the other line.</span>
accountKey &lt;account-key-here-delete-next-line&gt;
<span style="color:#8f5902;font-style:italic">#change authType to specify only 1</span>
sasToken &lt;shared-access-token-here-delete-previous-line&gt;
authType &lt;MSI/SAS/SPN/Key/empty&gt;
containerName &lt;insert-container-name-here&gt;
</code></pre></div></li>
<li>
<p>Create a bash script named <code>azure_fuse</code>(e.g in /usr/bin, as root) with content below
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>mount_point</code>, <code>/path/to/blobfusetmp</code>,<code>/path/to/connection.cfg</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; blobfuse &lt;mount_point&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/blobfusetmp  --config-file<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/connection.cfg -o allow_other
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/azure_fuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> with the blobfuse script. Add the following line(replace paths):</p>
</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/azure_fuse &lt;/path/to/desired/mountpoint&gt; fuse allow_other,user,_netdev
</code></pre></div><h5 id="a-nameazure_using_systemdusing-systemda"><a name="azure_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/blobfuse.service</code>.
(replace <code>user_name</code>, <code>mount_point</code>, <code>container_name</code>,<code>/path/to/connection.cfg</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over Azure container
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>blobfuse <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span> --container-name<span style="color:#ce5c00;font-weight:bold">=</span>&lt;container_name&gt; --tmp-path<span style="color:#ce5c00;font-weight:bold">=</span>/mnt/blobfusetmp --config-file<span style="color:#ce5c00;font-weight:bold">=</span>/path/to/connection.cfg -o allow_other
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> blobfuse.service
sudo systemctl start blobfuse.service
</code></pre></div><p>Or for more detail <a href="https://github.com/Azure/azure-storage-fuse/tree/master/systemd">see here</a></p>
</li>
</ol>
<h4 id="a-nameazure_checkchecka"><a name="azure_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;blobfuse&#39;</span>
</code></pre></div><h4 id="a-nameazure_unmount_filesystemunmount-filesystema"><a name="azure_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#azure_using_systemd">systemd</a> to mount a container:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop blobfuse.service
sudo systemctl disable blobfuse.service
</code></pre></div><p>If you have any mounting problems, check out the <a href="https://github.com/Azure/azure-storage-fuse/wiki/3.-Troubleshoot-FAQ">answers</a>
to common problems</p>
<h2 id="google-drive-as-filesystem">Google Drive as filesystem</h2>
<h3 id="a-namegoogle_drive_ubuntu_2004ubuntu-2004a"><a name="google_drive_ubuntu_2004">Ubuntu 20.04</a></h3>
<h4 id="a-namegoogle_drive_mountmounta"><a name="google_drive_mount">Mount</a></h4>
<p>To mount a google drive as a filesystem in user space(FUSE)
you can use <a href="https://github.com/astrada/google-drive-ocamlfuse">google-drive-ocamlfuse</a>
To do this follow the instructions below:</p>
<ol>
<li>
<p>Install google-drive-ocamlfuse:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:alessandro-strada/ppa
sudo apt-get update
sudo apt-get install google-drive-ocamlfuse
</code></pre></div></li>
<li>
<p>Run <code>google-drive-ocamlfuse</code> without parameters:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">google-drive-ocamlfuse
</code></pre></div><p>This command will create the default application directory (~/.gdfuse/default),
containing the configuration file config (see the <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki">wiki</a>
page for more details about configuration).
And it will start a web browser to obtain authorization to access your Google Drive.
This will let you modify default configuration before mounting the filesystem.</p>
<p>Then you can choose a local directory to mount your Google Drive (e.g.: ~/GoogleDrive).</p>
</li>
<li>
<p>Create the mount point, if it doesn&rsquo;t exist(replace mount_point):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">mountpoint</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;mount_point&gt;&#34;</span>
mkdir -p <span style="color:#000">$mountpoint</span>
</code></pre></div></li>
<li>
<p>Uncomment <code>user_allow_other</code> in the <code>/etc/fuse.conf</code> file: <code>sudo nano /etc/fuse.conf</code></p>
</li>
<li>
<p>Mount the filesystem:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">google-drive-ocamlfuse -o allow_other <span style="color:#000">$mountpoint</span>
</code></pre></div></li>
</ol>
<h4 id="a-namegoogle_drive_automatically_mountautomatically-mounta"><a name="google_drive_automatically_mount">Automatically mount</a></h4>
<p>Follow the first 4 mounting steps above.</p>
<h5 id="a-namegoogle_drive_using_fstabusing-fstaba"><a name="google_drive_using_fstab">Using fstab</a></h5>
<ol>
<li>
<p>Create a bash script named gdfuse(e.g in /usr/bin, as root) with this content
(replace <code>user_name</code> on whose behalf the disk will be mounted, <code>label</code>, <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span><span style="color:#8f5902;font-style:italic"></span>sudo -u &lt;user_name&gt; google-drive-ocamlfuse -o allow_other -label &lt;label&gt; &lt;mount_point&gt;
<span style="color:#204a87">exit</span> <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div></li>
<li>
<p>Give it the execution permission:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod +x /usr/bin/gdfuse
</code></pre></div></li>
<li>
<p>Edit <code>/etc/fstab</code> adding a line like this, replace <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/absolute/path/to/gdfuse  &lt;mount_point&gt;     fuse    allow_other,user,_netdev     <span style="color:#0000cf;font-weight:bold">0</span>       <span style="color:#0000cf;font-weight:bold">0</span>
</code></pre></div><p>For more details see <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki/Automounting">here</a></p>
</li>
</ol>
<h5 id="a-namegoogle_drive_using_systemdusing-systemda"><a name="google_drive_using_systemd">Using systemd</a></h5>
<ol>
<li>
<p>Create unit file <code>sudo nano /etc/systemd/system/google-drive-ocamlfuse.service</code>.
(replace <code>user_name</code>, <code>label</code>(default <code>label=default</code>), <code>mount_point</code>):</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>Unit<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Description</span><span style="color:#ce5c00;font-weight:bold">=</span>FUSE filesystem over Google Drive
<span style="color:#000">After</span><span style="color:#ce5c00;font-weight:bold">=</span>network.target

<span style="color:#ce5c00;font-weight:bold">[</span>Service<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">Environment</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;MOUNT_POINT=&lt;mount_point&gt;&#34;</span>
<span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">Group</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;user_name&gt;
<span style="color:#000">ExecStart</span><span style="color:#ce5c00;font-weight:bold">=</span>google-drive-ocamlfuse -label &lt;label&gt; <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">ExecStop</span><span style="color:#ce5c00;font-weight:bold">=</span>fusermount -u <span style="color:#4e9a06">${</span><span style="color:#000">MOUNT_POINT</span><span style="color:#4e9a06">}</span>
<span style="color:#000">Restart</span><span style="color:#ce5c00;font-weight:bold">=</span>always
<span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">=</span>forking

<span style="color:#ce5c00;font-weight:bold">[</span>Install<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">WantedBy</span><span style="color:#ce5c00;font-weight:bold">=</span>multi-user.target
</code></pre></div></li>
<li>
<p>Update the system configurations, enable unit autorun when the system boots, mount the drive:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl <span style="color:#204a87">enable</span> google-drive-ocamlfuse.service
sudo systemctl start google-drive-ocamlfuse.service
</code></pre></div><p>For more details see <a href="https://github.com/astrada/google-drive-ocamlfuse/wiki/Automounting">here</a></p>
</li>
</ol>
<h4 id="a-namegoogle_drive_checkchecka"><a name="google_drive_check">Check</a></h4>
<p>A file <code>/etc/mtab</code> contains records of currently mounted filesystems.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/mtab <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#39;google-drive-ocamlfuse&#39;</span>
</code></pre></div><h4 id="a-namegoogle_drive_unmount_filesystemunmount-filesystema"><a name="google_drive_unmount_filesystem">Unmount filesystem</a></h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fusermount -u &lt;mount_point&gt;
</code></pre></div><p>If you used <a href="#google_drive_using_systemd">systemd</a> to mount a drive:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl stop google-drive-ocamlfuse.service
sudo systemctl disable google-drive-ocamlfuse.service
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c7cf871a1ff98f3a84b27456c266df2c">2.4 - Backup guide</h1>
    
	<!--lint disable heading-style-->
<h2 id="about-cvat-data-volumes">About CVAT data volumes</h2>
<p>Docker volumes are used to store all CVAT data:</p>
<ul>
<li>
<p><code>cvat_db</code>: PostgreSQL database files, used to store information about users, tasks, projects, annotations, etc.
Mounted into <code>cvat_db</code> container by <code>/var/lib/postgresql/data</code> path.</p>
</li>
<li>
<p><code>cvat_data</code>: used to store uploaded and prepared media data.
Mounted into <code>cvat</code> container by <code>/home/django/data</code> path.</p>
</li>
<li>
<p><code>cvat_keys</code>: used to store user ssh keys needed for <a href="../../../docs/manual/advanced/task-synchronization/">synchronization with a remote Git repository</a>.
Mounted into <code>cvat</code> container by <code>/home/django/keys</code> path.</p>
</li>
<li>
<p><code>cvat_logs</code>: used to store logs of CVAT backend processes managed by supevisord.
Mounted into <code>cvat</code> container by <code>/home/django/logs</code> path.</p>
</li>
<li>
<p><code>cvat_events</code>: this is an optional volume that is used only when <a href="../../../docs/administration/advanced/analytics/">Analytics component</a>
is enabled and is used to store Elasticsearch database files.
Mounted into <code>cvat_elasticsearch</code> container by <code>/usr/share/elasticsearch/data</code> path.</p>
</li>
</ul>
<h2 id="how-to-backup-all-cvat-data">How to backup all CVAT data</h2>
<p>All CVAT containers should be stopped before backup:</p>
<pre><code class="language-console" data-lang="console">docker-compose stop
</code></pre><p>Please don&rsquo;t forget to include all the compose config files that were used in the docker-compose command
using the <code>-f</code> parameter.</p>
<p>Backup data:</p>
<pre><code class="language-console" data-lang="console">mkdir backup
docker run --rm --name temp_backup --volumes-from cvat_db -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_db.tar.bz2 /var/lib/postgresql/data
docker run --rm --name temp_backup --volumes-from cvat -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_data.tar.bz2 /home/django/data
# [optional]
docker run --rm --name temp_backup --volumes-from cvat_elasticsearch -v $(pwd)/backup:/backup ubuntu tar -cjvf /backup/cvat_events.tar.bz2 /usr/share/elasticsearch/data
</code></pre><p>Make sure the backup archives have been created, the output of <code>ls backup</code> command should look like this:</p>
<pre><code class="language-console" data-lang="console">ls backup
cvat_data.tar.bz2  cvat_db.tar.bz2  cvat_events.tar.bz2
</code></pre><h2 id="how-to-restore-cvat-from-backup">How to restore CVAT from backup</h2>
<p>Note: CVAT containers must exist (if no, please follow the <a href="../../../docs/administration/basics/installation/#quick-installation-guide">installation guide</a>).
Stop all CVAT containers:</p>
<pre><code class="language-console" data-lang="console">docker-compose stop
</code></pre><p>Restore data:</p>
<pre><code class="language-console" data-lang="console">cd &lt;path_to_backup_folder&gt;
docker run --rm --name temp_backup --volumes-from cvat_db -v $(pwd):/backup ubuntu bash -c &quot;cd /var/lib/postgresql/data &amp;&amp; tar -xvf /backup/cvat_db.tar.bz2 --strip 4&quot;
docker run --rm --name temp_backup --volumes-from cvat -v $(pwd):/backup ubuntu bash -c &quot;cd /home/django/data &amp;&amp; tar -xvf /backup/cvat_data.tar.bz2 --strip 3&quot;
# [optional]
docker run --rm --name temp_backup --volumes-from cvat_elasticsearch -v $(pwd):/backup ubuntu bash -c &quot;cd /usr/share/elasticsearch/data &amp;&amp; tar -xvf /backup/cvat_events.tar.bz2 --strip 4&quot;
</code></pre><p>After that run CVAT as usual:</p>
<pre><code class="language-console" data-lang="console">docker-compose up -d
</code></pre><h2 id="additional-resources">Additional resources</h2>
<p><a href="https://docs.docker.com/storage/volumes/#backup-restore-or-migrate-data-volumes">Docker guide about volume backups</a></p>

</div>



    
	
  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-2 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter public chat" aria-label="Gitter public chat">
    <a class="text-white" rel="noopener noreferrer" href="https://gitter.im/opencv-cvat/public">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" rel="noopener noreferrer" href="https://stackoverflow.com/search?q=%23cvat">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="YouTube" aria-label="YouTube">
    <a class="text-white" rel="noopener noreferrer" href="https://www.youtube.com/user/nmanovic">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" rel="noopener noreferrer" href="https://github.com/cvat-ai/cvat">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Forum on Intel Developer Zone" aria-label="Forum on Intel Developer Zone">
    <a class="text-white" rel="noopener noreferrer" href="https://community.intel.com/t5/Intel-Distribution-of-OpenVINO/bd-p/distribution-openvino-toolkit">
      <i class="fas fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter developers chat" aria-label="Gitter developers chat">
    <a class="text-white" rel="noopener noreferrer" href="https://gitter.im/opencv-cvat/dev">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-8 text-center order-sm-2">
        <small class="mr-1"><a href="https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">Privacy Policy</a></small>
        |
        <small class="mx-1"><a href="https://www.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Use</a></small>
        |
        <small class="ml-1"><a href="https://cvat.org/api/restrictions/terms-of-use">CVAT terms of Use</a></small>
        <br/>
        <div class="footer-disclaimer text-white ">
          <small>Intel technologies may require enabled hardware, software or service activation. // No product or component can be absolutely secure. // Your costs and results may vary. // Performance varies by use, configuration and other factors. // See our complete legal <u><a href="https://edc.intel.com/content/www/us/en/products/performance/benchmarks/overview/?r=219444055">Notices and Disclaimers</a></u>. // Intel is committed to respecting human rights and avoiding complicity in human rights abuses. See Intel’s <a href="https://www.intel.com/content/www/us/en/policy/policy-human-rights.html"><u>Global Human Rights Principles</u></a>. Intel’s products and software are intended only to be used in applications that do not cause or contribute to a violation of an internationally recognized human right.</small>
      </div>
  
    <p class="mt-2"><a href="../../../about/">About</a></p>
  
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 













<script src="../../../js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js" integrity="sha256-OxcsE7YsK&#43;qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin="anonymous"></script>



<script src='../../../js/prism.js'></script>



  </body>
</html>
